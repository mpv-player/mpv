<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>

<HEAD>
  <TITLE>Rapporter un bogue - MPlayer - Le lecteur vidéo pour Linux</TITLE>
  <LINK REL="stylesheet" TYPE="text/css" HREF="default.css">
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
</HEAD>

<BODY>


<H1><A NAME="B">Appendice C - Comment reporter un bogue</A></H1>

<P>Les bons rapports de bogue sont une contribution précieuse pour tout
  projet en développement. Mais tout comme pour écrire un bon logiciel, les bons
  rapports de problème exigent du travail. Rendez-vous compte que la plupart des
  développeurs sont extrêmement occupés et reçoivent un nombre obscène d'emails.
  Donc bien que votre retour soit crucial pour l'amélioration de MPlayer et soit
  très apprécié, comprenez que vous devez fournir <B>toutes</B> les informations
  que nous demandons et suivre de près les instructions de ce document.</P>


<H2>Comment réparer les bogues</H2>

<P>Si vous pensez avoir les talents nécessaires vous êtes invité à essayer de
  réparer le bogue vous-même. Ou peut-être l'avez-vous déjà fait ? Veuillez lire
  <A HREF="../tech/patches.txt">ce court document(en anglais)</A> pour trouver comment
  faire inclure votre code dans MPlayer. Les gens de la liste de diffusion
  <A HREF="http://mplayerhq.hu/mailman/listinfo/mplayer-dev-eng">mplayer-dev-eng</A>
  vous assisterons si vous avez des questions.</P>


<H2>Comment rapporter les bogues</H2>

<P>Tout d'abord veuillez essayer la dernière version CVS de MPlayer car votre bogue
  y est peut-être déjà réparé. Le développement évolue très rapidement, la plupart
  des problèmes des versions officielles sont rapportés dans les jours voir les 
  heures qui suivent, donc n'utilisez <B>que le CVS</B> pour rapporter les bogues.
  Les instructions CVS peuvent être trouvées en bas de 
  <A HREF="documentation.html#known_bugs">cette page</A> ou dans le README. Si
  tout cela ne vous aide pas veuillez vous référer à 
  <A HREF="documentation.html#known_bugs">la liste des bogues connus</A> et au
  reste de la documentation. Si votre problème n'est pas connu ou non résolvable
  par nos instructions, alors merci de rapporter le bogue.</P>

<P>Merci de ne pas envoyer de rapports de bogues en privé à chaque développeur.
  C'est un travail commun et il y a donc plein de gens que cela pourrait intéresser.
  Parfois d'autres utilisateurs on rencontré les mêmes ennuis que vous et savent
  comment contourner le problème même si c'est un bogue dans le code de MPlayer.</P>

<P>Merci de décrire votre problème avec le plus de détails possibles. Faites
  un petit travail de détective pour restreindre les conditions d'occurrence
  du problème. Est ce que le bogue ne se montre que dans certaines situations ?
  Est-il spécifique à certains fichiers ou types de fichier ? Apparaît-il avec
  un seul codec ou est-ce indépendant du codec ? Pouvez-vous le reproduire avec
  tous les pilotes de sortie ? Plus vous fournissez d'information, plus grandes sont
  nos chances de résoudre votre problème. Merci de ne pas oublier d'inclure également
  les informations importantes requises plus-bas, sinon nous ne pourront établir un
  diagnostic précis de votre problème.</P>

<P>Un guide excellent et bien écrit pour poser des questions sur les forums
  publiques est <A HREF="http://www.linux-france.org/article/these/smart-questions/smart-questions-fr.html">
  Comment Poser Les Questions De Manière Intelligente</A> par Eric S. Raymond. Il y en
  a un autre (en anglais) appelé <A HREF="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html">How to Report Bugs Effectively</A>
  par <A HREF="http://www.chiark.greenend.org.uk/~sgtatham/">Simon Tatham</A>.
  Si vous suivez ces règles vous devriez pouvoir obtenir de l'aide. Mais merci de comprendre que nous
  suivons tous les listes de diffusion volontairement sur notre temps libre. Nous 
  sommes très occupés et ne pouvons garantir que vous aurez une solution à votre 
  problème ou même une réponse.</P>


<H3>Où rapporter les bogues ?</H3>

<P>Souscrivez à la liste de diffusion mplayer-users:<BR>
  &nbsp;&nbsp;&nbsp;&nbsp;<A HREF="http://mplayerhq.hu/mailman/listinfo/mplayer-users">http://mplayerhq.hu/mailman/listinfo/mplayer-users</A><BR>
  et décrivez votre problème:<BR>
  &nbsp;&nbsp;&nbsp;&nbsp;<A HREF="mailto:mplayer-users@mplayerhq.hu">mplayer-users@mplayerhq.hu</A></P>

<P>La langue de cette liste est l'<B>Anglais</B>. Suivez les
  <A HREF="http://www.ietf.org/rfc/rfc1855.txt"> Règles de la Netiquette</A> SVP
  et <B>n'envoyez de mails en HTML</B> sur aucune de nos listes de diffusion.
  Vous ne serez qu'ignoré ou banni. Si vous ne savez pas ce qu'est un mail en HTML
  ou pourquoi c'est mauvais, lisez ce <A HREF="http://expita.com/nomime.html">
  sympatique document</A>. Il explique tous les détails et a des instructions pour
  désactiver le HTML. Notez également que nous ne faisons pas de CC (copie-conforme)
  individuelle et que c'est donc une bonne idée de souscrire pour recevoir votre
  réponse.</P>


<H3>Que rapporter ?</H3>

<H4>System Information:</H4>

<UL>
  <LI>Votre distribution Linux ou système d'exploitation et version ex.:
    <UL>
      <LI>Red Hat 7.1</LI>
      <LI>Slackware 7.0 + paquetages de développement de la 7.1 ...</LI>
    </UL>
  </LI>
  <LI>version du noyau:<BR>
      <CODE>uname -a</CODE></LI>
  <LI>version de la libc:<BR>
      <CODE>ls -l /lib/libc[.-]*</CODE></LI>
  <LI>version du serveur X:<BR>
      <CODE>X -version</CODE></LI>
  <LI>version du gcc et de ld:<BR>
      <CODE>gcc -v<BR>
      ld -v</CODE></LI>
  <LI>version des binutils:<BR>
      <CODE>as --version</CODE></LI>
  <LI>Si vous avez des problèmes avec le mode plein-écran:
    <UL>
      <LI>Type de gestionnaire de fenêtre et version</LI>
    </UL>
  </LI>
  <LI>Si seule la GUI est boggué:
    <UL>
      <LI>Version de GTK</LI>
      <LI>Version de GLIB</LI>
      <LI>Version de libpng</LI>
      <LI>Endroit de la GUI où le bogue se produit</LI>
    </UL>
  </LI>
</UL>


<H4>Matériel &amp; pilotes:</H4>

<UL>
  <LI>info CPU (cela ne fonctionne que sous Linux):<BR>
    <CODE>cat /proc/cpuinfo</CODE></LI>
  <LI>Fabricant et modèle de votre carte vidéo, ex.:
    <UL>
      <LI>ASUS V3800U chip: nVidia TNT2 Ultra pro 32MB SDRAM</LI>
      <LI>Matrox G400 DH 32MB SGRAM</LI>
    </UL>
  </LI>
  <LI>Type et version des drivers vidéo, ex.:
    <UL>
      <LI>Pilote X intégré</LI>
      <LI>nVidia 0.9.623</LI>
      <LI>Utah-GLX CVS 2001-02-17</LI>
      <LI>DRI from X 4.0.3</LI>
    </UL>
  </LI>
  <LI>Type et version des drivers son, ex.:
    <UL>
      <LI>Creative SBLive! Gold with OSS driver from oss.creative.com</LI>
      <LI>Creative SB16 avec pilotes noyau OSS</LI>
      <LI>GUS PnP avec émulation OSS ALSA</LI>
    </UL>
  </LI>
  <LI>En cas de doute, joignez y le résultat de <CODE>lspci -vv</CODE> sur les systèmes
    Linux.</LI>
</UL>


<H4>En cas de problème/erreur de compilation:</H4>

Veuillez inclure ces fichiers:

<UL>
  <LI><CODE>config.h</CODE></LI>
  <LI><CODE>config.mak</CODE></LI>
</UL>

Uniquement si la compilation échoue à partir d'un de ces répertoires, incluez ces fichiers:

<UL>
  <LI><CODE>Gui/config.mak</CODE></LI>
  <LI><CODE>libvo/config.mak</CODE></LI>
  <LI><CODE>libao2/config.mak</CODE></LI>
</UL>


<H4>Pour les problème de configure</H4>

Incluez <CODE>configure.log</CODE>.

<H4>Pour les problèmes de lecture</H4>

<P>Merci d'inclure la sortie de MPlayer en verbosité niveau 1, mais rappelez-vous
  de <B>ne pas tronquer la sortie</B> en le copiant dans votre mail. Les développeurs
  ont besoin de tous les messages pour diagnostiquer correctement un problème.
  Vous pouver rediriger la sortie dans un fichier comme ceci:</P>

<P><CODE>&nbsp;&nbsp;&nbsp;&nbsp;mplayer -v [options] [nomfichier] &gt; mplayer.log 2&gt;&amp;1</CODE></P>

<P>Si votre problème est spécifique à un ou plusieurs fichiers, alors merci d'uploader
  le(s) fautif(s) sur:</P>

<P>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="ftp://mplayerhq.hu/MPlayer/incoming/">ftp://mplayerhq.hu/MPlayer/incoming/</A></P>

<P>Uploadez aussi un petit fichier texte ayant le même nom que votre fichier mais
  avec une extension .txt. Décrivez le problème que vous avez avec ce fichier et
  incluez votre adresse e-mail ainsi que la sortie de MPlayer en verbosité niveau 1.
  Généralement les premiers 1-5 MB sont suffisants pour reproduire le problème, 
  mais pour être sur nous vous demandons de faire:</P>

<P><CODE>&nbsp;&nbsp;&nbsp;&nbsp;dd if=votrefichier of=petitfichier bs=1024k count=5</CODE></P>

<P>cela coupera les 5 premiers Mo de <STRONG>'votrefichier'</STRONG> et les
  sauvera dans <STRONG>'petitfichier'</STRONG>. Essayez alors de lire le petit fichier, 
  et si le bogue persiste vous pouvez envoyer le petit fichier par ftp.
. <STRONG>N'envoyez jamais</STRONG>ces fichiers par e-mail ! Envoyez les par FTP, 
  et postez seulement leur nom/adresse sur ce FTP. Si le fichier est accessible en 
  téléchargement, envoyez seulement son adresse <STRONG>exacte</STRONG>.</P>


<H4>Pour les plantages</H4>

<P>Vous devez lancer MPlayer à l'intérieur de <CODE>gdb</CODE> et nous envoyer le résultat
  complet ou si vous avez un core dump du plantage vous pouvez extraire des informations
  utiles du fichier <CODE>Core</CODE>. Voici comment:</P>

<H4>Comment conserver les informations avec un plantage reproduisible</H4>

Recompilez MPlayer avec les instructions de déboguage:

<P><CODE>&nbsp;&nbsp;&nbsp;&nbsp;./configure --enable-debug=3<BR>
  &nbsp;&nbsp;&nbsp;&nbsp;make</CODE></P>

et ensuite lancez MPlayer à l'intérieur de gdb en utilisant:

<P><CODE>&nbsp;&nbsp;&nbsp;&nbsp;gdb ./mplayer</CODE></P>

Vous êtes maintenant à l'intérieur de gdb. Tapez:

<P><CODE>&nbsp;&nbsp;&nbsp;&nbsp;run -v [options-pour-mplayer] nomfichier</code></P>

et reproduisez votre plantage. Aussitôt que vous l'avez fait, gdb va vous
renvoyer à la ligne de commande où vous devrez entrer

<P><CODE>&nbsp;&nbsp;&nbsp;&nbsp;bt<BR>
  &nbsp;&nbsp;&nbsp;&nbsp;disass $pc-32 $pc+32</CODE></P>


<H4>Comment extraire les informations significatives d'un core dump</H4>

<P>créez le fichier de commande suivant:</P>

<P><CODE>disass $pc-32 $pc+32<BR>
  info all-registers</CODE></P>

<P>puis exécutez simplement la ligne de commande suivante:</P>

<P>&nbsp;&nbsp;&nbsp;&nbsp;<CODE>gdb mplayer --core=core -batch --command=fichier_de_commande &gt; mplayer.bug</CODE></P>


<H3>Note générale</H3>

<P>Si quelque chose est très gros (les logs par exemple) alors il vaut mieux
  l'uploader sur le serveur FTP en format compressé (gzip et bzip2 préférés) et
  indiquer uniquement leur nom/adresse dans le rapport de bug. Nos listes de
  diffusion ont une taille de message limite de 80k, si vous avez quelque chose
  de plus gros vous devrez le compresser ou l'uploader.</P>


<H2>Je sais ce que je fait...</H2>

<P>Si vous avez créé un rapport de bogue correct en suivant les étapes ci-dessus
  et que vous êtes persuadé qu'il s'agit d'un bug dans MPlayer, pas un problème
  de compilateur ou un fichier endommagé, vous avez déjà lu la documentation et
  vous n'arrivez pas à trouver une solution, vos pilotes son sont OK, alors vous
  pouvez souscrire à la liste mplayer-advusers et envoyer votre rapport dessus
  pour obtenir une réponse meilleure et plus rapide.<BR><BR>
  Soyez prévenu que si vous posez des questions de newbie ou des questions dont
  les réponses sont dans le manuel dessus, vous serez ignoré ou insulté au lieu
  de recevoir une réponse appropriée.<BR>
  Donc ne nous insultez pas et ne vous inscrivez à -advusers que si vous savez
  vraiment ce que vous faites et vous sentez en mesure d'être un utilisateur
  avancé de MPlayer ou un développeur. Si vous correspondez à ces critères il
  ne devrait pas être difficile de trouver comment on s'inscrit...</P>

</BODY>
</HTML>
