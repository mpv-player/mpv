<?xml version="1.0" encoding="iso-8859-2"?>
<!-- Synced with r19832 -->
<chapter id="video">
<title>Výstupní video zaøízení/rozhraní</title>

<sect1 id="mtrr">
<title>Nastavení MTRR</title>

<para>
VELMI doporuèujeme skontrolovat, zda jsou MTRR registry
správnì nastaveny, jeliko¾ mohou velice zvý¹it výkon.
</para>

<para>
Proveïte <command>cat /proc/mtrr</command>:
<screen>
<prompt>--($:~)--</prompt> cat /proc/mtrr
reg00: base=0xe4000000 (3648MB), size=  16MB: write-combining, count=9
reg01: base=0xd8000000 (3456MB), size= 128MB: write-combining, count=1<!--
--></screen>
</para>

<para>
Takto to správnì ukazuje má Matrox G400 se 16MB pamìti. Provedl jsem to z
XFree 4.x.x, které nastavuje MTRR registry automaticky.
</para>

<para>
Pokud nic nefunguje, budete to muset udìlat ruènì. Nejprve musíte najít
bázovou adresu. Máte tøi mo¾nosti, jak ji zjistit:

<orderedlist>
<listitem><para>
  ze startovacích informací X11, napøíklad:
  <screen>
(--) SVGA: PCI: Matrox MGA G400 AGP rev 4, Memory @ 0xd8000000, 0xd4000000
(--) SVGA: Linear framebuffer at 0xD8000000<!--
--></screen>
  </para></listitem>
<listitem><para>
  z <filename>/proc/pci</filename> (pou¾ijte pøíkaz <command>lspci -v</command>
  ):
  <screen>
01:00.0 VGA compatible controller: Matrox Graphics, Inc.: Unknown device 0525
Memory at d8000000 (32-bit, prefetchable)
  </screen>
  </para></listitem>
<listitem><para>
  ze zpráv jaderného modulu mga_vid (pou¾ijte <command>dmesg</command>):
  <screen>mga_mem_base = d8000000</screen>
  </para></listitem>
</orderedlist>
</para>

<para>
Pak zjistìte velikost pamìti. Je to velmi snadné, staèí pøevést velikost
video RAM do hexadecimální soustavy, nebo pou¾ijte následující tabulku:
<informaltable frame="none">
<tgroup cols="2">
<tbody>
<row><entry>1 MB</entry><entry>0x100000</entry></row>
<row><entry>2 MB</entry><entry>0x200000</entry></row>
<row><entry>4 MB</entry><entry>0x400000</entry></row>
<row><entry>8 MB</entry><entry>0x800000</entry></row>
<row><entry>16 MB</entry><entry>0x1000000</entry></row>
<row><entry>32 MB</entry><entry>0x2000000</entry></row>
</tbody>
</tgroup>
</informaltable>
</para>

<para>
Pokud znáte bázovou adresu a velikost pamìti, zaènìme nastavovat MTRR registry!
Napøíklad pro vý¹e uvedenou kartu Matrox (<literal>base=0xd8000000</literal>)
s 32MB RAM (<literal>size=0x2000000</literal>) staèí spustit:
<screen>
echo "base=0xd8000000 size=0x2000000 type=write-combining" &gt;| /proc/mtrr
</screen>
</para>

<para>
Ne v¹echny procesory mají MTRR. Napøíklad star¹í CPU K6-2 (okolo 266MHz,
stepping 0) nemají MTRR, ale stepping 12 je mají
(pro ovìøení spus»te <command>cat /proc/cpuinfo</command>).
</para>
</sect1>

<sect1 id="output-trad">
<title>Video výstupy pro tradièní video karty</title>
<sect2 id="xv">
<title>Xv</title>

<para>
Pod XFree86 4.0.2, nebo novìj¹ím, mù¾ete pou¾ít hardwarové YUV rutiny karty
pomocí roz¹íøení XVideo. Pøesnì toto pou¾ívá volba
'<option>-vo xv</option>'. Toto rozhraní také podporuje nastavování
jasu/kontrastu/barevného tónu atd. (pokud nepou¾íváte strarý, pomalý DirectShow
DivX kodek, který to podporuje v¹ude), viz man stránka.
</para>

<para>
Abyste to zprovoznili, ujistìte se o následujícím:

<orderedlist>
<listitem><para>
  Musíte pou¾ívat XFree86 4.0.2 nebo novìj¹í (pøedchozí verze nemají XVideo)
  </para></listitem>
<listitem><para>
  Va¹e karta aktuálnì podporuje hardwarovou akceleraci (moderní karty ano)
  </para></listitem>
<listitem><para>
  X nahrává roz¹íøení XVideo. Zpráva ve <filename>/var/log/XFree86.0.log</filename>
  vypadá asi takto:
  <programlisting>(II) Loading extension XVideo</programlisting>
  <note><para>
   Takto se nahraje pouze roz¹íøení pro XFree86. To je v dobré instalaci nahráno
   v¾dy a neznamená to, ¾e je naètena i podpora XVideo pro
   <emphasis role="bold">kartu</emphasis>!
  </para></note>
  </para></listitem>
<listitem><para>
  Va¹e karta má podporu Xv pod Linuxem. Abyste si to ovìøili, zkuste
  <command>xvinfo</command>, které je souèástí distribuce XFree86. Mìl by se
  vypsat dlouhý text podobný tomuto:
  <screen>
X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
(...)
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
(...atd...)<!--
--></screen>
  Musí podporovat pixelové formáty YUY2 packed a YV12 planar, aby byla
  pou¾itelná s <application>MPlayer</application>em.
  </para></listitem>
<listitem><para>
  A nakonec si ovìøte, jestli byl <application>MPlayer</application> skompilován
  s podporou 'xv'. Proveïte <command>mplayer -vo help | grep xv </command>.
  Pokud byla skompilována podpora 'xv', mìl by se objevi øádek podpobný tomuto:
  <screen>
  xv      X11/Xv<!--
  --></screen>
  </para></listitem>
</orderedlist>
</para>

<sect3 id="tdfx">
<title>Karty 3dfx</title>

<para>
Star¹í ovladaèe 3dfx byly známy svými problémy s XVideo akcelerací.
Nepodporovaly ani YUY2 ani YV12, atp. Ovìøte, ¾e máte XFree86
verze 4.2.0 nebo vy¹¹í, které pracuje dobøe s YV12 a YUY2. Pøedchozí verze,
vèetnì 4.1.0, <emphasis role="bold">padá s YV12</emphasis>.
Pokud za¾ívate podivné situace pøi pou¾ívání <option>-vo xv</option>, zkuste SDL
(má rovnì¾ XVideo) a uvidíte, zda to pomù¾e. Prostudujte si sekci
<link linkend="sdl">SDL</link> pro více informací.
</para>

<para>
<emphasis role="bold">NEBO</emphasis>, zkuste NOVÉ
<option>-vo tdfxfb</option> rozhraní! Viz sekce
<link linkend="tdfxfb">tdfxfb</link>.
</para>
</sect3>


<sect3 id="s3">
<title>Karty S3</title>

<para>
S3 Savage3D by mìly fungovat dobøe, ale pro Savage4 pou¾ijte XFree86 verze 4.0.3
nebo vy¹¹í (v pøípadì problémù s obrazem, zkuste 16bpp). Stejnì ajko S3 Virge:
má sice podporu xv, ale karta samotná je velmi pomalá, tak¾e ji radìji prodejte.
</para>

<para>
Pro karty S3 Virge nyní existuje nativní framebuffer ovladaè podobný 
tdfxfb. Nastavte si framebuffer (èili pøidejte
"<option>vga=792 video=vesa:mtrr</option>" do kernelu) a pou¾ijte
<option>-vo s3fb</option> (<option>-vf yuy2</option> a <option>-dr</option>
rovnì¾ pomù¾ou).
</para>

<note>
<para>
Zatím není jasné, kterým modelùm Savage chybí podpora YV12 a konvertují
ovladaèem (pomalé). Pokud podezøíváte kartu, opatøete si novìj¹í ovladaè, nebo
slu¹nì po¾ádejte v konferenci MPlayer-users o ovladaè s MMX/3DNow!.
</para>
</note>
</sect3>


<sect3 id="nvidia">
<title>Karty nVidia</title>

<para>
nVidia není v¾dy pod Linuxem nejlep¹í volbou... Open-source ovladaè
v XFree86 podporuje vìt¹inu tìchto karet, ale v nìkterých pøípadech musíte
pou¾ít binární closed-source ovladaè od nVidie, který je k dispozici na
<ulink url="http://www.nvidia.com/object/linux.html">serveru nVidia</ulink>.
Tento ovladaè budete potøebovat v¾dy, pokud zároveò chcete 3D akceleraci.
</para>

<para>
Karty Riva128 nemají podporu XVideo v nVidia ovladaèi z XFree86 :(
Stì¾ujte si nVidii.
</para>

<para>
Aèkoli <application>MPlayer</application> obsahuje
<link linkend="vidix">VIDIX</link> ovladaè pro vìt¹inu nVidia karet, zatím je
ve stavu beta verze a má jisté nedostatky. Více informací naleznete v sekci
<link linkend="vidix-nvidia">nVidia VIDIX</link>.
</para>
</sect3>


<sect3 id="ati">
<title>Karty ATI</title>

<para>
<ulink url="http://gatos.sf.net">Ovladaè GATOS</ulink>
(který byste mìli pou¾ít, pokud nemáte Rage128 nebo Radeon) má zapnutý VSYNC
ve výchozím stavu. To znamená, ¾e rychlost dekódování (!) je synchronizována
s obnovovacím kmitoètem monitoru. Pokud se vám zdá pøehrávání pomalé, zkuste
nìjak vypnout VSYNC, nebo nastavte obnovovací kmitoèet na n*(snímková rychlost
filmu) Hz.
</para>

<para>
Radeon VE - pokud potøebujete X, pou¾ijte pro tuto kartu XFree86 4.2.0 nebo
vy¹¹í. Není zde podpora pro TV out. Samozøejmì s
<application>MPlayer</application>em mù¾ete mít s trochou ¹tìstí
<emphasis role="bold">akcelerovaný</emphasis> display s nebo bez
<emphasis role="bold">TV výstupu</emphasis> a nepotøebujete ¾ádné X knihovny.
Pøeètìte si sekci <link linkend="vidix">VIDIX</link>.
</para>
</sect3>


<sect3 id="neomagic">
<title>Karty NeoMagic</title>

<para>
Tyto karty lze nalézt v mnoha laptopech. Musíte pou¾ít XFree86 4.3.0 nebo
vy¹¹í, nebo pou¾ijte
<ulink url="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/">ovladaèe s podporou Xv</ulink>
od Stefana Seyfrieda.
Staèí vybrat ten, který je vhodný pro va¹i verzi XFree86.
</para>

<para>
XFree86 4.3.0 obsahuje podporu Xv, av¹ak Bohdan Horst poslal malý
<ulink url="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/neo_driver.patch">patch</ulink>
pro zdrojový kód XFree86, který zrychluje operace s framebufferem (èili XVideo)
a¾ ètyøikrát. Patch byl zaøazen do XFree86 CVS a mìl by být v dal¹í verzi
vydané po 4.3.0.
</para>

<para>
Abyste mohli pøehrávat obsah velikosti DVD, zmìòte svùj XF86Config takto:
<programlisting>
Section "Device"
    [...]
    Driver "neomagic"
    <emphasis>Option "OverlayMem" "829440"</emphasis>
    [...]
EndSection<!--
--></programlisting>
</para>
</sect3>


<sect3 id="trident">
<title>Karty Trident</title>
<para>
Chcete-li pou¾ívat Xv s kartou Trident, co¾ nepracuje s 4.1.0,
nainstalujte si XFree 4.2.0. 4.2.0 pøidává podporu pro celoobrazovkové Xv
pro kartu Cyberblade XP.
</para>

<para>
Alternativnì, <application>MPlayer</application> obsahuje
<link linkend="vidix">VIDIX</link> ovladaè pro kartu Cyberblade/i1.
</para>

</sect3>


<sect3 id="kyro">
<title>Karty Kyro/PowerVR</title>
<para>
Pokud chcete pou¾ívat Xv s kartou zalo¾enou na èipu Kyro (napøíklad Hercules
Prophet 4000XT), mìli byste si stáhnout ovladaèe z
<ulink url="http://www.powervr.com/">PowerVR serveru</ulink>.
</para>
</sect3>
</sect2>

<!-- ********** -->

<sect2 id="dga">
<title>DGA</title>

<formalpara>
<title>PØEDMLUVA</title>
<para>
Tento dokument se nìkolika slovy sna¾í vysvìtlit co je to DGA a co
výstupní videorozhraní DGA pro <application>MPlayer</application>
udìlat mù¾e (a co ne).
</para>
</formalpara>

<formalpara>
<title>CO JE DGA</title>
<para>
<acronym>DGA</acronym> je zkratka pro <emphasis>Direct Graphics
Access</emphasis>, co¾ je program pro obejití X servru a
pøímou modifikaci pamìti framebufferu. Technicky to znamená mapování pamìti
framebufferu do pamì»ového prostoru va¹eho procesu.
To kernel umo¾òuje pouze pokud máte práva superu¾ivatele. Ty dostanete buï
nalogováním se jako <systemitem class="username">root</systemitem>, nebo
nastavením SUID bitu spustitelnému souboru
<application>MPlayer</application>u (<emphasis role="bold">nedoporuèujeme
</emphasis>).
</para>
</formalpara>
<para>
Existují dvì verze DGA: DGA1 je pou¾íváno XFree 3.x.x a DGA2 bylo
pøedstaveno v XFree 4.0.1.
</para>

<para>
DGA1 poskytuje pouze pøímý pøístup k framebufferu jak byl popsán vý¹e.
Chcete-li pøepínat rozli¹ení videosignálu, musíte se spolehnout na
roz¹íøení XVidMode.
</para>

<para>
DGA2 zahrnuje vlastnosti roz¹íøení XVidMode a rovnì¾ umo¾òuje pøepínat
barevnou hloubku zobrazovaèe. Tak¾e mù¾ete jendodu¹e provozovat X server
s hloubkou 32 bitù a pøepnout na barevnou hloubku 15 bitù a naopak.
</para>

<para>
DGA má ov¹em i jisté obtí¾e. Zdá se, ¾e je nìjak závislé na grafickém èipu,
který pou¾íváte a na implementaci video ovladaèe X serveru, který tento èip
obsluhuje. Tak¾e nefunguje na v¹ech systémech...
</para>

<formalpara>
<title>INSTALACE PODPORY DGA PRO MPLAYER</title>

<para>
Nejprve si ovìøte, ¾e X nahrávají roz¹íøení DGA, viz v
<filename>/var/log/XFree86.0.log</filename>:

<programlisting>(II) Loading extension XFree86-DGA</programlisting>

XFree86 4.0.x nebo vy¹¹í je <emphasis role="bold">vøele doporuèován</emphasis>!
Video rozhraní DGA <application>MPlayer</application>u je autodetekováno
<filename>./configure</filename>, nebo jej mù¾ete vynutit pomocí
<option>--enable-dga</option>.
</para>
</formalpara>

<para>
Pokud rozhraní nemù¾e pøepnout do men¹ího rozli¹ení, experimentujte s
volbami <option>-vm</option> (pouze s X 3.3.x), <option>-fs</option>,
<option>-bpp</option>, <option>-zoom</option>, abyste nalezli videore¾im, do
kterého se video napasuje. Momentálnì není ¾ádný pøevodník :(
</para>

<para>
Staòte se <systemitem class="username">root</systemitem>em. DGA vy¾aduje
práva roota, aby mohl pøímo zapisovat do video pamìti. Pokud jej chcete
provozovat jako u¾ivatel, pak nainstalujte <application>MPlayer</application>
jako SUID root:

<screen>
chown root <replaceable>/usr/local/bin/mplayer</replaceable>
chmod 750 <replaceable>/usr/local/bin/mplayer</replaceable>
chmod +s <replaceable>/usr/local/bin/mplayer</replaceable>
</screen>

A nyní to bude pracovat také pod obyèejným u¾ivatelem.
</para>

<caution>
<title>Bezpeènostní riziko</title>
<para>
Toto je <emphasis role="bold">velké</emphasis> bezpeènostní riziko!
<emphasis role="bold">Nikdy</emphasis> to nedìlejte na serveru nebo poèítaèi
ke kterému mohou mít pøístup ostatní lidé, jeliko¾ ti mohou získat
superu¾ivatelská práva díky SUID root
<application>MPlayer</application>u.
</para>
</caution>

<para>
Nyní pou¾ijte volbu <option>-vo dga</option> a je to! (doufám:)
Také byste mìli vyzkou¹et, jestli vám pracuje volba
<option>-vo sdl:dga</option>!
Je mnohem rychlej¹í!
</para>


<formalpara id="dga-modelines">
<title>PØEPÍNÁNÍ ROZLI©ENÍ</title>

<para>
Rozhraní DGA umo¾òuje pøepínání rozli¹ení výstupního signálu.
To odstraòuje potøebu (pomalého) softwarového ¹kálování a zároveò
poskytuje obraz na celou obrazovku. Ideálnì by se mìlo pøepnout na pøesné
rozli¹ení (s výjimkou dodr¾ení pomìru stran) video dat, ale X
server umo¾òuje poze pøepínání do rozli¹ení pøeddefinovaných v
<filename>/etc/X11/XF86Config</filename>
(nebo <filename>/etc/X11/XF86Config-4</filename> pro XFree 4.X.X).
Ty jsou definovány takzvanými "modelines" a závisí na
schopnostech va¹eho video hardwaru. X server projí¾dí tento konfiguraèní
soubor pøi startu a zaká¾e re¾imy (modelines) nevhodné pro vá¹ hardware.
Povolené videore¾imy naleznete v X11 log souboru. Tel lze nalézt zde:
<filename>/var/log/XFree86.0.log</filename>.
</para>
</formalpara>

<para>
Tyto vstupy jsou známy dobrou funkcí na Riva128 èipu, s pou¾itím modulu
ovladaèe nv.o X serveru.
</para>


<para><programlisting>
Section "Modes"
  Identifier "Modes[0]"
  Modeline "800x600"  40     800 840 968 1056  600 601 605 628
  Modeline "712x600"  35.0   712 740 850 900   400 410 412 425
  Modeline "640x480"  25.175 640 664 760 800   480 491 493 525
  Modeline "400x300"  20     400 416 480 528   300 301 303 314 Doublescan
  Modeline "352x288"  25.10  352 368 416 432   288 296 290 310
  Modeline "352x240"  15.750 352 368 416 432   240 244 246 262 Doublescan
  Modeline "320x240"  12.588 320 336 384 400   240 245 246 262 Doublescan
EndSection
</programlisting></para>


<formalpara>
<title>DGA &amp; MPLAYER</title>
<para>
DGA je v <application>MPlayer</application>u pou¾ito na dvou místech: SDL
rozhraní mù¾e být nastaveno pro jeho pou¾ití (<option>-vo sdl:dga</option>) a
pøímé DGA rozhraní (<option>-vo dga</option>). Vý¹e uvedené je platné
pro obì varianty; v následující sekci vysvìtlíme jak pracuje DGA rozhraní
<application>MPlayer</application>u.
</para>
</formalpara>


<formalpara>
<title>VLASTNOSTI</title>

<para>
DGA rozhraní je pou¾ito zadáním volby <option>-vo dga</option> na pøíkazovém
øádku. Výchozím chováním je pøepnout na rozli¹ení co nejbi¾¹í originálním
rozmìrùm videa. Zcela zámìrnì se ignorují volby <option>-vm</option> a
<option>-fs</option> (umo¾òující pøepínání videore¾imù a zobrazení na celou
obrazovku) - v¾dy zkou¹í pokrýt tak velkou plochu obrazovky, jak je to jen mo¾né
pomocí pøepnutí videore¾imu, co¾ nás oprostí od vyu¾ívání dal¹ích CPU cyklù
pro ¹kálování obrazu. Pokud se vám nelíbí re¾im, který vybere automatika,
mù¾ete ji pøinutit pro výbìr re¾imu nejblí¾e odpovídajícímu rozli¹ení,
které zadáte pomocí <option>-x</option> a <option>-y</option>.
Pøi zadání volby <option>-v</option>, vypí¹e DGA rozhraní, spolu s dal¹ími
vìcmi, seznam v¹ech rozli¹ení podporovaných va¹im aktuálním
<filename>XF86Config</filename> souborem.
Máte-li DGA2, mù¾ete jej rovnì¾ pøinutit pou¾ít rùzné barevné hloubky pomocí
volby <option>-bpp</option>. Platné barevné hloubky jsou 15, 16, 24 a 32.
To jestli jsou tyto barevné hloubky nativnì podporovány, nebo musí být provedena
(pravdìpodobnì pomalá) konverze závisí na va¹em hardware.
</para>
</formalpara>
<para>
Pokud jste natolik ¹»astlivci, ¾e máte dostatek volné mimoobrazové pamìti,
aby se zde vmìstnal celý obrázek, pou¾ije DGA rozhraní dvojitou vyrovnávací
pamì», co¾ vám zajistí mnohem plynulej¹í pøehrávání filmù. Rozhraní vás bude
informovat jestli je dvojitý buffer zapnutý nebo ne.
</para>

<para>
Dvojitou vyrovnávací pamìtí se rozumí to, ¾e je dal¹í snímek vykreslován do
pamìti mimo zobrazovanou plochu, zatímco je zobrazován aktuální snímek.
Jakmile je dal¹í snímek pøipraven, grafický èip je informován o pozici v pamìti,
kde je nový snímek a jednodu¹e pøesune data k zobrazení odtud.
Mezitím je dal¹í buffer v pamìti zaplòován novými videodaty.
</para>

<para>
Dvojitá vyrovnávací pamì» mù¾e být zapnuta volbou
<option>-double</option> a vypnuta volbou
<option>-nodouble</option>. Souèasná výchozí hodnota je vypnutí dvojité
vyrovnávací pamìti. Pøi pou¾ití DGA rozhraní bude display na obrazovce (OSD)
pracovat pouze pøi zapnuté dvojité vyrovnávací pamìti.
Zapnutí dvojité vyrovnávací pamìti v¹ak mù¾e vyústit velkou ztrátou výkonu
(na mé K6-II+ 525 to pou¾ije dal¹ích 20% CPU výkonu!) v závislosti na
implementaci DGA pro vá¹ hardware.
</para>


<formalpara>
<title>OTÁZKA RYCHLOSTI</title>

<para>
Obecnì by pøístup pøes DGA framebuffer mìl být alespoò tak rychlý jako
pou¾ití rozhraní X11 navíc s celoobrazovkovým re¾imem.
Procentní hodnoty rychlosti vypisované
<application>MPlayer</application>em byste mìli brát s rezervou, jeliko¾
napøíklad pøi pou¾ití X11 nezahrnují èas spotøebovaný X serverem pro
vlastní vykreslování. Zavìste terminál na sériovou linku poèítaèe a
spus»te <command>top</command>, abyste vidìli co se opravdu dìje ve va¹em
poèítaèi.
</para>
</formalpara>

<para>
Obecnì zrychlení pou¾itím DGA oproti 'bì¾nému' X11 velmi závisí na va¹í
grafické kertì a jak dobøe je pro ni optimalizován modul X serveru.
</para>

<para>
Pokud máte pomalý stroj, radìji pou¾ijte 15 nebo 16 bitovou hloubku, jeliko¾
vy¾aduje pouze polovièní prùchodnost pamìti oproti 32 bitovému zobrazení.
</para>

<para>
Pou¾ití hloubky 24 bitù je dobré i v pøípadì, ¾e va¹e karta nativnì podporuje
pouze barevnou hloubku 32 bitù, jeliko¾ se pøená¹í o 25% ménì dat oproti
re¾imu 32/32.
</para>

<para>
Vidìl jsem pár AVI souborù pøehrávat na Pentiu MMX 266. Procesory AMD K6-2
pracují pøi 400 MHZ a vý¹e.
</para>


<formalpara>
<title>ZNÁMÉ CHYBY</title>

<para>
Podle nìkterých vývojáøù XFree je DGA zvìrstvo. Øíkají, abyste je radìji
nepou¾ívali. Jeho implementace není v¾dy bezproblémová v ka¾dém dostupném
ovladaèi pro XFree.
</para>
</formalpara>

<itemizedlist>
<listitem><simpara>
  V XFree 4.0.3 je v <filename>nv.o</filename> chyba vedoucí
  k podivným barvám.
  </simpara></listitem>
<listitem><simpara>
  Ovladaè pro ATI vy¾aduje více ne¾ jedno zpìtné pøepnutí re¾imu po skonèení
  pou¾ívání DGA.
  </simpara></listitem>
<listitem><simpara>
  Nìkteré ovladaèe sel¾ou pøi pøepnutí do normálního rozli¹ení (pou¾ijte
  <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>Keypad +</keycap> a
  <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>Keypad -</keycap>
  pro ruèní pøepnutí).
  </simpara></listitem>
<listitem><simpara>
  Nìkteré ovladaèe zobrazují divné barvy.
  </simpara></listitem>
<listitem><simpara>
  Nìkteré ovladaèe l¾ou o mno¾ství pamìti kterou mapují do adresového prostoru
  procesu, tak¾e vo_dga nepou¾ije dvojitou vyrovnávací pamì» (SIS?).
  </simpara></listitem>
<listitem><simpara>
  Nìkteré ovladaèe nezvládnou ohlásit dokonce ani jeden platný re¾im.
  V tom pøípadì rozhraní DGA spadne s hlá¹kou o nesmaslném re¾imu
  100000x100000 nebo tak.
  </simpara></listitem>
<listitem><simpara>
  OSD pracuje pouze se zapnutou dvojitou vyrovnávací pamìtí (jinak poblikává).
  </simpara></listitem>
</itemizedlist>

</sect2>
<!--</sect1>-->

<!-- ********** -->

<sect2 id="sdl">
<title>SDL</title>

<para>
<acronym>SDL</acronym> (Simple Directmedia Layer) je zjednodu¹enì unifikované
video/audio rozhraní. Programy, které ji pou¾ívají, znají pouze SDL a ne
jaký audio nebo video ovladaè SDL aktuálnì pou¾ívá. Napøíklad klon DOOMa
mù¾e bì¾et na svgalib, aalib, X, fbdev a dal¹ích. Musíte jen nastavit
(napøíklad) video ovladaè pomocí promìnné prostøedí
<envar>SDL_VIDEODRIVER</envar>. Aspoò teoreticky.
</para>

<para>
V <application>MPlayer</application>u pou¾íváme její softwarový ¹kálovaè
ovladaèe X11 pro karty/ovladaèe, které nepodporují XVideo, dokud nevytvoøíme
vlastní (rychlej¹í, hezèí) softwarový ¹kálovaè. Rovnì¾ jsme pou¾ívali její
výstup na aalib, ale nyní máme vlastní, co¾ je mnohem pohodlnìj¹í.
Její DGA re¾im byl a¾ doposud lep¹í ne¾ ná¹. Sledujete? :)
</para>

<para>
Rovnì¾ pomáhá s nìkterými chybnými ovladaèi/kartami, pokud je video roztøesené
(nikoli problém pomalého stroje), nebo se zpo¾ïuje zvuk.
</para>

<para>
SDL video rozhraní podporuje zobrazování titulkù pod filmem, v (pokud je) èerném
okraji.
</para>

<variablelist>
<title>Pro SDL existuje nìkolik voleb pøíkazového øádku:</title>
<varlistentry>
  <term><option>-vo sdl:<replaceable>jméno</replaceable></option></term>
  <listitem><simpara>
    nastavuje pou¾ití SDL video ovladaèe (napø. <literal>aalib</literal>,
    <literal>dga</literal>, <literal>x11</literal>)
  </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-ao sdl:<replaceable>jméno</replaceable></option></term>
  <listitem><simpara>
    nastavuje pou¾ití SDL audio ovladaèe (napø. <literal>dsp</literal>,
    <literal>esd</literal>, <literal>artsc</literal>)
  </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-noxv</option></term>
  <listitem><simpara>
    vypíná hardwarovou akceleraci XVideo
  </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-forcexv</option></term>
  <listitem><simpara>
    zkusí vynutit XVideo akceleraci
  </simpara></listitem>
</varlistentry>
</variablelist>

<table>
<title>Klávesy pouze pro SDL</title>
<tgroup cols="2">
<thead>
<row><entry>Klávesa</entry><entry>Akce</entry></row>
</thead>
<tbody>
<row><entry><keycap>c</keycap></entry><entry>
    cykluje dostupné celoobrazovkové re¾imy
    </entry></row>
<row><entry><keycap>n</keycap></entry><entry>
    zmìní re¾im zpìt na normální
    </entry></row>
</tbody>
</tgroup>
</table>

<itemizedlist>
<title>Známé chyby:</title>
<listitem><simpara>
  Klávesy stisknuté pøi pou¾ití sdl:aalib konzolového ovladaèe se donekoneèna
  opakují. (pou¾ijte <option>-vo aa</option>!) Je to chyba v SDL, já to nezmìním
  (testováno s SDL 1.2.1).
  </simpara></listitem>
<listitem><simpara>
  NEPOU®ÍVEJTE SDL s GUI! Nefunguje to jak by mìlo.
  </simpara></listitem>
</itemizedlist>
</sect2>


<sect2 id="svgalib">
<title>SVGAlib</title>

<formalpara>
<title>INSTALACE</title>
<para>
Budete muset nainstalovat svgalib i s development balíèkem, aby
<application>MPlayer</application> vytvoøil své SVGAlib rozhraní
(autodetekováno, ale nelze vynutit) a nezapomeòte upravit
<filename>/etc/vga/libvga.config</filename> tak, aby odpovídal va¹í kartì a
monitoru.
</para>
</formalpara>

<note>
<para>
Ujistìte se, ¾e nepou¾íváte volbu <option>-fs</option>, jeliko¾ zapíná
pou¾ití softwarového ¹kálování, co¾ je pomalé. Pokud jej opravdu potøebujete,
pou¾ijte volbu <option>-sws 4</option>, co¾ poskytuje ¹patnou kvalitu, ale je
o poznání rychlej¹í.
</para>
</note>

<formalpara><title>PODPORA EGA (4BPP)</title>
<para>
SVGAlib obsahuje EGAlib a <application>MPlayer</application> umí zobrazovat
jakýkoli film v 16 barvách, co¾ je vhodné v následujících konfiguracích:
</para>
</formalpara>

<itemizedlist>
<listitem><simpara>
  EGA karta s EGA monitorem: 320x200x4bpp, 640x200x4bpp, 640x350x4bpp
  </simpara></listitem>
<listitem><simpara>
  EGA karta s CGA monitorem: 320x200x4bpp, 640x200x4bpp
  </simpara></listitem>
</itemizedlist>

<para>
Hodnota bpp (bitù na pixel) musí být nastavena na 4 ruènì:
<option>-bpp 4</option>
</para>

<para>
Obraz bude nejspí¹ muset být zmen¹ený tak, aby se ve¹el v EGA re¾imu:
<screen>-vf scale=640:350</screen>
nebo
<screen>-vf scale=320:200</screen>
</para>

<para>
Kdy¾ potøebujeme rychlou, ale nekvalitní ¹kálovací rutinu:
<screen>-sws 4</screen>
</para>

<para>
Mo¾ná bude muset být vypnuta automatická korekce pomìru stran:
<screen>-noaspect</screen>
</para>

<note><para>
Podle mých zku¹eností lze dosáhnout nejlep¹í kvality obrazu na
EGA obrazovkách mírným sní¾ením jasu:
<option>-vf eq=-20:0</option>. Na svém poèítaèi jsem rovnì¾ musel sní¾it
vzorkovací kmitoèet zvuku, proto¾e zvuk pøí 44kHz byl vadný:
<option>-srate 22050</option>.
</para></note>

<para>
Zapnout OSD a titulky mù¾ete pouze v kombinaci s <option>expand</option>
filtrem, viz man stránka pro pøesné parametry.
</para>
</sect2>


<sect2 id="fbdev">
<title>Výstup na Framebuffer (FBdev)</title>

<para>
Podpora pro cíl FBdev je autodetekována bìhem
<filename>./configure</filename>. Pøeètìte si dokumentaci framebufferu ve
zdrojových kódech kernelu (<filename>Documentation/fb/*</filename>) pro více
informací.
</para>

<para>
Pokud va¹e karta nepodporuje standard VBE 2.0 (star¹í ISA/PCI karty, jako
S3 Trio64), pouze VBE 1.2 (nebo stra¹í?): Nu¾e, stále máte k dispozici VESAfb,
ale budete muset nahrát SciTech Display Doctor (pùvodnì UniVBE) pøed startem
Linuxu. Pou¾ijte bootovací disk DOSu nebo tak. A nezapomìòte si zaregistrovat
svùj UniVBE ;))
</para>

<para>
Výstup FBdev pøijímá nìkolik dodateèných voleb:
</para>

<variablelist>
<varlistentry>
  <term><option>-fb</option></term>
  <listitem><simpara>
    nastaví zaøízení framebufferu k pou¾ití (výchozí: <filename>/dev/fb0</filename>)
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-fbmode</option></term>
  <listitem><simpara>
    název re¾imu k pou¾ití (podle <filename>/etc/fb.modes</filename>)
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-fbmodeconfig</option></term>
  <listitem><simpara>
    config soubor re¾imù (výchozí: <filename>/etc/fb.modes</filename>)
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-monitor-hfreq</option></term>
  <term><option>-monitor-vfreq</option></term>
  <term><option>-monitor-dotclock</option></term>
  <listitem><simpara>
    <emphasis role="bold">dùle¾ité</emphasis> hodnoty, viz
    <filename>example.conf</filename>
    </simpara></listitem>
</varlistentry>
</variablelist>

<para>
Pokud se chcete pøepnout do urèitého re¾imu, pak pou¾ijte
<screen>
mplayer -vm -fbmode <replaceable>name_of_mode</replaceable> <replaceable>soubor</replaceable>
</screen>
</para>

<itemizedlist>
<listitem><para>
  <option>-vm</option> samotná zvolí nejpøíhodnìj¹í re¾im z
  <filename>/etc/fb.modes</filename>. Mù¾e být rovnì¾ pou¾ita spolu s volbami
  <option>-x</option> a <option>-y</option>. Volba
  <option>-flip</option> je podporována pouze pokud pixelový formát filmu
  odpovídá pixelovému formátu videore¾imu. Vìnujte pozornost hodnotì bpp.
  Ovladaè fbdev zkusí pou¾ít aktuální, nebo pokud zadáte volbu
  <option>-bpp</option>, pak tuto.
  </para></listitem>
<listitem><para>
  Volba <option>-zoom</option> není podporována (pou¾ijte <option>-vf scale</option>).
  Nelze pou¾ít re¾imy 8bpp (nebo ni¾¹í).
  </para></listitem>
<listitem><para>
  Pravdìpodobnì budete chtít vypnout kursor:
  <screen>echo -e '\033[?25l'</screen>
  nebo
  <screen>setterm -cursor off</screen>
  a spoøiè obrazovky:
  <screen>setterm -blank 0</screen>
  Pro opìtovné zapnutí kursoru:
  <screen>echo -e '\033[?25h'</screen>
  nebo
  <screen>setterm -cursor on</screen>
  </para></listitem>
</itemizedlist>

<note>
<para>
Zmìna videore¾imu FBdev <emphasis>nepracuje</emphasis> ve VESA
framebufferu a nechtìjte to po nás, jeliko¾ to není omezení
<application>MPlayer</application>u.
</para>
</note>
</sect2>


<sect2 id="mga_vid">
<title>Matrox framebuffer (mga_vid)</title>

<para>
Tato sekce je o podpoøe Matrox G200/G400/G450/G550 BES (Back-End Scaler)
jaderného modulu <systemitem>mga_vid</systemitem>.
Má hardwarovou podporu VSYNC s trojitou vyrovnávací pamìtí.
Pracuje jak v konzoli, tak pod X.
</para>

<warning>
<para>
Toto je pouze pro Linux! Na ne-Linuxech (testováno na FreeBSD) mù¾ete místo nìj
pou¾ít <link linkend="vidix">VIDIX</link>.
</para>
</warning>

<procedure>
<title>Instalace:</title>
<step><para>
  Pokud jej chcete pou¾ít, nejdøíve musíte sestavit
  <filename>mga_vid.o</filename>:
  <screen>
cd drivers
make<!--
--></screen>
  </para></step>
<step><para>
  Pak vytvoøte zaøízení <filename>/dev/mga_vid</filename>:
  <screen>mknod /dev/mga_vid c 178 0</screen>
  a nahrajte ovladaè pomocí
  <screen>insmod mga_vid.o</screen>
  </para></step>
<step><para>
  Mìli byste ovìøit velikost detekované pamìti pomocí pøíkazu
  <command>dmesg</command>. Pokud je ¹patná, pou¾ijte volbu
  <option>mga_ram_size</option>
  (nejdøív <command>rmmod mga_vid</command>),
  nastavte velikost pamìti karty v MB:
  <screen>insmod mga_vid.o mga_ram_size=16</screen>
  </para></step>
<step><para>
  Aby se nahrával/odstraòoval automaticky podle potøeby, nejdøíve pøidejte
  následující øádek na konec <filename>/etc/modules.conf</filename>:

  <programlisting>alias char-major-178 mga_vid</programlisting>

  Pak zkopírujte modul <filename>mga_vid.o</filename> na vhodné místo
  pod <filename>/lib/modules/<replaceable>verze jádra
  </replaceable>/<replaceable>nìkde</replaceable></filename>.
  </para><para>
  Pak spus»te
  <screen>depmod -a</screen>
  </para></step>
<step><para>
  Teï budete muset (pøe)kompilovat <application>MPlayer</application>,
  <filename>./configure</filename> zdetekuje
  <filename>/dev/mga_vid</filename> a zakompiluje 'mga' rozhraní.
  V <application>MPlayer</application>u se pou¾ívá pomocí <option>-vo mga</option>
  pokud máte matroxfb konzoli, nebo <option>-vo xmga</option> pod XFree86
  3.x.x nebo 4.x.x.
  </para></step>
</procedure>

<para>
Ovladaè mga_vid spolupracuje s Xv.
</para>

<para>
Urèité informace lze pøeèíst z <filename>/dev/mga_vid</filename> zaøízení,
napøíklad pomocí
<screen>cat /dev/mga_vid</screen>
a mù¾e do nìj být zapsána zmìna jasu:
<screen>echo "brightness=120" &gt; /dev/mga_vid</screen>
</para>
</sect2>


<sect2 id="tdfxfb" xreflabel="3Dfx YUV support (tdfxfb)">
<title>Podpora 3Dfx YUV</title>
<para>
Tento ovladaè pou¾ívá ovladaè framebufferu tdfx z jádra pro pøehrávání
filmù s YUV akcelerací. Budete potøebovat jádro s podporou tdfxfb a
rekompilovat s
<screen>./configure --enable-tdfxfb</screen>
</para>
</sect2>


<sect2 id="opengl">
<title>Rozhraní OpenGL</title>

<para>
<application>MPlayer</application> podporuje zobrazování filmù pomocí OpenGL,
ale pokud va¹e platforma/ovladaè podporuje xv co¾ by mìl být pøípad PC s
Linuxem, pou¾ijte radìji xv, jeliko¾ výkon OpenGL je o poznání hor¹í.
Pokud máte X11 implementaci bez podpory xv, je OpenGL slu¹ná alternativa.
</para>

<para>
Nane¹tìstí ne v¹echny ovladaèe tuto vlastnost podporují. Ovladaèe Utah-GLX
(pro XFree86 3.3.6) ji podporují pro v¹echny karty.
Viz <ulink url="http://utah-glx.sf.net"/> pro detaily jak je nainstalovat.
</para>

<para>
XFree86(DRI) 4.0.3 nebo pozdìj¹í podporují OpenGL s kartami Matrox a Radeon,
4.2.0 a pozdìj¹í podporují Rage128.
Viz <ulink url="http://dri.sf.net"/> pro sta¾ení a instalaèní instrukce.
</para>

<para>
Rada od jednoho z u¾ivatelù: GL video výstup lze pou¾ít pro dosa¾ení
vertikálnì synchronizovaného TV výstupu. Budete muset nastavit promìnnou
prostøedí (aspoò na nVidii):
</para>

<para>
<command>export $__GL_SYNC_TO_VBLANK=1</command>
</para>

</sect2>


<sect2 id="aalib">
<title>AAlib - zobrazování v textovém re¾imu</title>

<para>
AAlib je knihovna pro zobrazování grafiky v textovém re¾imu pomocí výkonného
ASCII renderovaèe. Existuje <emphasis>spousta</emphasis> programù, ktaré ji ji¾
podporují, jako DOOM, Quake, atd. <application>MPlayer</application>
pro ni obsahuje ¹ikovné rozhraní. Pokud <filename>./configure</filename>
zjistí nainstalovanou aalib, sestaví se aalib libvo rozhraní.
</para>

<para>
Mù¾ete pou¾ít nìkteré klávesy v AA oknì pro zmìnu renderovacích voleb:
</para>

<informaltable>
<tgroup cols="2">
<thead>
  <row><entry>Klávesa</entry><entry>Akce</entry></row>
</thead>
<tbody>
<row><entry><keycap>1</keycap></entry><entry>
  sní¾í kontrast
  </entry></row>
<row><entry><keycap>2</keycap></entry><entry>
  zvý¹í kontrast
  </entry></row>
<row><entry><keycap>3</keycap></entry><entry>
  sní¾í jas
  </entry></row>
<row><entry><keycap>4</keycap></entry><entry>
  zvý¹í jas
  </entry></row>
<row><entry><keycap>5</keycap></entry><entry>
  vypíná/zapíná rychlé renderování
  </entry></row>
<row><entry><keycap>6</keycap></entry><entry>
  nastaví rozhodovací re¾im (¾ádný, error distribution, Floyd Steinberg)
  </entry></row>
<row><entry><keycap>7</keycap></entry><entry>
  inverze obrazu
  </entry></row>
<row><entry><keycap>8</keycap></entry><entry>
  pøepíná mezi ovládáním aa a <application>MPlayer</application>u
  </entry></row>
</tbody>
</tgroup>
</informaltable>

<variablelist>
<title>Mù¾ete pou¾ít následující volby pøíkazového øádku:</title>
<varlistentry>
  <term><option>-aaosdcolor=<replaceable>V</replaceable></option></term>
  <listitem><para>
    zmìna barvy OSD
    </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aasubcolor=<replaceable>V</replaceable></option></term>
  <listitem><para>
    zmìna barvy titulkù
    </para><para>
    kde <replaceable>V</replaceable> mù¾e být:
    <literal>0</literal> (normální),
    <literal>1</literal> (tmavé),
    <literal>2</literal> (tuèné),
    <literal>3</literal> (polotuèný font),
    <literal>4</literal> (reverz),
    <literal>5</literal> (speciální).
    </para></listitem>
</varlistentry>
</variablelist>

<variablelist>
<title>AAlib samotná poskytuje velké mno¾ství voleb. Zde je nìkolik
dùle¾itých:</title>
<varlistentry>
  <term><option>-aadriver</option></term>
  <listitem><simpara>
    Nastaví doporuèený aa ovladaè (X11, curses, Linux).
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aaextended</option></term>
  <listitem><simpara>
    Pou¾ití v¹ech 256 znakù.
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aaeight</option></term>
  <listitem><simpara>
    Pou¾ití osmibitového ASCII.
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aahelp</option></term>
  <listitem><simpara>
    Vypí¹e v¹echny aalib volby.
    </simpara></listitem>
</varlistentry>
</variablelist>

<note>
<para>
Renderování je velmi nároèné na CPU, zvlá¹» pøi pou¾ití AA-na-X
(aalib na X) a nejménì nároèné je na standardní neframebuferované
konzoli. Pou¾ijte SVGATextMode pro nastavení velkého textového re¾imu
a u¾ijte si! (secondary head Hercules cards rock :)) (ale IMHO mù¾ete pou¾ít
volbu <option>-vf 1bpp</option> pro grafiku na hgafb:)
</para>
</note>

<para>
Pou¾ijte volbu <option>-framedrop</option>, pokud vá¹ poèítaè není dostateènì
rychlý pro renderování v¹ech snímkù!
</para>

<para>
Pøi pøehrávání na terminálu dosáhnete lep¹í rychlosti i kvality pou¾itím
ovladaèe Linux, bez curses (<option>-aadriver linux</option>). Ale pak budete
potøebovat práva k zápisu do
<filename>/dev/vcsa<replaceable>&lt;terminal&gt;</replaceable></filename>!
Aalib to nedetekuje, ale vo_aa zkou¹í najít nejlep¹í re¾im.
Pro více ladících mo¾ností viz <ulink url="http://aa-project.sf.net/tune"/>.
</para>
</sect2>


<sect2 id="caca">
<title><systemitem class="library">libcaca</systemitem> - Barevná ASCII Art knihovna</title>

<para>
Knihovna <ulink url="http://sam.zoy.org/projects/libcaca/"><systemitem class="library">libcaca</systemitem></ulink>
je grafická knihovna produkující text místo pixelù, tak¾e mù¾e fungovat na
star¹ích video kartách a textových terminálech. Není nepodobná známé knihovnì
<systemitem class="library">AAlib</systemitem>.
<systemitem class="library">libcaca</systemitem> vy¾aduje k èinnosti terminál,
tak¾e by mìla fungovat na v¹ech Unixových systémech (vèetnì Mac OS X) pomocí buï
knihovny <systemitem class="library">slang</systemitem> nebo knihovny
<systemitem class="library">ncurses</systemitem>, pod DOSem pomocí knihovny
<systemitem class="library">conio.h</systemitem> a na systémech Windows
pomocí buï <systemitem class="library">slang</systemitem> nebo
<systemitem class="library">ncurses</systemitem> (pomocí emulace Cygwin) nebo
<systemitem class="library">conio.h</systemitem>. Pokud
<filename>./configure</filename>
detekuje <systemitem class="library">libcaca</systemitem>, bude sestaveno
rozhraní caca libvo.
</para>

<itemizedlist>
<title>Odli¹nosti od <systemitem class="library">AAlib</systemitem> jsou:</title>
<listitem><simpara>
   16 dostupných barev pro znakový výstup (256 barev pro pár)
  </simpara></listitem>
<listitem><simpara>
   rozhodování podle barev v obrázku
  </simpara></listitem>
</itemizedlist>

<itemizedlist>
<title>Ale <systemitem class="library">libcaca</systemitem> má také následující
  omezení:</title>
<listitem><simpara>
   nemá podpora pro jas, kontrast a gamu
  </simpara></listitem>
</itemizedlist>

<para>
V caca oknì mù¾ete pou¾ít nìkteré klávesy pro zmìnu renderovacích volby:
</para>

<informaltable>
<tgroup cols="2">
<thead>
  <row><entry>Klávesa</entry><entry>Akce</entry></row>
</thead>
<tbody>
<row><entry><keycap>d</keycap></entry><entry>
  Pøepíná metody rozhodování v <systemitem class="library">libcaca</systemitem>.
  </entry></row>
<row><entry><keycap>a</keycap></entry><entry>
  Pøepíná vyhlazování v <systemitem class="library">libcaca</systemitem>.
  </entry></row>
<row><entry><keycap>b</keycap></entry><entry>
  Pøepíná pozadí v <systemitem class="library">libcaca</systemitem>.
  </entry></row>
</tbody>
</tgroup>
</informaltable>

<variablelist>
<title><systemitem class="library">libcaca</systemitem> také respektuje nìkteré
   promìnné prostøedí:</title>
<varlistentry>
  <term><option>CACA_DRIVER</option></term>
  <listitem><simpara>
    Nastaví doporuèený caca ovladaè, jako ncurses, slang, x11.
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>CACA_GEOMETRY (pouze X11)</option></term>
  <listitem><simpara>
    Nastaví poèet øad a sloupcù. Napø. 128x50.
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>CACA_FONT (pouze X11)</option></term>
  <listitem><simpara>
    Nastaví pou¾itý font. Napø. fixed, nexus.
    </simpara></listitem>
</varlistentry>
</variablelist>

<para>
Pou¾ijte volbu <option>-framedrop</option>, pokud vá¹ poèítaè není dost rychlý
pro renderování v¹ech snímkù.
</para>

</sect2>


<sect2 id="vesa">
<title>VESA - výstup do VESA BIOSu</title>

<para>
Tento ovladaè byl navr¾en a pøedstaven jako <emphasis role="bold">obecný
ovladaè</emphasis> pro jakoukoli video kartu, která má VESA VBE 2.0 kompatibilní
BIOS. Dal¹í výhodou tohoto ovladaèe je, ¾e zkou¹í vynutit zapnutí výstupu na TV.
<citetitle>VESA BIOS EXTENSION (VBE) Version 3.0 Date: September 16,
1998</citetitle> (Strana 70) uvádí:
</para>

<blockquote>
<formalpara><title>Karty Dual-Controller</title>
<para>
VBE 3.0 podporuje karty s dual-controllerem za pøedpokladu ¾e, jeliko¾ jsou
typicky oba controllery vybaveny stejným OEM a nastavovány jedinou
BIOS ROM na stejné grafické kartì, je mo¾né skrýt pøed aplikací pøítomnost
dvou controllerù. To omezuje nezávislé pou¾ití jednotlivých controllerù,
ale umo¾òuje aplikacím vydaným pøed VBE 3.0 pracovat normálnì.
VBE funkce 00h (Návrat informací o controlleru) vrací kombinované informace
obou conrollerù, vèetnì kombinovaného seznamu platných re¾imù.
Pøíslu¹ný controller je aktivován jakmile aplikace vybere re¾im. V¹echny
ostatní VBE funkce pak pracují s aktivním controllerem.
</para>
</formalpara>
</blockquote>

<para>
Máte tedy mo¾nost s tímto rozhraním dostat funkèní TV výstup.
(Soudím ¾e TV výstup má velmi èasto samostatnou jednotku, nebo aspoò samostatný
výstup.)
</para>

<itemizedlist spacing="compact">
<title>VÝHODY</title>
<listitem><simpara>
  Máte ¹anci sledovat video <emphasis role="bold">dokonce i kdy¾ Linux nezná
  </emphasis> vá¹ video hardware.
  </simpara></listitem>
<listitem><simpara>
  Nepotøebujete mít ve svém Linuxu nainstalovány ¾ádné vìci související s
  grafikou (jako X11 (alias XFree86), fbdev atd). Toto rozhraní lze provozovat
  z <emphasis role="bold">textového re¾imu</emphasis>.
  </simpara></listitem>
<listitem><simpara>
  Máte ¹anci získat <emphasis role="bold">funkèní TV-out</emphasis>.
  (Je to pravda minimálnì s kartami ATI).
  </simpara></listitem>
<listitem><simpara>
  Toto rozhraní volá <function>int 10h</function> handler, tak¾e není
  emulátorem &ndash; volá <emphasis role="bold">skuteèné</emphasis> vìci
  <emphasis>skuteèného</emphasis> BIOSu v <emphasis>reálném re¾imu</emphasis>
  (ve skuteènosti v re¾imu vm86).
  </simpara></listitem>
<listitem><simpara>
  Mù¾ete s ním pou¾ít VIDIX, tak¾e dostanete akcelerované video
  <emphasis role="bold">a</emphasis> TV výstup souèasnì!
  (Doporuèeno pro karty ATI.)
  </simpara></listitem>
<listitem><simpara>
  Máte-li VESA VBE 3.0+ a nastavili jste si nìkde
  <option>monitor-hfreq, monitor-vfreq, monitor-dotclock</option>
  (config soubor nebo pøíkazový øádek) dostanete nejvy¹¹í mo¾ný obnovovací
  kmitoèet. (Using General Timing Formula). Abyste této funkce dosáhli, musíte
  nastavit <emphasis role="bold">v¹echna</emphasis> nastavení monitoru.
  </simpara></listitem>
</itemizedlist>

<itemizedlist spacing="compact">
<title>NEVÝHODY</title>
<listitem><simpara>
   Pracuje pouze na <emphasis role="bold">systémech x86</emphasis>.
  </simpara></listitem>
<listitem><simpara>
  Mù¾e to pou¾ít pouze <systemitem class="username">root</systemitem>.
  </simpara></listitem>
<listitem><simpara>
  Zatím je dostupné pouze pro <emphasis role="bold">Linux</emphasis>.
  </simpara></listitem>
</itemizedlist>

<important>
<para>
Nepou¾ívejte toto rozhraní s <emphasis role="bold">GCC 2.96</emphasis>!
Nefunguje!
</para>
</important>

<variablelist>
<title>VOLBY PØÍKAZOVÉHO ØÁDKU DOSTUPNÉ PRO VESA</title>
<varlistentry>
  <term><option>-vo vesa:<replaceable>volby</replaceable></option></term>
  <listitem><simpara>
    zatím dostupné: <literal>dga</literal> pro vynucení dga re¾imu a
    <literal>nodga</literal> pro jeho potlaèení. V re¾imu dga mù¾ete zapnout
    dvojitou vyrovnávací pamì» pomocí volby <option>-double</option>.
    Poznámka: Tyto volby mù¾ete vynechat, abyste zapli
    <emphasis role="bold">autodetekci</emphasis> dga re¾imu.
    </simpara></listitem>
</varlistentry>
</variablelist>

<itemizedlist spacing="compact">
<title>ZNÁMÉ PROBLÉMY A KLIÈKY</title>
<listitem><simpara>
  Pokud máte nainstalován <emphasis role="bold">NLS</emphasis> font v
  Linuxové konzoli a pou¾ijete VESA rozhraní v textovém re¾imu, pak po
  ukonèení <application>MPlayer</application>u budete mít nahrán
  <emphasis role="bold">ROM font</emphasis> místo národního.
  Mù¾ete si opìt nahrát národní font napøíklad pomocí utility
  <command>setsysfont</command> z distribuce Mandrake/Mandriva.
  (<emphasis role="bold">Tip</emphasis>: Stejná utilita je pou¾ita pro
  lokalizaci fbdev).
  </simpara></listitem>
<listitem><simpara>
  Nìkteré <emphasis role="bold">Linuxové grafické ovladaèe</emphasis> neobnovují
  aktivní <emphasis role="bold">re¾im BIOSu</emphasis> v DOSové pamìti.
  Tak¾e pokud máte tento problém &ndash; v¾dy pou¾ívejte VESA rozhraní pouze v
  <emphasis role="bold">textovém re¾imu</emphasis>. Jinak bude pøesto aktivován
  textový re¾im (#03) a budete muset restartovat poèítaè.
  </simpara></listitem>
<listitem><simpara>
  Èasto po ukonèení VESA rozhraní dostanete <emphasis role="bold">èernou</emphasis>
  obrazovku. Chcete-li vrátit obraz do pùvodního stavu &ndash; jednodu¹e se
  pøepnìte do jiné konzole (stiskem <keycap>Alt</keycap>+<keycap>F&lt;x&gt;</keycap>)
  a pak se pøepnìte zpìt stejným zpùsobem.
  </simpara></listitem>
<listitem><simpara>
  Chcete-li <emphasis role="bold">funkèní TV-out</emphasis>, musíte mít
  pøipojený TV konektor pøed startem poèítaèe, jeliko¾ se video BIOS
  inicializuje pouze jednou bìhem POST procedury.
  </simpara></listitem>
</itemizedlist>
</sect2>


<sect2 id="x11">
<title>X11</title>

<para>
Pokud mo¾no se mu vyhnìte. Posílá obraz do X11 (pou¾ívá roz¹íøení sdílená pamì»)
bez jakékoli hardwarové akcelerace. Podporuje (MMX/3DNow/SSE akcelerované, ale
pøesto pomalé) softwarové ¹kálování. Pou¾ijte volby <option>-fs -zoom</option>.
Vìt¹ina karet má hardwarovou podporu ¹kálování, pou¾ijte pro nì volbu
<option>-vo xv</option>, nebo <option>-vo xmga</option> pro karty Matrox.
</para>

<para>
Problém je, ¾e vìt¹ina karet nepodporuje hardwarovou akceleraci na sekundárním
výstupu/TV. V tìchto pøípadech uvidíte místo filmu zelenou/modrou obrazovku.
Teï se hodí toto rozhraní, ale potøebujete silný procesor pro pou¾ití
softwarového ¹kálování. Nepou¾ívejte SDL softwarový výstup a ¹kálování, má hor¹í
kvalitu obrazu!
</para>

<para>
Softwarové ¹kálování je velmi pomalé, zkuste radìji mìnit videore¾imy.
Je to jednoduché. Viz <link linkend="dga-modelines">modelines v DGA sekci</link>
a pøidejte je do svého <filename>XF86Config</filename>.

<itemizedlist spacing="compact">
<listitem><simpara>
  Máte-li XFree86 4.x.x: pou¾ijte volbu <option>-vm</option>. Ta zmìní
  rozli¹ení tak, aby do nìj film dobøe ve¹el. Kdy¾ ne:
  </simpara></listitem>
<listitem><simpara>
  S XFree86 3.x.x: musíte cyklovat dostupnými rozli¹eními pomocí tlaèítek
  <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>plus</keycap>
  a
  <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>minus</keycap>.
  </simpara></listitem>
</itemizedlist>
</para>

<para>
Pokud nemù¾ete najír rozli¹ení, která jste vlo¾ili, proètìte si výstup XFree86.
Nìkteré ovladaèe nezvládnou nízké bodové kmitoèty potøebné pro re¾imy s nízkým
rozli¹ením videa.
</para>
</sect2>


<sect2 id="vidix">
<title>VIDIX</title>

<formalpara>
<title>PØEDMLUVA</title>
<para>
<acronym>VIDIX</acronym> je zkratka pro <emphasis role="bold">VID</emphasis>eo
<emphasis role="bold">I</emphasis>nterface for *ni<emphasis role="bold">X</emphasis>
(video rozhraní pro *nix).
VIDIX bylo navr¾eno a pøedstaveno jako rozhraní pro rychlé u¾ivatelské ovladaèe
dosahujících video výkonu jako dosahuje mga_vid na kartách Matrox. Je rovnì¾
dobøe pøenositelné.
</para>
</formalpara>
<para>
Toto rozhraní bylo navr¾eno jako pokus napasovat existující video akcelerující
rozhraní (známé jako mga_vid, rage128_vid, radeon_vid, pm3_vid) do pevného
schéma. Poskytuje vysokoúrovòové rozhraní k èipùm známým jako BES
(BackEnd scalers) nebo OV (Video Overlays). Neposkytuje nízkoúrovòové rozhraní
k vìcem známým jako grafické servery.
(Nechci konkurovat X11 týmu v pøepínání grafických re¾imù). Èili hlavním cílem
tohoto rozhraní je maximalizace rychlosti pøehrávání videa.
</para>

<itemizedlist spacing="compact">
<title>POU®ITÍ</title>
<listitem><simpara>
  Mù¾ete pou¾ít samostatné video rozhraní: <option>-vo xvidix</option>.
  Toto rozhraní bylo vytvoøeno jako front end X11 k technologii VIDIX.
  Vy¾aduje X server a mù¾e pracovat pouze pod X serverem. Poznamenejme, ¾e
  jeliko¾ pøímo komunikuje s hardwarem a obchází X ovladaè, pixmapy ulo¾ené
  v pamìti grafické karty mù¾ou být po¹kozeny. Mù¾ete se tomu vyhnout omezením
  mno¾ství video pamìti pou¾ité X pomocí volby "VideoRam" v XF86Config o 4MB.
  Pokud máte ménì ne¾ 8MB video ram, mù¾ete místo toho pou¾ít volbu
  "XaaNoPixmapCache" v sekci screen.
  </simpara></listitem>
<listitem><simpara>
  Existuje konzolové VIDIX rozhraní: <option>-vo cvidix</option>.
  To vy¾aduje pro vìt¹inu karet funkèní inicializovaný framebuffer (jinak pouze
  rozhodíte obrazovku) a dosáhnete podobného efektu jako s
  <option>-vo mga</option> nebo <option>-vo fbdev</option>. nVidia karty v¹ak
  jsou schopny zobrazit plnì grafické video na reálné textové konzoli. Viz
  sekci <link linkend="vidix-nvidia">nvidia_vid</link> pro více informací.
  </simpara></listitem>
<listitem><simpara>
  Mù¾ete pou¾ít VIDIXové podzaøízení, které bylo zabudováno do nìkolika video
  ovladaèù, napøíklad: <option>-vo vesa:vidix</option>
  (<emphasis role="bold">pouze Linux</emphasis>) a
  <option>-vo fbdev:vidix</option>.
  </simpara></listitem>
</itemizedlist>

<para>
Nezále¾í na tom, které video výstupní rozhraní je pou¾ito s
<emphasis role="bold">VIDIX</emphasis>.
</para>

<itemizedlist spacing="compact">
<title>PO®ADAVKY</title>
<listitem><simpara>
  Video karta by mìla být v grafickém re¾imu (vyjma karet nVidia s výstupním
  rozhraním <option>-vo cvidix</option>).
  </simpara></listitem>
<listitem><simpara>
  Výstupní video rozhraní <application>MPlayer</application>u by mìlo znát
  aktivní video re¾im a být schopno sdìlit VIDIXovému podzaøízení nìkteré video
  charakteristiky serveru.
  </simpara></listitem>
</itemizedlist>

<formalpara>
<title>METODY POU®ITÍ</title>
<para>
Kdy¾ pou¾ijete VIDIX jako <emphasis role="bold">subdevice</emphasis>
(<option>-vo vesa:vidix</option>), pak je konfigurace video re¾imu je provedeno
výstupním video rozhraním (zkrátka <emphasis role="bold">vo_server</emphasis>em).
Tak¾e mù¾ete zadat na pøíkazovém øádku <application>MPlayer</application>u
stejné volby jako pro vo_server. Návdavkem rozeznává volbu
<option>-double</option> jako globální parametr. (Doporuèuji pou¾ít tuto volbu
s VIDIX aspoò pro ATI kartu). Stejnì jako <option>-vo xvidix</option>, dosud
zná následující volby: <option>-fs -zoom -x -y -double</option>.
</para>
</formalpara>
<para>
Rovnì¾ mù¾ete uvést VIDIXový ovladaè jako tøetí podvolbu na pøíkazovém øádku:

<screen>mplayer -vo xvidix:mga_vid.so -fs -zoom -double <replaceable>soubor.avi</replaceable></screen>
nebo
<screen>mplayer -vo vesa:vidix:radeon_vid.so -fs -zoom -double -bpp 32 <replaceable>soubor.avi</replaceable></screen>

Ale je to nebezpeèné a nemìli byste to dìlat. V tomto pøípadì bude zadaný
ovladaè vynucen a výsledek je nepøedvídatelný (mù¾e vám
<emphasis role="bold">zatuhnout</emphasis> poèítaè). Mìli byste to pou¾ít
POUZE pokud jste si absolutnì jistí, ¾e to bude fungovat a
<application>MPlayer</application> to neudìlá automaticky. Øeknìte o tom prosím
vývojáøùm. Správný zpùsob je pou¾ití VIDIX bez argumentù, aby probìhla
autodetekce.
</para>

<para>
Jeliko¾ VIDIX vy¾aduje pøímý pøístup k hardware, mù¾ete jej buï spustit jako
root, nebo nastavit SETUID bit binárce <application>MPlayer</application>u
(<emphasis role="bold">Varování: Toto je bezpeènostní risk!</emphasis>).
Alternativnì mù¾ete pou¾ít speciální jaderný modul, napøíklad:
</para>

<procedure>
<step><para>
  Stáhnìte si <ulink url="http://www.arava.co.il/matan/svgalib/">vývojovou verzi</ulink>
  svgalib (napøíklad 1.9.17), <emphasis role="bold">NEBO</emphasis> si
  stáhnìte verzi vatvoøenou Alexem speciálnì pro pou¾ití s
  <application>MPlayer</application>em (ke kompilaci nepotøebuje zdrojový kód
  svgalib)
  <ulink url="http://www.mplayerhq.hu/MPlayer/contrib/svgalib/svgalib_helper-1.9.17-mplayer.tar.bz2">odtud</ulink>.
  </para></step>
<step><para>
  Skompilujte modul v adresáøi <filename class="directory">svgalib_helper</filename>
  (naleznete ji v <filename class="directory">svgalib-1.9.17/kernel/</filename>,
  pokud jste si stáhli zdrojový kód ze serveru svgalib) a nahrajte (insmod) jej.
  </para></step>
<step><para>
  Pro vytvoøení potøebných zaøízení v adresáøi
  <filename class="directory">/dev</filename> proveïte jako root
  <screen>make device</screen> v adresáøi
  <filename class="directory">svgalib_helper</filename>.
  </para></step>
<step><para>
  Pøesuòte adresáø <filename class="directory">svgalib_helper</filename> do
  <filename class="directory">mplayer/main/libdha/svgalib_helper</filename>.
  </para></step>
<step><para>
  Pokud jste si stáhli zdroj ze stránek svgalib, musíte odkomentovat øádek
  CFLAGS obsahující text "svgalib_helper" v souboru
  <filename class="directory">libdha/Makefile</filename>.
  </para></step>
<step><para>
  Pøekompilujte a nainstalujte libdha.
  </para></step>
</procedure>

<sect3 id="vidix-ati">
<title>Karty ATI</title>
<para>
V souèasnosti je vìt¹ina ATI karet podporována nativnì od Mach64 a¾ po
nejnovìj¹í Radeony.
</para>

<para>
Existují dvì skompilované binárky: <filename>radeon_vid</filename> pro Radeony a
<filename>rage128_vid</filename> pro karty Rage 128. Mù¾ete nìkterou vynutit,
 nebo nechat VIDIX rozhraní autodetekovat v¹echny dostupné ovladaèe.
</para>
</sect3>

<sect3 id="vidix-mga">
<title>Karty Matrox</title>
<para>
Matrox G200, G400, G450 a G550 jsou hlá¹eny jako funkèní.
</para>

<para>
Ovladaè podporuje video ekvalizéry a mìl by být témìø tak rychlý jako
<link linkend="mga_vid">Matrox framebuffer</link>
</para>
</sect3>

<sect3 id="vidix-trident">
<title>Karty Trident</title>
<para>
Existuje ovladaè pro èipset Trident Cyberblade/i1, který lze nalézt na
motherboardech VIA Epia.
</para>

<para>
Ovladaè byl napsán a je udr¾ován
<ulink url="http://www.blackfiveservices.co.uk/EPIAVidix.shtml">Alastairem M. Robinsonem</ulink>
</para>
</sect3>

<sect3 id="vidix-3dlabs">
<title>Karty 3DLabs</title>
<para>
Aèkoli existuje ovladaè pro èipy 3DLabs GLINT R3 a Permedia3, nikdo je
netestoval, tak¾e hlá¹ení vítáme.
</para>
</sect3>

<sect3 id="vidix-nvidia">
<title>Karty nVidia</title>
<para>
  Unikátní vlastností ovladaèe nvidia_vid je jeho schopnost zobrazit video na
  <emphasis role="bold">jednoduché, èisté, pouze textové konzoli</emphasis>
  &ndash; bez framebufferu nebo nìjaké X magie. Pro tento úèel budete muset
  pou¾ít video rozhraní <option>cvidix</option>, jak to ukazuje následující
  pøíklad:
  <screen>mplayer -vo cvidix <replaceable>pøíklad.avi</replaceable></screen>
</para>

</sect3>

<sect3 id="vidix-sis">
<title>Karty SiS</title>
<para>
Toto je velmi experimentální kód, stejnì jako nvidia_vid.
</para>

<para>
Byl testován na SiS 650/651/740 (nejobvyklej¹í èipsety pou¾ité v SiS
verzích "Shuttle XPC" barebones boxes out there)
</para>

<para>
Hlá¹ení oèekávána!
</para>
</sect3>
</sect2>

<sect2 id="directfb">
<title>DirectFB</title>
<blockquote><para>
&quot;DirectFB je grafická knihovna navr¾ená se zøetelem na vestavìné systémy.
Nabízí maximálnì hardwarovì akcelerovaný výkon pøi minimální spotøebì
zdrojù a zatí¾ení.&quot; &ndash; citováno z <ulink url="http://www.directfb.org"/>
</para></blockquote>

<para>Vlastnosti DirectFB v této sekci vynechám.</para>

<para>

Aèkoli <application>MPlayer</application> není podporován jako &quot;video
provider&quot; v DirectFB, toto video rozhraní umo¾ní pøehrávání videa pøes
DirectFB. Bude to samozøejmì akcelerované. Na mém Matroxu G400 byla rychlost
DirectFB stejná jako XVideo.
</para>

<para>
V¾dy se sna¾te pou¾ívat nejnovìj¹í verzi DirectFB. Mù¾ete nastavovat volby pro
DirectFB na pøíkazovém øádku pomocí volby <option>-dfbopts</option>. Volbu
vrstvy lze provést metodou podzaøízení, napø.: <option>-vo directfb:2</option>
(výchozí je vrstva -1: autodetekce)
</para>
</sect2>

<sect2 id="dfbmga">
<title>DirectFB/Matrox (dfbmga)</title>
<para>
Pøeètìte si prosím <link linkend="directfb">hlavní DirectFB</link> sekci pro
obecné informaci.
</para>

<para>
Toto video výstupní zaøízení zapne CRTC2 (na sekundárním výstupu) na kartách
Matrox G400/G450/G550, tak¾e zobrazuje video
<emphasis role="bold">nezávisle</emphasis> na hlavním výstupu.
</para>

<para>
Ville Syrjala's má
<ulink url="http://www.sci.fi/~syrjala/directfb/Matrox_TV-out_README.txt">README</ulink>
a
<ulink url="http://www.sci.fi/~syrjala/directfb/matrox-tv-out-howto">HOWTO</ulink>
na své domácí stránce, kde vysvìtluje, jak rozbìhnout DirectFB TV výstup na
kartách Matrox.
</para>

<note><para>
První DirectFB verze se kterou se nám to povedlo byla
0.9.17 (je chybová, potøebuje <systemitem>surfacemanager</systemitem>
patch z vý¹e uvedeného URL). Portace CRTC2 kódu do
<link linkend="mga_vid">mga_vid</link> bylo plánováno léta,
<ulink url="../../tech/patches.txt">patche</ulink> vítáme.
</para></note>
</sect2>
</sect1>

<sect1 id="mpeg_decoders">
<title>MPEG dekodéry</title>

<sect2 id="dvb">
<title>DVB výstup a vstup</title>
<para>
<application>MPlayer</application> podporuje karty s èipsetem Siemens DVB od
výrobcù jako Siemens, Technotrend, Galaxis nebo Hauppauge. Poslední DVB
ovladaèe jsou dostupné na <ulink url="http://www.linuxtv.org">Linux TV stránkách</ulink>.
Pokud chcete provádìt softwarové transkódování, mìli byste mít aspoò 1GHz CPU.
</para>

<para>
Configure by mìl detekovat va¹i DVB kartu. Pokud ne, vynu»te detekci pomocí
</para>

<para><screen>./configure --enable-dvb</screen></para>

<para>Pokud máte ost hlavièky na nestandardním místì, nastavte cestu pomocí</para>

<para><screen>./configure --with-extraincdir=<replaceable>zdrojový adresáø DVB</replaceable>/ost/include
</screen></para>

<para>Pak kompilujte a instalujte obvyklým zpùsobem.</para>

<formalpara>
<title>POU®ITÍ</title>
<para>
Hardwarové dekódování (pøehrávání standardních MPEG-1/2 souborù) lze provést
tímto pøíkazem:
</para>
</formalpara>

<para>
<screen>mplayer -ao mpegpes -vo mpegpes <replaceable>soubor.mpg|vob</replaceable></screen>
</para>

<para>
Softwarového dekódování nebo transkódování odli¹ných formátù do MPEG-1 mù¾ete
dosáhnout pøíkazem podobným tomuto:
</para>
<para><screen>
mplayer -ao mpegpes -vo mpegpes <replaceable>vá¹_soubor.ext</replaceable>
mplayer -ao mpegpes -vo mpegpes -vf expand <replaceable>vá¹_soubor.ext</replaceable>
</screen></para>

<para>
Pamatujte, ¾e DVB karty podporují pouze vý¹ky 288 a 576 pro PAL nebo 240 a 480
pro NTSC. Jiné vý¹ky <emphasis role="bold">musíte</emphasis> pøe¹kálovat
pøidáním <option>scale=¹íøka:vý¹ka</option> s ¹íøkou a vý¹kou, které chcete
do volby <option>-vf</option>. DVB karty akceptují rùzné ¹íøka jako 720, 704,
640, 512, 480, 352 atd, ale neprovádí ¾ádné vodorovné hardwarové ¹kálování,
tak¾e ve vìt¹inì pøípadù nemusíte vodorovnì ¹kálovat. Pro 512x384
(pomìr stran 4:3) MPEG-4 (DivX) zkuste:
</para>

<para><screen>mplayer -ao mpegpes -vo mpegpes -vf scale=512:576</screen></para>

<para>Pokud máte ¹irokoúhlý film a nechcete jej ¹kálovat na plnou vý¹ku, mù¾ete
pou¾ít filtr <option>expand=¹:v</option> pro pøidání èerných okrajù. Pro
promítání 640x384 MPEG-4 (DivX), zkuste:
</para>

<para>
<screen>mplayer -ao mpegpes -vo mpegpes -vf expand=640:576 <replaceable>soubor.avi</replaceable>
</screen>
</para>

<para>
Pokud je vá¹ procesor pøíli¹ slabý pro 720x576 MPEG-4 (DivX), zkuste pod¹kálovat:
</para>

<para>
<screen>mplayer -ao mpegpes -vo mpegpes -vf scale=352:576 <replaceable>soubor.avi</replaceable>
</screen>
</para>

<para>Pokud se rychlost nezlep¹í, zkuste pod¹kálovat i vý¹ku:</para>

<para>
<screen>mplayer -ao mpegpes -vo mpegpes -vf scale=352:288 <replaceable>soubor.avi</replaceable>
</screen>
</para>

<para>
Pro OSD a titulky pou¾ijte OSD vlastnost expand filtru. Tak¾e místo
<option>expand=¹:v</option> nebo <option>expand=¹:v:x:y</option>, pou¾ijte
<option>expand=¹:v:x:y:1</option> (pátý parametr <option>:1</option>
na konci zapne renderování OSD). Mo¾ná byste mìli trochu posunout obraz nahoru,
abyste mìli vìt¹í èerný okraj pro titulky. Rovnì¾ byste mìli posunout nahoru
titulky, pokud jsou mimo TV obrazovku. Pou¾ijte volbu <option>-subpos &lt;0-100&gt;</option>
pro toto nastavení (<option>-subpos 80</option> je dobrá volba).
</para>

<para>
Chcete-li pøehrávat filmy s jinou snímkovou rychlostí ne¾ 25 fps na PAL TV, nebo
na pomalém CPU, pøidejte volbu <option>-framedrop</option>.
</para>

<para>
Chcete-li zachovat pomìr stran MPEG-4 (DivX) souborù a dosáhnout optimálních
¹kálovacích parametrù (hardwarové horizontální ¹kálování a softwarové vertikální
¹kálování zatímco zachováte správný pomìr stran), pou¾ijte filtr dvbscale:
</para>

<para><screen>
pro 4:3 TV: -vf dvbscale,scale=-1:0,expand=-1:576:-1:-1:1
pro 16:9 TV: -vf dvbscale=1024,scale=-1:0,expand=-1:576:-1:-1:1
</screen></para>

<formalpara>
<title>Digitální TV (vstupní DVB modul)</title>
<para>Mù¾ete pou¾ít svou DVB kartu pro sledování Digitální TV.</para>
</formalpara>

<para>
  Mìli byste mít nainstalovány programy <command>scan</command> a
  <command>szap/tzap/czap/azap</command>; v¹echny jsou zaøazeny v balíèku
  ovladaèù.
</para>

<para>
  Ovìøte si, zda va¹e ovladaèe pracují správnì s progamy jako je
  <ulink url="http://sf.net/projects/dvbtools/"><command>dvbstream</command></ulink>
  (to je základ vstupního DVB modulu).
</para>

<para>
  Nyní byste mìli skompilovat soubor <filename>~/.mplayer/channels.conf</filename>,
  se syntaxí akceptovanou <command>szap/tzap/czap/azap</command>, nebo nechat
  <command>scan</command>, aby jej skompiloval.
</para>

<para>
  Pokud máte více ne¾ jeden typ karty (Napø. Satellitar, Terrestrial, Cable a ATSC)
  mù¾ete si ulo¾it své channels soubory podle typu jako
  <filename>~/.mplayer/channels.conf.sat</filename>,
  <filename>~/.mplayer/channels.conf.ter</filename>,
  <filename>~/.mplayer/channels.conf.cbl</filename>,
  a <filename>~/.mplayer/channels.conf.atsc</filename>,
  kdy <application>MPlayer</application> pou¾ije tyto soubory spí¹e ne¾
  <filename>~/.mplayer/channels.conf</filename>,
  a vy musíte pouze nastavit, kterou kartu pou¾ít.
</para>

<para>
  Ujistìte se, ¾e máte <emphasis>pouze</emphasis> nekódované
  kanály ve svém <filename>channels.conf</filename> souboru, jinak se
  <application>MPlayer</application> pokusí pøeladit na nejbli¾¹í zobrazitelný,
  ale to mù¾e trvat dlouho, pokud je zde mnoho po sobì jdoucích ¹ifrovaných
  kanálù.
</para>

<para>
  V polích audio a video mù¾ete pou¾ít roz¹íøenou syntaxi:
  <option>...:pid[+pid]:...</option> (maximálnì 6 pidù ka¾dé);
  v tom pøípadì zahrne <application>MPlayer</application> do datového proudu
  v¹echny zadané pidy plus pid 0 (který obsahuje PAT).
  Doporuèujeme zahrnout do ka¾dého øádku PMT pid pro odpovídající kanál
  (pokud jej znáte)
  Dal¹í mo¾ná pou¾ití jsou: televideo pid, druhá audio stopa, atd.
</para>

<para>
  Pokud <application>MPlayer</application> èasto protestuje o
  <screen>Pøíli¹ mnoha video/audio paketech ve vyrovnávací pamìti</screen> nebo
  pokud si pov¹imnete rostoucí desynchronizace mezi zvukem a
  videem, zkuste pou¾ít MPEG-TS demuxer z libavformat pøidáím
  <option>-demuxer lavf -lavfdopts probesize=128</option>
  na pøíkazovém øádku.
</para>

<para>
  Pro zobrazení prvního z kanálù uvedeného v seznamu, spus»te
</para>

<screen>
  mplayer dvb://
</screen>

<para>
  Pokud chcete sledovat urèitý kanál, napøíklad R1, spus»te
</para>

<screen>
  mplayer dvb://R1
</screen>

<para>
  Pokud máte více ne¾ jednu kartu, musíte rovnì¾ uvést èíslo karty, na které lze
  kanál sledovat (napø. 2). Syntyxe je:
</para>

<screen>
  mplayer dvb://2@R1
</screen>

<para>
  Pro zmìnu kanálu stisknìte klávesu <keycap>h</keycap> (dal¹í) a
  <keycap>k</keycap> (pøedchozí), nebo pou¾ijte
  <link linkend="osdmenu">OSD menu</link>.
</para>

<para>
  Pokud vá¹ <filename>~/.mplayer/menu.conf</filename> obsahuje øádek
  <literal>&lt;dvbsel&gt;</literal> podobný tomu v ukázkovém souboru
  <filename>etc/dvb-menu.conf</filename> (který mù¾ete pou¾ít k pøepsání
  <filename>~/.mplayer/menu.conf</filename>), bude v hlavním menu podseznam,
  kde si budete moci zvolit kanál ze svého <filename>channels.conf</filename>.
  Mù¾e mu pøípadnì pøedcházet menu se seznamem dostupných karet, pokud máte
  více ne¾ jednu pou¾itelnou <application>MPlayer</application>em.
</para>

<para>
  Pokud si chcete ulo¾it program na disk, mù¾ete pou¾ít
</para>

<screen>
  mplayer -dumpfile r1.ts -dumpstream dvb://R1
</screen>

<para>
  Pokud jej chcete zaznamenat v odli¹ném formátu (reenkódovat jej), spus»te
  místo toho pøíkaz podobný následujícímu
</para>

<screen>
  mencoder -o r1.avi -ovc xvid -xvidencopts bitrate=800 -oac mp3lame -lameopts cbr:br=128 -pp=ci dvb://R1
</screen>

<para>
  Pøeètìte si man stránku pro seznam voleb, které mù¾ete pøedat vstupnímu
  DVB modulu.
</para>

<formalpara>
<title>BUDOUCNOST</title>
<para>
Máte-li otázky, nebo chcete dostávat oznámení o nových vlastnostech a zapojit
se do diskuse o tìchto vìcech, pøipojte se k na¹í
<ulink url="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dvb">MPlayer-DVB</ulink>
e-mailové konferenci. Pamatujte prosím, ¾e jazykem konference je angliètina.
</para>
</formalpara>

<para>
V budoucnu mù¾ete oèekávat schopnost zobrazovat OSD a titulky pomocí nativní
podpory OSD v DVB kartách, stejnì jako plynulej¹í pøehrávání filmù s jinou
snímkovou rychlostí, ne¾ 25 fps a transkódování MPEG-2 na MPEG-4 v reálném èase
(èásteèná dekomprese).
</para>
</sect2>

<sect2 id="dxr2">
<title>DXR2</title>
<para><application>MPlayer</application> podporuje hardwarovì akcelerované
pøehrávání pomocí karty Creative DXR2.</para>
<para>
Nejdøíve musíte mít správnì nainstalované DXR2 ovladaèe. Ovladaèe a návod
k jejich instalaci naleznete na stránkách
<ulink url="http://dxr2.sf.net/">DXR2 Resource Center</ulink>.
</para>

<variablelist>
<title>POU®ITÍ</title>
<varlistentry>
<term><option>-vo dxr2</option></term>
<listitem><para>Zapíná TV výstup.</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-vo dxr2:x11</option> nebo <option>-vo dxr2:xv</option></term>
<listitem><para>Zapíná Overlay výstup v X11.</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-dxr2 &lt;volba1:volba2:...&gt;</option></term>
<listitem><para>Tato volba je pou¾ita k ovládání DXR2 ovladaèe.</para></listitem>
</varlistentry>
</variablelist>

<para>
Overlay èipset pou¾itý v DXR2 má mizernou kvalitu, ale výchozí nastavení pracuje
v¾dy. OSD lze pou¾ít spolu s overlay (ne na TV) pøi jeho vykreslení v klíèovací
barvì. S výchozím nastavením klíèovací barvy mù¾ete dosáhnout rùzných výsledkù,
obvykle uvidíte klíèovací barvu kolem znakù nebo jiné srandovní vìci. Pokud ale
vhodnì upravíte klíèování, mù¾ete dosáhnout pou¾itelných výsledkù.
</para>

<para>Prostudujte si prosím man stránku pro dostupné volby.</para>
</sect2>

<sect2 id="dxr3">
<title>DXR3/Hollywood+</title>
<para>
<application>MPlayer</application> podporuje hardwarovì akcelerované
pøehrávání videa pomocí karet Creative DXR3 a Sigma Designs Hollywood Plus.
Obì tyto karty pou¾ívají MPEG dekodér em8300 od Sigma Designs.
</para>

<para>
Nejprve budete potøebovat správnì nainstalované DXR3/H+ ovladaèe verze 0.12.0
nebo pozdìj¹í. Ovladaèe a návod na jejich instalaci naleznete na stránkách
<ulink url="http://dxr3.sf.net/">DXR3 &amp; Hollywood Plus for Linux</ulink>.
<filename>configure</filename> by mìlo automaticky detekovat va¹i kartu a
kompilace by se mìla obejít bez potí¾í.
</para>

<!-- FIXME: find a more clear presentation -->
<variablelist>
<title>POU®ITÍ</title>
<varlistentry>
<term><option>-vo dxr3:prebuf:sync:norm=x:<replaceable>zaøízení</replaceable></option></term>
<listitem><para>
<option>overlay</option> aktivuje overlay místo TVOut. Pro správnou funkci
vy¾aduje, abyste mìli správnì nakonfigurované nastavení overlay. Nejjednodu¾¹í
zpùsob nastavení overlay, je spu¹tìní autocal. Pak spus»te MPlayer s video
výstupem nastaveným na dxr3 s vypnutým overlay, spus»te dxr3view. V dxr3view
si mù¾ete hrát s nastavením overlay a pozorovat zmìny v reálném èase. Snad bude
tato funkce èasem dostupná z GUI <application>MPlayer</application>u. Jakmile
máte správnì nastaveno overlay, není ji¾ nutné pou¾ívat dxr3view.
<option>prebuf</option> zapíná prebuffering. Prebuffering je vlastnost èipu
em8300, terá mu umo¾òuje podr¾et si více ne¾ jeden videosnímek v daném èase.
To znamená, ¾e pokud jej máte zapnutý, sna¾í se <application>MPlayer</application>
udr¾et vyrovnávací pamì» videa (buffer) naplnìný daty. Pokud jej provozujete na
pomalém stroji, pou¾ije <application>MPlayer</application> témìø nebo pøesnì
100% výkonu CPU. To je zvlá¹» èasté, pokud pøehráváte èisté MPEG datové proudy
(jako DVD, SVCD atp.) jeliko¾ je <application>MPlayer</application> nemusí
pøevádìt do MPEG, naplní buffer velmi rychle.
S prebufferingem je pøehrávání videa <emphasis role="bold">mnohem</emphasis>
ménì citlivé na zamìstnávání CPU jinými programy. Nebudou zahozeny snímky, pokud
si aplikace neuzme CPU na dlouhou dobu.
Pokud pøehráváte bez prebufferingu, je em8300 mnohem citlivìj¹í na vytí¾ení CPU,
tak¾e doporuèujeme zapnout <application>MPlayer</application>ovu volbu
<option>-framedrop</option> pro zachování synchronizace.
<option>sync</option> zapíná nový sync-engine. To je zatím experimentální
vlastnost. Se zaplým sync budou vnitøní hodiny em8300 neustále sledovány a
pokud se zaènou rozcházet s èasovaèem <application>MPlayer</application>u,
budou resetovány, co¾ zpùsobí, ¾e em8300 zahodí ve¹keré snímky, které èekají ve
frontì.
<option>norm=x</option> nastaví TV normu DXR3 karty bez nutnosti externího
nástroje jako em8300setup. Platné normy jsou 5 = NTSC, 4 = PAL-60,
3 = PAL. Zvlá¹tní normy jsou 2 (automaticné nastavení s pou¾itím PAL/PAL-60) a
1 (automatické nastavení s pou¾itím PAL/NTSC), jeliko¾ ty urèí pou¾itou normu
podle snímkové rychlosti filmu. norm = 0 (výchozí) nezmìní aktuální normu.
<option><replaceable>device</replaceable></option> = èíslo zaøízení, které se
má pou¾ít, pokud máte více ne¾ jednu em8300 kartu.
Jakoukoli z tìchto voleb mù¾ete vynechat.
Volby <option>:prebuf:sync</option> zdá se pracují skvìle pøi pøehrávání filmù
v MPEG-4 (DivX). Lidé v¹ak hlásili potí¾e s volbou prebuf pøi pøehrávání souborù
v MPEG-1/2. Mìli byste je nejprve zkusit pøehrát bez dodateèných voleb a pokud
narazíte na potí¾e se synchronizací nebo DVD titulky, zkuste to s volbou
<option>:sync</option>.
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-ao oss:/dev/em8300_ma-<replaceable>X</replaceable></option></term>
<listitem><para>
Pro zvukový výstup, kde <replaceable>X</replaceable> je èíslo zaøízení
(0 máte-li jen jednu kartu).
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-af resample=<replaceable>xxxxx</replaceable></option></term>
<listitem><para>
Èip em8300 neumí pøehrávat signál vzorkovaný ménì ne¾ 44100Hz. Pokud je
vzorkovací kmitoèet pod 44100Hz, zvolte buï 44100Hz nebo 48000Hz podle toho,
násobek kterého je blí¾. Èili pokud má film zvuk 22050Hz pou¾ijte 44100Hz,
jeliko¾ 44100 / 2 = 22050, pokud jej má 24000Hz pou¾ijte 48000Hz jeliko¾
48000 / 2 = 24000 a tak dále.
S výstupem digitálního audia to nefunguje (<option>-ac hwac3</option>).
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-vf lavc/fame</option></term>
<listitem><para>
Pro pøehrávání ne-MPEG obsahu na em8300 (napø. MPEG-4 (DivX) nebo RealVideo)
musíte nastavit MPEG-1 video filtr jako
<systemitem class="library">libavcodec</systemitem> (lavc) nebo
<systemitem class="library">libfame</systemitem> (fame). V tuto chvíli
je lavc jak rychlej¹í, tak poskytuje lep¹í kvalitu obrazu, tak¾e vám radíme jej
pou¾ívat, pokud s ním nemáte potá¾e. Prostudujte si v man stránce dodateèné
informace o <option>-vf lavc/fame</option>.
Pou¾ití lavc silnì doporuèujeme. Zatím nelze nastavit snímkovou rychlost em8300,
tak¾e je pevnì nastavena na 30000/1001 fps. Z toho dùvodu doporuèujeme,
abyste pou¾ili <option>-vf lavc=<replaceable>quality</replaceable>:25</option>
zvlá¹» pokud pou¾íváte prebuffering. Proè tedy 25 a ne 30000/1001? Nu, dùvodem
je, ¾e pokud zadáte 30000/1001, zaène obraz trochu poskakovat. Dùvod tohoto
jevu nám není znám. Pokud to nastavíte nìkdemezi 25 a 27, obraz se ustálí.
Pro tuto chvíli se to dá pouze uznat jako fakt.
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-vf expand=-1:-1:-1:-1:1</option></term>
<listitem><para>
Aèkoli DXR3 ovladaè umí dodat OSD do MPEG-1/2/4 videa, má to mnohem ni¾¹í
kvalitu ne¾ tradièní OSD <application>MPlayer</application>u a má i rùzné
problémy s obnovováním. Vý¹e uvedený pøíkazový øádek nejprve pøevede vstupní
video do MPEG-4 (je to nutné, sorry), pak aplikuje filtr expand, který v¹ak
nic neexpanduje (-1: výchozí), ale doplní normální OSD do obrazu
(na to je ta "1" na konci).
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-ac hwac3</option></term>
<listitem><para>
Èip em8300 podporuje pøehrávání zvuku v AC3 (prostorový zvuk) pøes digitální
audio výstup na kartì. Viz vý¹ volbu <option>-ao oss</option>. Ta musí být
pou¾ita pro nastavení výstupu do DXR3 místo zvukové karty.
</para></listitem>
</varlistentry>
</variablelist>
</sect2>

</sect1>

<sect1 id="other">
<title>Ostatní vizualizaèní hardware</title>

<sect2 id="zr">
<title>Zr</title>

<para>
Toto je zobrazovací rozhraní (<option>-vo zr</option>) pro mnoho MJPEG
zachytávacích/pøehrávacích karet (testováno na DC10+ a Buz a mìlo by pracovat
i s LML33, tedy DC10). Rozhraní pracuje tak, ¾e snímek zakóduje do JPEG a pak
jej po¹le do karty. Pro enkódování do JPEG se pou¾ívá
<systemitem class="library">libavcodec</systemitem> a je pro nì nezbytný.
Ve speciálním <emphasis>cinerama</emphasis> re¾imu mù¾ete sledovat filmy
v pravém ¹irokoúhlém formátu, kterého je dosa¾eno tak, ¾e máte dvì promítaèky
a dvì MJPEG karty. V závislosti na rozli¹ení a nastavení kvality mù¾e toto
rozhraní vy¾adovat spoustu výkonu CPU. Nezapomeòte zadat
<option>-framedrop</option>, pokud je vá¹ poèítaè pøíli¹ pomalý.
Poznámka: Mùj AMD K6-2 350MHz je (s <option>-framedrop</option>) vcelku
adekvátní pro sledování materiálu o rozmìru VCD a pod¹kálovaných filmù.
</para>

<para>
Toto rozhraní komunikuje s jaderným modulem dostupným na
<ulink url="http://mjpeg.sf.net"/>, tak¾e jej nejdøíve musíte zprovoznit.
Pøítomnost MJPEG karty je autodetekována skriptem
<filename>configure</filename>. Pokud detekce sel¾e, vynu»te ji pomocí
<screen>./configure --enable-zr</screen>
</para>
<para>
Výstup mù¾e být ovlivòován nìkolika volbami. Ob¹írný výklad tìchto voleb
naleznete v man stránce, krátký pøehled obr¾íte spu¹tìním
<screen>mplayer -zrhelp</screen>
</para>

<para>
Vìci jako ¹kálování a OSD (display na obrazovce) nejsou tímto rozhraním pokryty,
ale lze jich dosáhnout pomocí video filtrù. Napøíklad mìjte video o rozli¹ení
512x272 a chcete jej pøehrávat na celé obrazovce pøes DC10+, pak máte tøi
základní mo¾nosti, jak to udìlat. Mù¾ete ¹kálovat video na ¹íøku 768, 384 nebo
192. Z dùvodu výkonu a kvality si zvolíte ¹kálování filmu na 384x204 pomocí
bilineárního softwarového ¹kálovaèe. Pøíkazový øádek je pak
<screen>
mplayer -vo zr -sws 0 -vf scale=384:204 <replaceable>film.avi</replaceable>
</screen>
</para>

<para>
Oøezání lze provést <option>crop</option> filtrem a samotným rozhraním.
Øeknìme, ¾e film je pøíli¹ ¹iroký pro promítání na va¹í Buz a proto chcete
pou¾ít <option>-zrcrop</option> pro zù¾ení filmu, pak byste mìli pou¾ít
následující pøíkaz
<screen>
mplayer -vo zr -zrcrop 720x320+80+0 <replaceable>benhur.avi</replaceable>
</screen>
</para>

<para>
chcete-li pou¾ít filtr <option>crop</option>, proveïte
<screen>
mplayer -vo zr -vf crop=720:320:80:0 <replaceable>benhur.avi</replaceable>
</screen>
</para>

<para>
Zvlá¹tní pøípady <option>-zrcrop</option> vyvolá re¾im
<emphasis>cinerama</emphasis>, tak¾e rozprostøete film na nìkolik televizí nebo
promítaèek, èím¾ se vytvoøí vìt¹í obraz. Pøedpokládejme, ¾e máte dvì promítaèky.
Levá je pøipojena k va¹í Buz na <filename>/dev/video1</filename> a
pravý je pøipojen do va¹í DC10+ na <filename>/dev/video0</filename>.
Film má rozli¹ení 704x288. Pøedpokládejme rovnì¾, ¾e pravá promítaèka je
èernobílá a levá umí JPEG snímky s kvalitou 10, pak byste mìli pou¾ít
následující pøíkaz
<screen>
mplayer -vo zr -zrdev /dev/video0 -zrcrop 352x288+352+0 -zrxdoff 0 -zrbw \
          -zrcrop 352x288+0+0 -zrdev /dev/video1 -zrquality 10 \
	  <replaceable>movie.avi</replaceable>
</screen>
</para>

<para>
Jak vidíte, volby uvedené pøed druhým <option>-zrcrop</option> jsou pøedány
pouze do DC10+ a volby za druhým <option>-zrcrop</option> do Buz.
Maximální poèet MJPEG karet zahrnutých do <emphasis>cinerama</emphasis>
re¾imu jsou ètyøi, tak¾e mù¾ete sestavit zobrazovací stìnu 2x2.
</para>

<para>
Nakonec dùle¾ité upozornìní: Nespou¹tìjte ani nezastavujte XawTV na pøehrávacím
zaøízení bìhem pøehrávání, zhavaru je vám poèítaè. Mù¾ete v¹ak
<emphasis role="bold">NEJDØÍV</emphasis> spustit XawTV a
<emphasis role="bold">PAK</emphasis> spustit <application>MPlayer</application>,
poèkat a¾ <application>MPlayer</application> skonèí a
<emphasis role="bold">PAK</emphasis> zastavit XawTV.
</para>
</sect2>

<sect2 id="blinkenlights">
<title>Blinkenlights</title>
<para>
Toto rozhraní je schopno pøehrávání pomocí Blinkenlights UDP protokolu. Pokud
nevíte co je <ulink url="http://www.blinkenlights.de/">Blinkenlights</ulink>
nebo jeho nástupce
<ulink url="http://www.blinkenlights.de/arcade/">Arcade</ulink>,
zjistìte si to. Aèkoli je to dost mo¾ná nejménì pou¾ívané video výstupní
rozhraní, bezpochyby je tím nejlep¹ím, co mù¾e <application>MPlayer</application>
nabídnout. Staèí shlédnout nìkterá z
<ulink url="http://www.blinkenlights.de/video.en.html">Blinkenlights dokumentaèních videí</ulink>.
Na Arcade video mù¾ete vidìt výstupní rozhraní Blinkenlights v akci v 00:07:50.
</para>
</sect2>
</sect1>

<sect1 id="tvout">
<title>pODPORA TV výstupu</title>

<sect2 id="tvout-mga-g400">
<title>Karty Matrox G400</title>

<para>
Pod Linuxem máte dva zpùsoby jak zprovoznit TV výstup na G400:
</para>

<important>
<para>
pro instrukce k TV výstupu na Matrox G450/G550 si prostudujte textovou èást!
</para>
</important>

<variablelist>
<varlistentry>
  <term>XFree86</term>
  <listitem><para>
    Pomocí ovladaèe a HAL modulu dostupného na stránkách <ulink
    url="http://www.matrox.com">Matrox</ulink>. Takto dostanete X na TV.
    </para><para>
    <emphasis role="bold">Tato metoda vám neposkytne akcelerované pøehrávání</emphasis>
    jako pod Windows! Sekundární jednotka má pouze YUV framebuffer, <emphasis>BES</emphasis>
    (Back End Scaler, YUV ¹kálovaè na kartách G200/G400/G450/G550) na nìm
    nepracuje! Ovladaè pro Windows to nìjak obchází, pravdìpodobnì pou¾itím
    3D jednotky pro zoom a YUV framebufferu pro zobrazení zoomovaného
    obrazu. Pokud opravdu chcete pou¾ít X, pou¾ijte volby <option>-vo x11 -fs
    -zoom</option>, ale bude to <emphasis role="bold">POMALÉ</emphasis> a
    bude zapnuta ochrana proti kopírování
    <emphasis role="bold">Macrovision</emphasis>
    (Macrovision mù¾ete obejít pomocí tohoto
    <ulink url="http://avifile.sf.net/mgamacro.pl">perlového skriptu</ulink>).
    </para></listitem>
</varlistentry>
<varlistentry>
  <term>Framebuffer</term>
  <listitem><para>
    Pomocí <emphasis role="bold">matroxfb modulù</emphasis> v jádrech øady 2.4.
    Jádra 2.2 v nich neobsahují podporu pro TV, tak¾e jsou pro tento úèel
    nepou¾itelná. Mìli byste povolit V©ECHNY matroxfb-specifické vlastnosti
    bìhem kompilace (vyjma MultiHead) a zakompilovat je do
    <emphasis role="bold">modulù</emphasis>!
    Rovnì¾ potøebujete zapnuté I2C.
    </para>

    <procedure>
    <step><para>
      Vstupte do <filename class="directory">TVout</filename> a zadejte
      <command>./compile.sh</command>. Nainstalujte
      <filename>TVout/matroxset/matroxset</filename>
      nìkde do cesty <envar>PATH</envar>.
      </para></step>
    <step><para>
      Nemáte-li nainstalován <command>fbset</command>, vlo¾te
      <filename>TVout/fbset/fbset</filename>
      nìkde do cesty <envar>PATH</envar>.
      </para></step>
    <step><para>
      Nemáte-li nainstalován <command>con2fb</command>, vlo¾te
      <filename>TVout/con2fb/con2fb</filename>
      nìkde do cesty <envar>PATH</envar>.
      </para></step>
    <step><para>
      Pak vstupte do adresáøe <filename class="directory">TVout/</filename>
      ve zdrojovém adresáøi <application>MPlayer</application>u a spus»te
      <filename>./modules</filename> jako root. Va¹e textová konzole pøejde
      do re¾imu framebuffer (není cesta zpìt!).
      </para></step>
    <step><para>
      Dále EDITUJTE a spus»te skript <filename>./matroxtv</filename>. Objeví se
      vám velmi jednoduché menu. Stisknìte <keycap>2</keycap> a
      <keycap>Enter</keycap>. Nyní byste mìli mít stejný obraz na svém monitoru
      i TV. Pokud má obraz na TV (výchozí je PAL) nìjaké podivné ¹rámy, nebyl
      skript schopen nastavit správnì rozli¹ení (na výchozích 640x512).
      Zkuste jiná rozli¹ení z menu a/nebo experimentujte s fbset.
      </para></step>
    <step><para>
      Jo. Dal¹ím úkolem je nechat zmizet kurzor z tty1 (nebo odjinud) a
      vypnout mazání obrazovky. Spus»e následující pøíkazy:

      <screen>
echo -e '\033[?25l'
setterm -blank 0<!--
   --></screen>
      nebo
      <screen>
setterm -cursor off
setterm -blank 0<!--
   --></screen>

      Pøedchozí nejspí¹ bude lep¹í umístit do skriptu a také vyèistit obrazovku.
      Pro zpìtné zapnutí kurzoru:
      <screen>echo -e '\033[?25h'</screen> nebo
      <screen>setterm -cursor on</screen>
      </para></step>
    <step><para>
      A jasnì. Spus»te pøehrávání filmu:
      <screen>
mplayer -vo mga -fs -screenw 640 -screenh 512 <replaceable>soubor</replaceable><!--
   --></screen>

      (Pokud pou¾íváte X, pøepnìte se nyní do matroxfb pomocí napøíklad
      <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>F1</keycap>.)
      Zmìòte <literal>640</literal> a <literal>512</literal> pokud máte
      nastaveno jiné rozli¹ení...
      </para></step>
    <step><para>
      <emphasis role="bold">U¾ijte si ultra-rychlý ultra-vybavený Matrox TV
      výstup (lep¹í ne¾ Xv)!</emphasis>
      </para></step>
    </procedure>
  </listitem>
</varlistentry>
</variablelist>

<formalpara>
<title>Výroba kabelu pro Matrox TV-out</title>
<para>
Zøíkáme se jakékoli odpovìdnosti nebo záruky za jakékoli po¹kození zpùsobené
touto dokumentací.
</para>
</formalpara>

<formalpara>
<title>Kabel pro G400</title>
<para>
Na ètvrtém pinu CRTC2 konektoru je kompozitní video signál. Zem je
na ¹estém, sedmém a osmém pinu. (informaci poskytl
Balázs Rácz)
</para>
</formalpara>

<formalpara>
<title>Kabel pro G450</title>
<para>
Kompozitní video signál je na pinu jedna. Zem je na pátém,
¹estém, sedmém a patnáctém (5, 6, 7, 15) pinu.
(informaci poskytl Balázs Kerekes)
</para>
</formalpara>
</sect2>

<sect2 id="tv-out_matrox_g450">
<title>Karty Matrox G450/G550</title>
<para>
Podpora TV výstupu pro tyto karty byla pøidána teprve nedávno a dosud není
v ostré verzi jádra. V souèasnosti nelze (aspoò pokud vím) pou¾ít modul
<emphasis role="bold">mga_vid</emphasis>, proto¾e ovladaè G450/G550 pracuje
pouze v jedné konfiguraci: první CRTC èip (s mnohem více schopnostmi) na první
displej a druhá CRTC (¾ádné <emphasis role="bold">BES</emphasis> &ndash; pro
popis BES viz sekci G400 vý¹e) na TV. Tak¾e v souèasnosti mù¾ete pou¾ít pouze
<application>MPlayer</application>ovo <emphasis>fbdev</emphasis> výstupní
rozhraní.
</para>

<para>
První CRTC nemù¾e být v souèasnosti pøesmìrována na sekundární výstup. Autor
jaderného ovladaèe matroxfb &ndash; Petr Vandrovec &ndash; pro to snad
vyrobí podporu pomocí zobrazení výstupu prvního CRTC na oba výstupy najednou,
co¾ se pro tuto chvíli doporuèuje pro G400, viz pøedchozí sekce.
</para>

<para>
Potøebnou záplatu jádra a podrobné HOWTO lze stáhnout z
<ulink url="http://www.bglug.ca/matrox_tvout/"/>
</para>
</sect2>


<sect2 id="tvout-ati">
<title>Karty ATI</title>

<formalpara>
<title>ÚVOD</title>
<para>
V souèasnosti nechce ATI podporovat ¾ádný ze svých TV-out èipù pod Linuxem
z dùvodu jejich licencované technologii Macrovision.
</para>
</formalpara>

<itemizedlist>
<title>STATUS TV VÝSTUPU NA KARTÁCH ATI POD LINUXEM</title>
<listitem><simpara>
  <emphasis role="bold">ATI Mach64</emphasis>:
  podporovaný <ulink url="http://gatos.sf.net">GATOS</ulink>em.
  </simpara></listitem>
<listitem><simpara>
  <emphasis role="bold">ASIC Radeon VIVO</emphasis>:
  podporovaný <ulink url="http://gatos.sf.net">GATOS</ulink>em.
  </simpara></listitem>
<listitem><simpara>
  <emphasis role="bold">Radeon</emphasis> a <emphasis role="bold">Rage128</emphasis>:
  podporovaný <application>MPlayer</application>em!
  Podívejte se na sekce <link linkend="vesa">VESA</link> a
  <link linkend="vidix">VIDIX</link>.
  </simpara></listitem>
<listitem><simpara>
  <emphasis role="bold">Rage Mobility P/M, Radeon, Rage 128, Mobility M3/M4</emphasis>:
  podporovaný <ulink url="http://www.stud.uni-hamburg.de/users/lennart/projects/atitvout/">atitvout</ulink>em.
  </simpara></listitem>
</itemizedlist>

<para>
Ne ostatních kartách prostì pou¾ijte rozhraní <link linkend="vesa">VESA</link>
bez VIDIX. Vy¾aduje to výkoný CPU.
</para>

<para>
Jediné co musíte, je <emphasis role="bold">mít TV konektor zapojený
pøed zapnutím PC</emphasis> jeliko¾ video BIOS se inicializuje pouze
jednou bìhem POST procedury.
</para>
</sect2>


<sect2 id="tvout-nvidia">
<title>nVidia</title>
<para>
Nejprve si MUSÍTE stáhnout closed-source ovladaèe z <ulink url="http://nvidia.com"/>.
Nebudu zde popisovat instalaci a konfiguraci, jeliko¾ je to mimo rámec této
dokumentace.
</para>

<para>
Jakmile je funkèní XFree86, XVideo a 3D akcelerace, editujte sekci
Device v souboru <filename>XF86Config</filename>, podle
následujícího pøíkladu (upravte si to pro svou kartu/TV):

<programlisting>
Section "Device"
        Identifier      "GeForce"
        VendorName      "ASUS"
        BoardName       "nVidia GeForce2/MX 400"
        Driver          "nvidia"
        #Option         "NvAGP" "1"
        Option          "NoLogo"
        Option          "CursorShadow"  "on"

        Option          "TwinView"
        Option          "TwinViewOrientation" "Clone"
        Option          "MetaModes" "1024x768,640x480"
        Option          "ConnectedMonitor" "CRT, TV"
        Option          "TVStandard" "PAL-B"
        Option          "TVOutFormat" "Composite"
EndSection
</programlisting>
</para>

<para>
Samozøejmì je nejdùle¾itìj¹í èást TwinView.
</para>
</sect2>

<sect2 id="tvout-neomagic">
<title>NeoMagic</title>
<para>
Èip NeoMagic lze nalézt v rùzných laptopech. Nìkteré z nich jsou vybaveny
jednoduchým analogovým TV enkodérem, nìkteré jej mají mnohem pokroèilej¹í.
<itemizedlist>
<listitem><simpara>
  <emphasis role="bold">Analogový enkodér</emphasis>:
  Testováno na Toshibì Tecra 8000. Její èip pro TV výstup je mizerný køáp.
  Pokud mo¾no se mu obloukem vyhnìte.
  </simpara> <simpara>
  Musíte pou¾ít <option>-vo vesa</option>. Testovaný èip umí jen pomìr stran
  1.333333, tak¾e se ujistìte, ¾e pou¾íváte volby <option>-x</option>,
  <option>-y</option> a/nebo filtry
  <option>-vf scale,crop,expand</option>, pokud poèítaè neumo¾ní TV výstup.
  Maximální rozli¹ení je 720*576 v 16bpp.
  </simpara>
  <simpara>
  Známá omezení: pouze VESA, omezení pomìru stran 1.33333, obraz není v¾dy
  vycentrován, barevná hloubka filmu se ka¾dých 10 minut zmìní na 4bpp a
  zùstane tak. Èasto zatuhává, problémy se zobrazováním na LCD.
  </simpara></listitem>
<listitem><simpara>
  <emphasis role="bold">Chrontel 70xx enkodér</emphasis>:
  Nalezen v  IBM Thinkpad 390E a bude pravdìpodobnì i ostatních Thinkpadech nebo
  noteboocích.
  </simpara><simpara>
  Musíte pou¾ít <option>-vo vesa:neotv_pal</option> pro PAL nebo
  <option>-vo vesa:neotv_ntsc</option> pro NTSC.
  To vám zpøístupní funkci TV výstupu v následujících 16 bpp a 8 bpp re¾imech:
  </simpara>
  <itemizedlist>
    <listitem><simpara>NTSC 320x240, 640x480 a mo¾ná také 800x600.</simpara></listitem>
    <listitem><simpara>PAL  320x240, 400x300, 640x480, 800x600.</simpara></listitem>
  </itemizedlist>
  <simpara>Re¾im 512x384 není podporován BIOSem. Musíte obraz ¹kálovat do
  jiného rozli¹ení pro aktivaci TV výstupu. Pokud vidíte obraz na obrazovce
  v 640x480 nebo v 800x600, ale ne v 320x240 nebo jiném men¹ím rozli¹ení,
  musíte nahradit dvì tabulky ve <filename>vbelib.c</filename>.
  Viz funkci vbeSetTV pro více informací. V tomto pøípadì prosím kontaktujte
  autora.
  </simpara>
  <simpara>
  Známá omezení: pouze VESA, ¾ádné dal¹í ovládací prvky jako jas, kontrast,
  úroveò èerné, filtrace blikání nejsou implementovány.
  </simpara>
</listitem>
</itemizedlist>
</para>
</sect2>
</sect1>

</chapter>
