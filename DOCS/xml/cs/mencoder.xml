<?xml version="1.0" encoding="iso-8859-2"?>
<!-- Synced with: 1.94 -->
<chapter id="mencoder">
<title>Základní pou¾ití <application>MEncoder</application>u</title>

<para>
Úplný seznam dostupných voleb a pøíkladù pro <application>MEncoder</application>
naleznete v man stránce. Øadu u¾iteèných pøíkladù a podrobných návodù pro
pou¾ití mnoha enkódovacích voleb naleznete v
<ulink url="../../tech/encoding-tips.txt">tipech pro enkódování</ulink>, které
byly získány z nìkolika diskusí v konferenci MPlayer-users. Prohledejte
<ulink url="http://mplayerhq.hu/pipermail/mplayer-users/">archivy</ulink>,
chcete-li bohatost diskusí o v¹ech aspektech a problémech vzta¾ených
k enkódování <application>MEncoder</application>em.
</para>

<sect1 id="menc-feat-selecting-codec">
<title>Výbìr kodekù a nosných formátù</title>

<para>
  Audio a video kodeky pro enkódování jsou vybírány pøíslu¹nými volbami
  <option>-oac</option> a <option>-ovc</option> options.
  Na výbìr máte z následujících mo¾ností, aèkoli nìkteré nemusely být
  v dobì kompilace povoleny, nebudou tedy k dispozici:
</para>
<para>
Audio (zvukové) kodeky:

<informaltable frame="all">
<tgroup cols="2">
<thead>
<row><entry>Jméno audio kodeku</entry><entry>Popis</entry></row>
</thead>
<tbody>
  <row>
    <entry>mp3lame</entry>
    <entry>Enkóduje do VBR, ABR nebo CBR MP3 pomocí LAME</entry>
  </row>
  <row>
    <entry>lavc</entry>
    <entry>Pou¾ije se nìkterý z
    <link linkend="menc-feat-enc-libavcodec-audio-codecs">
    <systemitem class="library">libavcodec</systemitem> audio kodekù</link>
    </entry>
  </row>
  <row>
    <entry>faac</entry>
    <entry>FAAC AAC audio enkodér</entry>
  </row>
  <row>
    <entry>toolame</entry>
    <entry>Enkodér MPEG Audio Layer 2</entry>
  </row>
  <row>
    <entry>twolame</entry>
    <entry>Enkodér MPEG Audio Layer 2 zalo¾ený na tooLAME</entry>
  </row>
  <row>
    <entry>pcm</entry>
    <entry>Nekomprimovaný PCM zvuk</entry>
  </row>
  <row>
    <entry>copy</entry>
    <entry>Nereenkóduje, pouze kopíruje komprimované vzorky</entry>
  </row>
</tbody>
</tgroup>
</informaltable>
</para>

<para>
Video kodeky:
<informaltable frame="all">
<tgroup cols="2">
<thead>
<row><entry>Jméno video kodeku</entry><entry>Popis</entry></row>
</thead>
<tbody>
  <row>
    <entry>lavc</entry>
    <entry>Pou¾ije se nìkterý z
    <link linkend="menc-feat-enc-libavcodec-video-codecs">
    <systemitem class="library">libavcodec</systemitem> video kodekù</link>
    </entry>
  </row>
  <row>
    <entry>xvid</entry>
    <entry>XviD, MPEG-4 Advanced Simple Profile (ASP) kodek</entry>
  </row>
  <row>
    <entry>x264</entry>
    <entry>x264, MPEG-4 Advanced Video Coding (AVC), alias H.264 kodek</entry>
  </row>
  <row>
    <entry>nuv</entry>
    <entry>nuppel video, pou¾ívaný nìkterými realtime aplikacemi</entry>
  </row>
  <row>
    <entry>raw</entry>
    <entry>Nekomprimované videosnímky</entry>
  </row>
  <row>
    <entry>copy</entry>
    <entry>Nereenkóduje, pouze kopíruje komprimované snímky</entry>
  </row>
  <row>
    <entry>frameno</entry>
    <entry>Pou¾ité pro 3-prùchodové enkódování (nedoporuèujeme)</entry>
  </row>
</tbody>
</tgroup>
</informaltable>
</para>
</sect1>


<sect1 id="menc-feat-selecting-input">
<title>Výbìr vstupního souboru nebo zaøízení</title>

<para>
  <application>MEncoder</application> umí enkódovat ze souborù nebo pøímo z
  DVD èi VCD disku.
  Vlo¾te na pøíkazovém øádku jméno souboru pro enkódování souboru,
  nebo <option>dvd://</option><replaceable>èíslo_titulu</replaceable> nebo
  <option>vcd://</option><replaceable>èíslo_stopy</replaceable> pro enkódování
  DVD titulu èi VCD stopy.
  Máte-li ji¾ zkopírováno DVD na hard disk (k tomu mù¾ete pou¾ít nástroj jako
  <application>dvdbackup</application>, dostupný na mnoha systémech),
  a chcete enkódovat z kopie, mìli byste i zde pou¾ít syntaxi
  <option>dvd://</option> ve spojení s volbou <option>-dvd-device</option>
  následovanou cestou do koøenového adresáøe skopírovaného DVD.

  Volby <option>-dvd-device</option> a <option>-cdrom-device</option>
  lze rovnì¾ pou¾ít k pøenastavení cest k souborùm zaøízení pro pøímé
  ètení diskù, pokud výchozí 
  <filename>/dev/dvd</filename> a <filename>/dev/cdrom</filename> na va¹em
  systému nepracují.
</para>
<para>
  Enkódujete-li z DVD, je èasto vhodné vybrat kapitolu nebo rozsah
  kapitol k enkódování.
  Pro tento úèel mù¾ete pou¾ít volbu <option>-chapter</option>.
  Napøíklad s volbou <option>-chapter</option> <replaceable>1-4</replaceable>
  se budou z DVD enkódovat pouze kapitoly 1 a¾ 4.
  To se zvlá¹» hodí, pokud budete enkódovat film na velikost 1400 MB
  urèený pro dvì CD, jeliko¾ budete mít jistotu, ¾e zlom nastane pøesnì
  na hranici kapitol místo uprostøed scény.
</para>
<para>
  Pokud máte podporovanou TV zachytávací kartu, mù¾ete rovnì¾ enkódovat ze
  zaøízení TV vstupu.
  Pou¾ijte <option>tv://</option><replaceable>èíslo_kanálu</replaceable> jako
  jméno souboru a volbu <option>-tv</option> pro konfiguraci rùzných nastavení
  zachytávání.
  Vstup z DVB pracuje obdobnì.
</para>
</sect1>


<sect1 id="menc-feat-mpeg4">
<title>Dvouprùchodové enkódování MPEG-4 (&quot;DivX&quot;)</title>

<para>
Název vychází z faktu, ¾e soubor je enkódován <emphasis>dvakrát</emphasis>.
První enkódování (dubbed pass) vytvoøí doèasné soubory
(<filename>*.log</filename>) velikosti nìkolika megabajtù, které zatím nema¾te
(mù¾ete smazat AVI, nebo radìji ¾ádné nevytváøejte a pøesmìrujte je do
<filename>/dev/null</filename>).
Ve druhém prùchodu je vytvoøen dvouprùchodový výstupní
soubor s pou¾itím øízení datového toku z doèasných souborù. Výsledný soubor
bude mít lep¹í kvalitu obrazu. Pokud jste o tom teï sly¹eli poprvé, mìli byste
si prostudovat nìkteré návody dostupné na netu.
</para>

<example>
<title>Kopírování zvukové stopy</title>
<para>
Dvouprùchodové enkódování druhé stopy z DVD do MPEG-4 (&quot;DivX&quot;)
AVI zatímco se zvuk pouze zkopíruje.
<screen>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac copy -o <replaceable>/dev/null</replaceable>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -oac copy -o <replaceable>film.avi</replaceable>
</screen>
</para>
</example>

<example>
<title>Enkódování zvukové stopy</title>
<para>
Dvouprùchodové enkódování DVD do MPEG-4 (&quot;DivX&quot;) AVI a souèasnì
enkódování zvukové stopy do MP3.
Pøi této metodì buïte opatrní, jeliko¾ v nìkterých pøípadech mù¾e vést k rozjetí
zvuku s videem.
<screen>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac mp3lame -lameopts vbr=3 -o <replaceable>film.avi</replaceable>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -oac mp3lame -lameopts vbr=3 -o <replaceable>film.avi</replaceable>
</screen>
</para>
</example>
</sect1>

<sect1 id="menc-feat-mpeg">
<title>Enkódování do MPEG formátu</title>
<para>
<application>MEncoder</application> umí vytvoøit výstupní soubor formátu
MPEG (MPEG-PS).
Pokud pou¾íváte MPEG-1 nebo MPEG-2 video, obvykle je to proto, ¾e enkódujete
pro omezený formát jako je SVCD, VCD nebo DVD.
Konkrétní po¾adavky tìchto formátù jsou objasnìny v sekci
<link linkend="menc-feat-vcd-dvd">návod pro vytvoøení VCD a DVD</link>.
</para>

<para>
Výstupní souborový formát <application>MEncoder</application>u zmìníte pou¾itím
volby <option>-of mpeg</option>.
</para>

<informalexample>
<para>
Pøíklad:
<screen>
mencoder -of mpeg -ovc lavc -lavcopts vcodec=mpeg1video -oac copy <replaceable>dal¹í_volby</replaceable> <replaceable>media.avi</replaceable> -o <replaceable>výstup.mpg</replaceable>
</screen>
Vytvoøení MPEG-1 souboru vhodného pro pøehrávání na systémech s minimální
podporou multimédií, jako je výchozí instalace Windows:
<screen>
mencoder -of mpeg -mpegopts format=mpeg1:tsaf:muxrate=2000 -o \
<replaceable>x.mpg</replaceable> -oac lavc -ovc lavc \
-lavcopts acodec=mp2:abitrate=224:vcodec=mpeg1video:vbitrate=1152:keyint=15:mbd=2:aspect=4/3 \
<replaceable>vstupní.avi</replaceable>
</screen>
</para>
</informalexample>

</sect1>

<sect1 id="menc-feat-rescale">
<title>©kálování (zmìna velikosti) filmù</title>

<para>
Èasto potøebujeme zmìnit velikost obrázkù ve filmu a to z mnoha dùvodù: zmen¹ení
souboru, zátì¾e sítì atd. Mnoho lidí dokonce mìní velikost pøi pøevodu DVD nebo
SVCD do DivX AVI. Pokud si pøejete video pøe¹kálovat, pøeètìte si sekci
<link linkend="aspect">Zachování pomìru stran</link>.
</para>

<para>
Samotný proces ¹kálování je provádìn video filtrem <literal>scale</literal>:
<option>-vf scale=<replaceable>¹íøka</replaceable>:<replaceable>vý¹ka</replaceable></option>.
Jeho kvalita mù¾e být nastavena volbou <option>-sws</option>.
Pokud ji neuvedete, <application>MEncoder</application> pou¾ije 2: bikubickou.
</para>

<para>
Pou¾ití:
<screen>
mencoder <replaceable>vstup.mpg</replaceable> -ovc lavc -lavcopts vcodec=mpeg4 -vf scale=640:480 -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</sect1>


<sect1 id="menc-feat-streamcopy">
<title>Proudové kopírování</title>

<para>
<application>MEncoder</application> mù¾e zpracovat vstupní datové proudy dvìma
zpùsoby:
<emphasis role="bold">enkóduje</emphasis> je, nebo je
<emphasis role="bold">kopíruje</emphasis>. Tato èást je o
<emphasis role="bold">kopírování</emphasis>.
</para>

<itemizedlist>
<listitem><para>
  <emphasis role="bold">Video proud</emphasis> (volba <option>-ovc copy</option>):
  mù¾ete dìlat pìkné vìci :) Jako umístìní (nikoli konverze!) FLI nebo VIVO nebo
  MPEG-1 videa do AVI souboru! Samozøejmì takové soubory pøehraje pouze
  <application>MPlayer</application> :) A proto to nejspí¹ nemá ¾ádnou rozumnou
  hodnotu. A teï vá¾nì: kopírování video proudu mù¾e být u¾iteèné napøíklad
  tehdy, kdy¾ má být enkódován pouze zvuk (napø. nekomprimovaný PCM do MP3).
  </para></listitem>
<listitem><para>
  <emphasis role="bold">Audio proud</emphasis> (volba <option>-oac copy</option>):
  jednoduché. Je mo¾né vzít externí zvukový soubor (MP3, WAV) a namultiplexovat
  jej do výstupního proudu. K tomu pou¾ijte volbu
  <option>-audiofile <replaceable>soubor</replaceable></option>.
  </para></listitem>
</itemizedlist>

<para>
  Pou¾ití <option>-oac copy</option> pro kopírování z jednoho nosného fomátu
  do jiného mù¾e vy¾adovat pou¾ití <option>-fafmttag</option> pro zachování
  pøíznaku formátu zvuku pùvodního souboru.
  Napøíklad pokud konvertujete NSV soubor a AAC zvukem do nosného formátu AVI,
  bude pøíznak formátu zvuku nesprávný a bude jej nutno zmìnit.
  Seznam pøíznakù audio formátu naleznete v souboru
  <filename>codecs.conf</filename>.
</para>

<para>
Example:
<screen>
mencoder <replaceable>vstupní.nsv</replaceable> -oac copy -fafmttag 0x706D -ovc lavc -lavcopts vcodec=mpeg4 -o <replaceable>výstupní.avi</replaceable>
</screen>
</para>

</sect1>


<sect1 id="menc-feat-enc-images">
<title>Enkódování z mno¾ství vstupních obrázkových souborù (JPEG, PNG, TGA, SGI)</title>

<para>
<application>MEncoder</application> je schopen vytvoøit film z jednoho nebo více
JPEG, PNG nebo TGA souborù. Pomocí jednoduchého snímkového kopírování mù¾e
vytvoøit MJPEG (Motion JPEG), MPNG (Motion PNG) nebo MTGA (Motion TGA) soubory.
</para>

<orderedlist>
<title>Vysvìtlení procesu:</title>
<listitem><para>
  <application>MEncoder</application> <emphasis>dekóduje</emphasis> vstupní
  soubor(y) pomocí knihovny <systemitem class="library">libjpeg</systemitem>
  (kdy¾ dekóduje PNG, pou¾ije <systemitem class="library">libpng</systemitem>).
  </para></listitem>
<listitem><para>
  Potom <application>MEncoder</application> nakrmí dekódovaný snímek do
  zvoleného video kompresoru (DivX4, XviD, FFmpeg msmpeg4, atd).
  </para></listitem>
</orderedlist>

<formalpara>
<title>Pøíklady</title>
<para>
Vysvìtlení volby <option>-mf</option> je v man stránce.

<informalexample>
<para>
Vytvoøení MPEG-4 souboru ze v¹ech JPEG souborù v aktuálním adresáøi:
<screen>
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc lavc -lavcopts vcodec=mpeg4 -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení MPEG-4 souboru z nìkterých JPEG souborù v aktuálním adresáøi:
<screen>
mencoder mf://<replaceable>snímek001.jpg,snímek002.jpg</replaceable> -mf w=800:h=600:fps=25:type=jpg -ovc lavc -lavcopts vcodec=mpeg4 -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení Motion JPEG (MJPEG) souboru ze v¹ech JPEG souborù v aktuálním
adresáøi:
<screen>
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc copy -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení nekomprimovaného souboru ze v¹ech PNG souborù v aktuálním adresáøi:
<screen>
mencoder mf:// -mf w=800:h=600:fps=25:type=png -ovc raw -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<note><para>
©íøka musí být celé èíslo násobek 4, to je dáno omezením RAW RGB AVI formátu.
</para></note>

<informalexample>
<para>
Vytvoøení Motion PNG (MPNG) souboru ze v¹ech PNG souborù v aktuálním adresáøi:
<screen>
mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc copy -oac copy -o <replaceable>výstup.avi</replaceable> <!--
--></screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení Motion TGA (MTGA) souboru ze v¹ech TGA souborù v aktuálním adresáøi:
<screen>
mencoder mf://*.tga -mf w=800:h=600:fps=25:type=tga -ovc copy -oac copy -o <replaceable>výstup.avi</replaceable><!--
--></screen>
</para>
</informalexample>

</para>
</formalpara>
</sect1>


<sect1 id="menc-feat-extractsub">
<title>Extrakce DVD titulkù do VOBsub souboru</title>

<para>
<application>MEncoder</application> je schopen vyextrahovat titulky z DVD do
VOBsub formátovaných souborù. Ty sestávají ze dvou souborù zakonèených
<filename>.idx</filename> a <filename>.sub</filename> a jsou obvykle zabaleny
v jediném <filename>.rar</filename> archivu.
<application>MPlayer</application> je umí pøehrávat s pomocí voleb
<option>-vobsub</option> a <option>-vobsubid</option>.
</para>

<para>
Zadejte základní jméno (èili bez pøípony <filename>.idx</filename> nebo
<filename>.sub</filename>) výstupních souborù pomocí volby
<option>-vobsubout</option> a index pro tyto titulky ve zbývajících souborech
pomocí <option>-vobsuboutindex</option>.
</para>

<para>
Pokud není vstup z DVD, mìli byste pou¾ít <option>-ifo</option> pro indikaci
<filename>.ifo</filename> souboru nutného k vytvoøení výsledného
<filename>.idx</filename> souboru.
</para>

<para>
Pokud vstup není z DVD a nemáte <filename>.ifo</filename> soubor, budete muset
pou¾ít volbu <option>-vobsubid</option> k nastavení, pro které id jazyka se má
vytvoøit <filename>.idx</filename> soubor.
</para>

<para>
Ka¾dým spu¹tìním se pøidají bì¾ící titulky pokud soubory <filename>.idx</filename>
a <filename>.sub</filename> ji¾ existují. Tak¾e byste je mìli v¹echny odstranit
døíve ne¾ zaènete.
</para>

<example>
<title>Kopírování dvojích titulkù z DVD bìhem dvouprùchodového enkódování</title>
<screen>
rm titulky.idx titulky.sub
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -vobsubout titulky -vobsuboutindex 0 -sid 2
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -vobsubout titulky -vobsuboutindex 1 -sid 5<!--
--></screen>
</example>

<example>
<title>Kopírování francouzských titulkù z MPEG souboru</title>
<screen>
rm titulky.idx titulky.sub
mencoder <replaceable>film.mpg</replaceable> -ifo <replaceable>film.ifo</replaceable> -vobsubout titulky -vobsuboutindex 0 -vobsuboutid fr -sid 1 -nosound -ovc copy
</screen>
</example>

</sect1>

<sect1 id="aspect">
<title>Zachování pomìru stran</title>
<para>
DVD a SVCD (èili MPEG-1/2) soubory obsahují hodnotu pomìru stran,
popisující, jak by mìl pøehrávaè ¹kálovat video proud, tak¾e lidé nebudou mít
¹i¹até hlavy (pø.: 480x480 + 4:3 = 640x480). Pokud ov¹em enkódujeme do AVI
(DivX) souborù, mìjte na pamìti, ¾e AVI hlavièky neukládají tuto hodnotu.
Pøe¹kálování videa je odporné a èasovì nároèné, tak¾e musí být lep¹í zpùsob!
</para>

<para>A zde jej máte</para>

<para>
MPEG-4 má unikátní vlastnost: video proud mù¾e obsahovat svùj po¾adovaný pomìr
stran. Ano, pøesnì jako MPEG-1/2 (DVD, SVCD) a H.263 soubory. Nane¹tìstí,
<emphasis role="bold">¾ádný</emphasis> video pøehrávaè nepodporuje tento atribut
MPEG-4, s výjimkou <application>MPlayer</application>u.
</para>

<para>
Tato vlastnost mù¾e být pou¾ita pouze s kodekem <systemitem>mpeg4</systemitem> z
<link linkend="ffmpeg"><systemitem class="library">libavcodec</systemitem></link>u.
Mìjte na pamìti: aèkoli
<application>MPlayer</application> korektnì pøehraje vytvoøený soubor, ostatní
pøehrávaèe pou¾ijí ¹patný pomìr stran.
</para>

<para>
Opravdu byste mìli oøíznout èerné okraje nad a pod filmem.
Nastudujte si pou¾ití filtrù <systemitem>cropdetect</systemitem> a
<systemitem>crop</systemitem> v man stránce.
</para>

<para>
Pou¾ití
<screen>mencoder <replaceable>vzorové-svcd.mpg</replaceable> -ovc lavc -lavcopts vcodec=mpeg4:autoaspect -vf crop=714:548:0:14 -oac copy -o <replaceable>výstup.avi</replaceable></screen>
</para>
</sect1>


</chapter>
