<?xml version="1.0" encoding="iso-8859-2"?>
<!-- synced with r20401 -->
<chapter id="cd-dvd">
<title>CD/DVD használat</title>

<sect1 id="drives">
<title>CD/DVD vezérlõk</title>

<para>
A modern CD-ROM meghajtók nagyon nagy sebességen mûködnek, ugyanakkor több CD-ROM
képes kisebb sebességû pörgésre is. Rengeteg oka lehet annak, hogy valaki
meg akarja megváltoztatni a CD-ROM meghajtó sebességét:
</para>

<itemizedlist>
<listitem><para>
Sok helyen írtak olvasási hibákról, melyek nagy sebességnél fordulnak elõ,
különösen rosszul nyomott CD-ROM-ok esetén. A csökkentett sebességgel megelõzheted
az adatvesztést ilyen esetben.
</para></listitem>

<listitem><para>
Sok CD-ROM idegesítõen hangos, alacsonyabb sebességen kisebb a zaj.
</para></listitem>
</itemizedlist>

<sect2 id="drives_linux">
<title>Linux</title>

<para>
Az IDE CD-ROM meghajtók sebességét a <command>hdparm</command>, a <command>setcd</command>
vagy a <command>cdctl</command> nevezetû programmal módosíthatod. Így mûködnek:
<screen>hdparm -E <replaceable>[sebesség]</replaceable> <replaceable>[cdrom eszköz]</replaceable></screen>
<screen>setcd -x <replaceable>[sebesség]</replaceable> <replaceable>[cdrom eszköz]</replaceable></screen>
<screen>cdctl -bS <replaceable>[sebesség]</replaceable></screen>
</para>

<para>
Ha SCSI emulációt használsz, az igazi IDE eszközre vonatkozóan kell
alkalmaznod a beállításokat, nem az emulált SCSI eszközre.
</para>

<para>
Ha root jogaid vannak, a következõ parancs is segíthet:
<screen>echo file_readahead:2000000 &gt; /proc/ide/<replaceable>[cdrom eszköz]</replaceable>/settings</screen>
</para>

<para>
Ez beállítja a fájl elõreolvasást 2 MB-ra, ami segít a karcos CD-ROM-ok esetében.
Ha túl nagyra állítod, a meghajtó folyton felpörög majd leáll, és drasztikus módon
csökkenni fog a teljesítménye.
A javasolt módszer a CD-ROM meghajtó <command>hdparm</command>-mal történõ beállítása:
<screen>hdparm -d1 -a8 -u1 <replaceable>[cdrom eszköz]</replaceable></screen>
</para>

<para>
Ez bekapcsolja a DMA elérést, az elõreolvasást, és az IRQ unmasking-ot (olvasd el a <command>hdparm</command>
man oldalát a bõvebb magyarázatért).
</para>

<para>
Nézd meg a &quot;<filename>/proc/ide/<replaceable>[cdrom eszköz]</replaceable>/settings</filename>&quot;
fájlt a CD-ROM tuningolásához.
</para>

<para>
A SCSI meghajtókra vonatkozóan nincs egységes módszer ezen paraméterek beállításához.
(Ismersz egyet? Mondd el nekünk is!) Van egy eszköz, ami
<ulink url="http://das.ist.org/~georg/">Plextor SCSI meghajtókkal</ulink> mûködik.
</para>

</sect2>


<sect2 id="drives_freebsd">
<title>FreeBSD</title>

<para>sebesség:
<screen>
cdcontrol [-f <replaceable>eszköz</replaceable>] speed <replaceable>[sebesség]</replaceable>
</screen>
</para>

<para>DMA:
<screen>
sysctl hw.ata.atapi_dma=1
</screen>
</para>

</sect2>

</sect1>



<sect1 id="dvd">
<title>DVD lejátszás</title>
<para>
A használható kapcsolók teljes listájáért olvasd el a man oldalt.
A szintaxis egy szabványos DVD lejátszásához a következõ:
<screen>mplayer dvd://<replaceable>&lt;sáv&gt;</replaceable> [-dvd-device <replaceable>&lt;eszköz&gt;</replaceable>]</screen>
</para>

<para>
Például:
<screen>mplayer dvd://1 -dvd-device /dev/hdc</screen>
</para>

<para>
Ha az <application>MPlayer</application>t dvdnav támogatással fordítottad, a
szintaxis ugyan ez, kivéve, hogy dvdnav://-ot kell használnod a dvd:// helyett.
</para>

<para>
Az alapértelmezett DVD eszköz a <filename>/dev/dvd</filename>. Ha a te
beállításod különbözõ, készíts egy szimbolikus linket vagy add meg a megfelelõ
eszközt a parancssorban a <option>-dvd-device</option> kapcsolóval.
</para>

<para>
Az <application>MPlayer</application> fel tudja használni a <systemitem>libdvdread</systemitem>-ot
és a <systemitem>libdvdcss</systemitem>-t is a DVD-k lejátszásához és dekódolásához.
Ez a két függvénykönyvtár a <filename class="directory">libmpdvdkit2</filename>
alkönyvtárban található az <application>MPlayer</application> forrás fájában,
nem kell õket külön telepítened. Használhatod a két függvénykönyvtár rendszer-szintû
verzióját is, de ez <emphasis role="bold">nem</emphasis> javasolt, mivel hibák forrása
lehet, a függvénykönyvtárak közötti inkompatibilítást és sebességcsökkenést okozhat.
</para>

<note><para>
Ha DVD dekódolási problémáid vannak, próbáld meg letiltani a supermount-ot vagy
bármilyen más hasonló dolgot. Néhány RPC-2 vezérlõ régió kód beállítását is megköveteli.
</para></note>

<formalpara>
<title>DVD struktúra</title>
<para>
A DVD lemezeken 2048 bájtos szektorok vannak ECC/CRC-vel. Legtöbbször UDF
fájlrendszer van egyetlen sávon, ami különbözõ fájlokat tartalmaz (kicsi
.IFO és .BUK fájlok, valamint nagy (1 GB) .VOB fájlok). Ezek igazi fájlok,
amik másolhatóak/lejátszhatóak egy nem titkosított DVD mountolt fájlrendszerérõl.
</para>
</formalpara>

<para>
Az .IFO fájlok a filmben történõ navígációhoz tartalmaznak információkat (fejezet/cím/szög
térkép, nyelvtáblázat, stb.) és szökségesek a .VOB tartalmának olvasásához és értelmezéséhez
(film). A .BUK fájlok ezek biztonsági mentései. <emphasis role="bold">Szektorokat</emphasis>
használnak mindenhol, így a lemezen nyers szektor címzést kell használni a DVD navigáláshoz
és a tartalom dekódolásához.
</para>

<para>
A DVD támogatás nyers szektor-alapú elérést igényel az eszközhöz. Sajnos (Linux
alatt) root-nak kell lenned, hogy megkapd egy fájl szektor címét. Emiatt egyáltalán
nem használjuk a kernel fájlrendszer vezérlõjét, inkább felhasználói szinten
(userspace) oldottuk meg. A <systemitem>libdvdread</systemitem> 0.9.x és a
<systemitem>libmpdvdkit</systemitem> teszi ezt lehetõvé. A kernel UDF fájlrendszer
vezérlõje nem kell, mivel saját beépített UDF fájlrendszer vezérlõjük van.
Sõt, még mountolni sem kell a DVD-t, mivel csak nyers szektor-alapú címzést
használnak.
</para>

<para>
Néha a <filename>/dev/dvd</filename> nem olvasható a felhasználók által, így
a <systemitem>libdvdread</systemitem> szerzõi egy emulációs réteget készítettek,
ami átalakítja a szektor címeket fájlnév+eltolásra, így nyers elérést emulál a
mountolt fájlrendszeren vagy akár a merevlemezen is.
</para>

<para>
A <systemitem>libdvdread</systemitem> elfogadja a mountolás helyét is az eszköz
neve helyett a nyers címzéshez, az eszköz nevét a <filename>/proc/mounts</filename>
fájlból olvassa ki. Solaris-ra lett kifejlesztve, ahol az eszköz nevek dinamikusan
vannak lefoglalva.
</para>

<formalpara>
<title>DVD dekódolás</title>
<para>
A DVD dekódolást a <systemitem>libdvdcss</systemitem> végzi. A módszer
megadható a <envar>DVDCSS_METHOD</envar> környezeti változó segítségével,
mely beállítható kulcsra, lemezre vagy címre.
</para>
</formalpara>

<para>
Ha semmi sincs megadva, akkor a következõ módon próbálkozik (alapértelmezett:
kulcs, sáv kérés):
</para>

<orderedlist>
<listitem><para>
<emphasis role="bold">busz kulcs</emphasis>: Ez a kulcs a hitelesítés során
kerül megállapításra (ioctl-ek és egyéb kulcs cserék hosszú sora, titkosítási
cucc) és a sáv és a lemez kulcsok titkosítására használják, mielõtt kiküldenék
a védtelen buszra (hogy megelõzzés az eavesdropping-ot). A busz kulcs szükséges
a titkosított lemez kulcs megszerzéséhez és visszakódolásához.
</para></listitem>

<listitem><para>
<emphasis role="bold">cache-elt kulcs</emphasis>: Az <application>MPlayer</application>
végignézi a már cache-elt sáv kulcsokat, amik a <filename class="directory">~/.dvdcss</filename>
könyvtárban tárolódnak (gyors ;).
</para></listitem>

<listitem><para>
<emphasis role="bold">kulcs</emphasis>: Ha nincs cache-lt kulcs, az
<application>MPlayer</application> megpróbálja visszakódolni a lemez kulcsot
a beépített lejátszó kulcsok gyûjteményének segítségével.
</para></listitem>

<listitem><para>
<emphasis role="bold">lemez</emphasis>: Ha a kulcs metódus sikertelen
(pl. nincs beépített lejátszó kulcs), az <application>MPlayer</application>
feltöri a lemez kulcsot egy brute force algoritmussal. Ez az eljárás
intenzív CPU használatot eredményez és 64 MB memóriát igényel (16M 32Bit-es
bejegyzések a hash táblához) az ideiglenes adatok tárolásához. Ez a módszer
mindig mûködik (lassú).
</para></listitem>

<listitem><para>
<emphasis role="bold">sáv kérés</emphasis>: a lemez kulccsal az
<application>MPlayer</application> az <systemitem>ioctl()</systemitem> segítségével
lekéri a titkosított sáv kulcsokat, amik <emphasis>rejtett szektorokban</emphasis> találhatók.
Az RPC-2 meghajtók régió védelme is ebben a lépésben van megvalósítva, ezért
ez hibázhat ilyen meghajtókon. Ha sikerül, a sáv kulcsokat dekódolja a busz és
lemez kulccsal.
</para></listitem>

<listitem><para>
<emphasis role="bold">sáv</emphasis>: Ezt a metódust akkor használjuk, ha
a sáv kérés sikertelen és nem a DVD meghajtóval történõ kulcs cserén alapul.
Ez egy crypto támadást indít, hogy kitalálja közvetlenül a sáv kulcsot (egy,
a visszakódolt VOB tartalomban ismétlõdõ minta megkeresésével, azt feltételezve,
hogy az elsõ titkosított bájtnak megfelelõ sima szöveg ezen minta folytatása).
Ezt a metódust úgy is ismerik, mint &quot;ismert tiszta szöveg támadás&quot;
vagy &quot;DeCSSPlus&quot;. Ritka esetben sikertelen lehet, mert nincs elég
titkosított adat a lemezen a statisztikai támadáshoz vagy mert a kulcs megváltozik
a sáv közepén. Ez a módszer az egyetlen járható út a merevlemezen tárolt DVD-k
visszakódolásához vagy a rossz régió kódú DVD-k RPC2 meghajtóban történõ
lejátszásához (lassú).
</para></listitem>
</orderedlist>

<para>
Az RPC-1 DVD meghajtók csak szoftveresen védik a régió kódot. Az RPC-2 meghajtókban
hardveres védelem van, ami csak 5 változtatást engedélyez. Szükséges/javasolt
a firmware frissítése RPC-1-re ha RPC-2-es DVD meghajtód van. Megpróbálhatsz
keresni firmware frissítést az Interneten,
<ulink url="http://forum.rpc-1.com/dl_all.php">ez a firmware fórum</ulink>
egy jó kiinduló pont lehet. Ha nincs firmware javítás a te meghajtódhoz, használd
a <ulink url="http://linvdr.org/projects/regionset/">regionset eszközt</ulink>
a DVD meghajtód régió kódjának beállításához (Linux alatt).
<emphasis role="bold">Figyelem</emphasis>: Csak 5 alkalommal állíthatod át a régió kódot.
</para>
</sect1>



<sect1 id="vcd">
<title>VCD lejátszás</title>
<para>
A használható kapcsolók teljes listájáért olvasd el a man oldalt. Egy szabványos
Video CD (VCD) szintaxisa a következõ:
<screen>mplayer vcd://<replaceable>&lt;sáv&gt;</replaceable> [-cdrom-device <replaceable>&lt;eszköz&gt;</replaceable>]</screen>
Például:
<screen>mplayer vcd://2 -cdrom-device /dev/hdc</screen>
Az alapértelmezett VCD eszköz a <filename>/dev/cdrom</filename>. Ha a te beállításaid
különbözõek, készíts egy szimbolikus linket vagy add meg a megfelelõ eszközt a
parancssorban a <option>-cdrom-device</option> kapcsolóval.
</para>

<note><para>
A Plextor és néhány Toshiba SCSI CD-ROM meghajtónak borzalmas a teljesítménye
CVD olvasáskor. Ez azért van, mert a CDROMREADRAW <systemitem>ioctl</systemitem>
nincs teljesen implementálva ezekben a meghajtókban. Ha ismered a SCSI programozást,
kérlek <ulink url="../../tech/patches.txt">segíts nekünk</ulink> egy általános
SCSI támogatás elkészítésében VCD-khez.
</para></note>

<para>
Addig is kinyerheted az adatokat a VCD-rõl a
<ulink url="http://ftp.ntut.edu.tw/ftp/OS/Linux/packages/X/viewers/readvcd/">readvcd</ulink>
segítségével, majd az eredményül kapott fájlt lejátszhatod az <application>MPlayer</application>rel.
</para>

<formalpara>
<title>VCD struktúra</title>
<para>
Egy Video CD (VCD) CD-ROM XA szektorokból áll, pl. CD-ROM 2-es módban
1-es és 2-es formátumú sávok:</para>
</formalpara>

<itemizedlist>
<listitem><para>
Az elsõ sáv 2-es módban, 2-es formátumban van, ami azt jelenti, hogy L2
hibajavítást használ. A sáv ISO-9660 fájlrendszert tartalmaz 2048
bájt/szektorral. Ez a fájlrendszer VCD metaadat információkat tartalmaz,
valamint gyakran a menükben alkalmazott képkockákat. A menük MPEG
szegmensei is ezen az elsõ sávon tárolhatóak, de az MPEG-eket fel kell
osztani 150 szektoros csonkokra. Az ISO-9660 fájlrendszer tartalmazhat
egyéb fájlokat vagy programokat, amik a VCD mûködése szempontjából nem
lényegesek.
</para></listitem>

<listitem><para>
A második és a további sávok általában nyers 2324 bájt/szektor formátumú
MPEG (film) sáv, mely egy MPEG PS adat csomagot tartalmaz szektoronként.
Ezek 2-es mód 1-es formátumban vannak, így több adatot tárolnak szektoronként
némi hibajavítás elveszítése árán. Lehet CD-DA sáv is a VCD-n az elsõ
sáv után. Némelyik operációs rendszeren van egy kis csalás, amivel ezek
a nem-ISO-9660 sávok megjelennek a fájlrendszerben. Más operációs
rendszereken, például GNU/Linux-on ez nem így van (még). Itt az MPEG
adat <emphasis role="bold">nem mountolható</emphasis>. Mivel a legtöbb
film ilyen típusú sávon belül van, elõször próbáld ki a <option>vcd://2</option>
-t.</para></listitem>

<listitem><para>
Léteznek olyan VCD lemezek is, melyeken nincs meg az elsõ sáv (egy sáv és
egyáltalán nincs fájlrendszer). Ezek szintén lejátszhatóak, de nem lehet
õket becsatolni.
</para></listitem>

<listitem><para>A Video CD szabvány definícióját a Philips "Fehér könyv"-nek
nevezte el és nem szabadon hozzáférhetõ, a Philipstõl kell megvásárolni.
A Video CD-krõl sokkal részletesebb információt találhatsz a
<ulink url="http://www.vcdimager.org/pub/vcdimager/manuals/0.7/vcdimager.html#SEC4">vcdimager dokumentációjában</ulink>.
</para></listitem>

</itemizedlist>

<formalpara>
<title>A .DAT fájlokról</title>
<para>
A becsatolt VCD elsõ sávján látható ~600 MB fájl valójában nem igazi fájl!
Ez egy úgynevezett ISO átjáró, azért hozták létre, hogy a Windows kezelni
tudja ezen sávokat (a Windows semmilyen módon sem engedi a közvetlen eszköz
elérést az alkalmazásoknak). Linux alatt nem tudod átmásolni vagy lejátszani
az ilyen fájlokat (szemét van bennük). Windows alatt lehetséges, mivel az
iso9660 vezérlõje a sávok nyers olvasását emulálja ebben a fájlban. A .DAT
fájlok lejátszásához szükséged lesz egy kernel vezérlõre, ami a PowerDVD
Linuxos verziójában található. Ez egy módosított iso9660 fájlrendszer vezérlõt
(<filename>vcdfs/isofs-2.4.X.o</filename>) tartalmaz, ami képes a nyers sáv
emulációra ezen ál .DAT fájlon keresztül. Ha az õ vezérlõjük segítségével
csatolod be a lemezt, át tudod másolni és le tudod játszani a .DAT fájlt az
<application>MPlayer</application>rel. A Linux kernel szabványos iso9660
vezérlõjével ez nem megy! Használd a <option>vcd://</option>-t helyette.
VCD másolásához alternatíva az új <ulink url="http://www.elis.rug.ac.be/~ronsse/cdfs/">cdfs</ulink>
kernel vezérlõ (nem része a hivatalos kernelnek) ami a CD meneteket kép fájlok
formájában mutatja, és a <ulink url="http://cdrdao.sf.net/">cdrdao</ulink>,
egy bitrõl-bitre grabbelõ/másoló program.
</para>
</formalpara>
</sect1>
</chapter>
