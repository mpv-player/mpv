Tools required for building the documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* DocBook 4.1.2 or later
* The DocBook XML DTD (also known as DocBk XML)
* DocBook XSL stylesheets -- version 1.50.0 or later is recommended.

I am not quite sure which tools work, but I used the following
ones successfully, so they are required:

* xmllint (part of libxml2) is used for validation.
* xsltproc (part of libxslt1) is used for transforming XML files into HTML
  files.  Version 1.0.18 or later is recommended.

Also it's possible to use the Saxon XSLT Processor. Russian translator
used it (version 6.4.4) for a while. To enable it change USE_SAXON to 1 in
the Makefile.


Installing the required tools from source
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1) Download libxslt AND libxml2 packages from
   http://xmlsoft.org/XSLT/downloads.html

   Installing them should be straightforward, executing the usual "./configure"
   and "make" then "make install" commands.


2) Download the docbook-xml package from http://www.oasis-open.org/docbook/xml/
   Use the newest version. The URL will be something like this:

	http://www.oasis-open.org/docbook/xml/4.2/docbook-xml-4.2.zip

   Extract this package into a directory, enter it, and execute the following
   commands:

	mkdir -p /usr/share/sgml/docbook/dtd/xml/4.2/
	cp -r * /usr/share/sgml/docbook/dtd/xml/4.2/


3) Download the docbook-xsl package from
   http://prdownloads.sourceforge.net/docbook/

   Use the newest version. The URL will be something like this:

	http://prdownloads.sourceforge.net/docbook/docbook-xsl-1.62.0.tar.gz

   Extract this package into a directory, enter it, and execute the following
   commands:

	mkdir -p /usr/share/sgml/docbook/stylesheet/xsl/nwalsh
	cp -r VERSION common html lib \
		/usr/share/sgml/docbook/stylesheet/xsl/nwalsh


Building the documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~

1) Before trying to build the documentation, run

	make test

   to see if everything is set up properly.  If something goes wrong,
   check the Configuration section of the toplevel Makefile and adjust
   the variables.


2) Now simply run

	make all

   to build the documentation.


A few words about SGML catalog files
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

As far as I know, the document type declaration in XML files requires
both a public and a system identifier.  For example:

<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
	"/usr/share/sgml/docbook/dtd/xml/4.1.2/docbookx.dtd">

where

	"-//OASIS//DTD DocBook XML V4.1.2//EN"

is the public, and

	"/usr/share/sgml/docbook/dtd/xml/4.1.2/docbookx.dtd"

is the system identifier.

The problem is that the system identifier is most probably system-dependent.
To avoid the need to manually fix the system identifiers before building the
documentation, I've decided to use SGML catalogs.  If you have your catalogs
set up correctly, xmllint and xsltproc will use them to find the DTDs
based on the public identifiers.

Note that this works only if public identifiers override system identifiers
(i.e. the catalog file must contain 'OVERRIDE YES').  (I had no problem with
these on my system, since the Debian people took care of everything. ;-))


--
Andras Mohari
