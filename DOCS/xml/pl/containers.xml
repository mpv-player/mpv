<?xml version="1.0" encoding="iso-8859-2"?>
<!-- synced with r20341 -->
<!-- Opiekun: Cobra -->
<chapter id="formats">
<title>Kontenery</title>

<para>
Na pocz±tek wa¿ne jest wyja¶nienie pewnego czêsto pope³nianego b³êdu.
Kiedy ludzie widz± plik o rozszerzeniu <filename>.AVI</filename>,
automatycznie stwierdzaj±, ¿e to nie jest plik MPEG. Nie jest to prawda.
Przynajmniej niezupe³nie. W przeciwieñstwie do popularnego stwierdzenia,
plik taki <emphasis>mo¿e</emphasis> zawieraæ video MPEG-1.
</para>

<para>
Widzisz, <emphasis role="bold">kodek</emphasis> to nie to samo, co
<emphasis role="bold">format kontenerów</emphasis>.
Przyk³ady <emphasis role="bold">kodeków</emphasis> video: MPEG-1, MPEG-2,
MPEG-4 (DivX), Indeo5, 3vix.
Przyk³ady <emphasis role="bold">kontenerów</emphasis> plików: MPG, AVI, ASF.
</para>

<para>
W teorii, mo¿esz umie¶ciæ video OpenDivX i d¼wiêk MP3 w
<emphasis role="bold">kontenerze MPG</emphasis>. Wiêkszo¶æ odtwarzaczy
nie bêdzie jednak w stanie go odtworzyæ, gdy¿ spodziewaj± siê obrazu MPEG-1 i
d¼wiêku MP2 (w przeciwieñstwie do <emphasis role="bold">AVI</emphasis>,
<emphasis role="bold">MPG</emphasis> nie ma odpowiednich pól do opisu jego
strumieni audio i video). Mo¿esz równie¿ umie¶ciæ video MPEG-1 w pliku
AVI. <ulink url="http://ffmpeg.org/">FFmpeg</ulink> i
<link linkend="mencoder"><application>MEncoder</application></link> potrafi±
tworzyæ takie pliki.
</para>


<sect1 id="video-formats">
<title>Formaty video</title>

<sect2 id="mpg-vob-dat">
<title>Pliki MPEG</title>

<para>
Pliki MPEG spotykamy w ró¿nych odmianach:
</para>

<itemizedlist>
<listitem><simpara>
  MPG: To jest najbardziej <emphasis role="bold">podstawowa</emphasis> forma
  plików MPEG. Zawiera video MPEG-1 i audio MP2 (MPEG-1 warstwa 2) lub rzadziej
  MP1.
  </simpara></listitem>
<listitem><simpara>
  DAT: To dok³adnie ten sam format, co MPG, tylko z innym rozszerzeniem. Jest
  on u¿ywany na p³ytach <emphasis role="bold">Video CD</emphasis>. W zwi±zku
  ze sposobem tworzenia p³yt VCD i struktury Linuksa, pliki DAT nie mog± byæ
  odtwarzane ani kopiowane z VCD jak zwyk³e pliki. Musisz u¿yæ opcji
  <option>vcd://</option> by odtworzyæ Video CD.
  </simpara></listitem>
<listitem><simpara>
  VOB: To format pliku MPEG na p³ytach <emphasis role="bold">DVD</emphasis>.
  Jest to to samo, co MPG, plus mo¿liwo¶æ umieszczenia w nim napisów lub
  d¼wiêku nie-MPEG (AC3). Zawiera zakodowany strumieñ obrazu MPEG-2 i przewa¿nie
  d¼wiêk AC3, lecz dozwolone s± tak¿e DTS, MP2 i nieskompresowane LPCM.
  <emphasis role="bold">Przejrzyj sekcjê <link linkend="dvd">DVD</link></emphasis>!
  </simpara></listitem>
<listitem><simpara>
  TY: To jest strumieñ TiVo MPEG. Zawiera on dane MPEG PES strumieni audio
  i video, oraz dodatkowe informacje jak napisy Closed Caption. Ten format nie
  jest strumieniem programu MPEG, ale zamkniêtym formatem stworzonym przez
  TiVo. Wiêcej informacji o formacie strumienia TiVo mo¿na uzyskaæ na
  <ulink url="http://dvd-create.sourceforge.net/tystudio/tystream.shtml">
  stronie TyStudio</ulink>.
  </simpara></listitem>
</itemizedlist>

<para>
Serie klatek tworz± niezale¿ne grupy w plikach MPEG. To oznacza, ¿e mo¿esz
ci±æ/³±czyæ plik MPEG za pomoc± zwyk³ych narzêdzi plikowych (typu
<command>dd</command>, <command>cut</command>) i pozostaje on ca³kowicie
funkcjonalny.
</para>

<para>
Jedn± wa¿n± cech± plików MPG jest to, ¿e zawieraj± pole opisuj±ce stosunek
szeroko¶ci do wysoko¶ci obrazu. Na przyk³ad pliki SVCD zawieraj± obraz
o rozdzielczo¶ci 480x480, a w nag³ówku pole to jest ustawione na 4:3, wiêc
odtwarzane s± w 640x480. W plikach AVI czêsto brakuje tego pola, wiêc musz± byæ
skalowane w trakcie kodowania lub odtwarzane z opcj± <option>-aspect</option>
</para>
</sect2>


<sect2 id="avi">
<title>Pliki AVI</title>

<para>
Zaprojektowane przez Microsoft <emphasis role="bold">pliki AVI
(Audio Video Interleaved)</emphasis> to szeroko stosowany wielofunkcyjny format
aktualnie u¿ywany g³ównie dla video MPEG-4 (DivX i DivX4). Ma on wiele wad i
niedoci±gniêæ (np. przy strumieniowaniu). Obs³uguje jeden strumieñ video i od 0
do 99 strumieni audio i mo¿e mieæ co najwy¿ej 2 GB, lecz istnieje rozszerzenie,
zwane <emphasis role="bold">OpenDML</emphasis>, które pozwala na osi±gniêcie
wiêkszych plików.
Aktualnie Microsoft usilnie zniechêca do stosowania AVI i zaleca ASF/WMV.
Nie ¿eby to kogo¶ obchodzi³o...
</para>

<para>
Istnieje hack, który pozwala plikom AVI zawieraæ strumieñ audio Ogg Vorbis,
ale powoduje to ich niekompatybilno¶æ ze zwyk³ymi AVI.
<application>MPlayer</application> obs³uguje odtwarzanie takich plików.
Skoki s± równie¿ zaimplementowane, lecz powa¿nie ograniczone poprzez
¼le zakodowane pliki z pomieszanymi nag³ówkami.
Niestety jedyny program, który potrafi tworzyæ takie pliki -
<application>NanDub</application> - ma z tym problem.
</para>

<note>
<para>
Kamery DV tworz± surowe strumienie DV, które s± konwertowane przez narzêdzia
do zgrywania DV do dwóch ró¿nych typów plików AVI. Pliki te zawieraj± wtedy
albo osobne strumienie audio i video, które <application>MPlayer</application>
potrafi odtwarzaæ lub surowy strumieñ DV, którego obs³uga jest w trakcie
rozwoju.
</para>
</note>

<para>
Istniej± dwa typy plików AVI:
<itemizedlist>
<listitem><simpara>
  <emphasis role="bold">Z przeplotem:</emphasis> Zawarto¶æ audio i video jest
  przepleciona. Jest to standardowy typ - zalecany i przewa¿nie u¿ywany.
  Niektóre narzêdzia tworz± przeplatane pliki AVI ze z³± synchronizacj±.
  <application>MPlayer</application> wykrywa je jako przeplatane, ale powoduje
  to utratê synchronizacji A/V (najczê¶ciej przy skokach). Pliki te powinny
  byæ odtwarzane jako bez przeplotu (opcja <option>-ni</option>).
  </simpara></listitem>
<listitem><simpara>
  <emphasis role="bold">Bez przeplotu:</emphasis> Najpierw umieszczony jest
  ca³y strumieñ video, a potem ca³y strumieñ audio. Wymaga to wiêc du¿o
  "chodzenia" po pliku, co powoduje, ¿e trudno jest je odtwarzaæ z sieci lub z
  CD-ROMów.
  </simpara></listitem>
</itemizedlist>
</para>

<para>
<application>MPlayer</application> obs³uguje dwie metody synchronizacji
dla plików AVI:
<itemizedlist>
<listitem><simpara>
  <emphasis role="bold">oparte na bps (bitach na sekundê):</emphasis> Oparta
  jest na liczbie bitów/próbek na sekundê strumieni audio/video. Metoda ta jest
  stosowana przez wiêkszo¶æ odtwarzaczy, w³±czaj±c w to
  <ulink url="http://avifile.sf.net">avifile</ulink> oraz
  <application>Windows Media Player</application>. Pliki z uszkodzonymi
  nag³ówkami i pliki z d¼wiêkiem VBR (Variable Bitrate - zmienne
  tempo bitowe) utworzone za pomoc± niekompatybilnego z VBR programu koduj±cego
  spowoduj± desynchronizacjê A/V przy tej metodzie (g³ównie przy skokach).
  </simpara></listitem>
<listitem><simpara>
  <emphasis role="bold">oparte na przeplocie:</emphasis> Nie korzysta z
  informacji o tempie bitowym z nag³ówka, lecz zamiast tego u¿ywa wzglêdnej
  pozycji przeplecionych fragmentów audio i video, dziêki czemu ¼le zakodowane
  pliki z d¼wiêkiem VBR mo¿na normalnie odtwarzaæ.
  </simpara></listitem>
</itemizedlist>
</para>

<para>
Ka¿dy kodek video i audio jest dozwolony, lecz nale¿y zauwa¿yæ, ¿e d¼wiêk
VBR nie jest zbyt dobrze obs³ugiwany przez wiêkszo¶æ odtwarzaczy. Format pliku
co prawda pozwala na u¿ycie d¼wiêku VBR, lecz wiêkszo¶æ odtwarzaczy spodziewa
siê d¼wiêku CBR (Constant Bitrate - sta³e tempo bitowe), przez co
zawiod± przy VBR. VBR nie jest powszechny i specyfikacja AVI Microsoftu opisuje
jedynie CBR. Zauwa¿y³em równie¿, ¿e wiêkszo¶æ enkoderów/multiplekserów AVI
tworzy z³e pliki z d¼wiêkiem VBR. Istniej± jedynie dwa wyj±tki potwierdzaj±ce
tê regu³ê:
<application><application>NanDub</application></application> oraz
<link linkend="mencoder"><application>MEncoder</application></link>.
</para>
</sect2>


<sect2 id="asf-wmv">
<title>Pliki ASF/WMV</title>
<para>
ASF (Active Streaming Format - Aktywny Format Strumieniowania) pochodzi z
Microsoftu. Stworzyli oni dwa warianty ASF: v1.0 i v2.0. v1.0 jest u¿ywana
przez ich narzêdzia medialne (<application>Windows Media Player</application>
oraz <application>Windows Media Encoder</application>) i jest bardzo tajna.
v2.0 jest opublikowana i opatentowana :). Oczywi¶cie ró¿ni± siê one znacz±co i
nie ma pomiêdzy nimi ¿adnej kompatybilno¶ci (kolejna zagrywka legalistyczna).
<application>MPlayer</application> obs³uguje jedynie v1.0, gdy¿ nikt jeszcze nie
widzia³ ¿adnego pliku v2.0 :). Zauwa¿, ¿e dzisiejsze pliki ASF maj± rozszerzenia
<filename>.WMA</filename> lub <filename>.WMV</filename>.
</para>
</sect2>


<sect2 id="mov">
<title>Pliki QuickTime/MOV</title>

<para>
Formaty te zosta³y zaprojektowane przez Apple i mog± zawieraæ dowolny kodek,
CBR lub VBR. Maj± przewa¿nie rozszerzenie <filename>.QT</filename> lub
<filename>.MOV</filename>. Warto zauwa¿yæ, ¿e grupa MPEG-4 wybra³a QuickTime
jako zalecany format pliku dla MPEG-4, a ich pliki MOV maj± rozszerzenie
<filename>.MPG</filename> lub <filename>.MP4</filename> (interesuj±ce jest to, ¿e
strumienie w tych plikach to w rzeczywisto¶ci pliki MPG i AAC. Mo¿esz nawet je
wyci±gn±æ za pomoc± opcji <option>-dumpvideo</option> oraz
<option>-dumpaudio</option>).
</para>
</sect2>


<sect2 id="vivo">
<title>Pliki VIVO</title>

<para>
<application>MPlayer</application> szczê¶liwie demultipleksuje pliki VIVO.
Najwiêksz± niedogodno¶ci± formatu jest to, ¿e nie ma on bloku indeksu
ani sta³ego rozmiaru pakietu czy bajtów synchronizacji, a wiêkszo¶æ plików
nie ma nawet klatek kluczowych, wiêc zapomnij o skakaniu po filmie!
</para>

<para>
Kodek video plików VIVO/1.0 to standardowy <emphasis role="bold">h.263</emphasis>.
Kodek video plików VIVO/2.0 to zmodyfikowany, niestandardowy
<emphasis role="bold">h.263v2</emphasis>. D¼wiêk jest ten sam i mo¿e to byæ
<emphasis role="bold">g.723 (standardowy)</emphasis> lub
<emphasis role="bold">Vivo Siren</emphasis>.
</para>
</sect2>


<sect2 id="fli">
<title>Pliki FLI</title>
<para>
<emphasis role="bold">FLI</emphasis> jest bardzo starym formatem u¿ywanym przez
Autodesk Animator,
lecz jest to powszechnie stosowany w sieci format do krótkich animacji.
<application>MPlayer</application> demultipleksuje i dekoduje pliki FLI i
potrafi nawet po nich skakaæ (u¿yteczne przy zapêtlaniu za pomoc± opcji
<option>-loop</option>). Pliki FLI nie zawieraj± klatek kluczowych, wiêc obraz
bêdzie trochê za¶miecony przez krótk± chwilê po skoku.
</para>
</sect2>


<sect2 id="realmedia">
<title>Pliki RealMedia (RM)</title>

<para>
Tak, <application>MPlayer</application> potrafi czytaæ (demultipleksowaæ)
pliki RealMedia (<filename>.rm</filename>).
</para>
</sect2>


<sect2 id="nuppelvideo">
<title>Pliki NuppelVideo</title>
<para>
<ulink url="http://frost.htu.tuwien.ac.at/~roman/nuppelvideo/">NuppelVideo</ulink>
jest narzêdziem do zgrywania TV (AFAIK :). <application>MPlayer</application>
potrafi czytaæ jego pliki <filename>.NUV</filename> (tylko NuppelVideo 5.0).
Pliki te mog± zawieraæ klatki: nieskompresowane YV12, skompresowane YV12+RTJpeg,
skompresowane YV12 RTJpeg+lzo i skompresowane YV12+lzo.
<application>MPlayer</application> dekoduje je (a nawet
<emphasis role="bold">koduje</emphasis> za pomoc±
<application>MEncodera</application> do MPEG-4 (DivX) itp!) wszystkie.
Dzia³aj± równie¿ skoki.
</para>
</sect2>


<sect2 id="yuv4mpeg">
<title>Pliki yuv4mpeg</title>
<para>
<ulink url="http://mjpeg.sf.net">yuv4mpeg / yuv4mpeg2</ulink>
to format plików stosowany przez
<ulink url="http://mjpeg.sf.net">programy mjpegtools</ulink>.
Mo¿esz zgrywaæ, produkowaæ, filtrowaæ lub kodowaæ video w tym formacie za pomoc±
tych narzêdzi. Format ten jest w rzeczywisto¶ci sekwencj± nieskompresowanych
obrazów YUV 4:2:0.
</para>
</sect2>


<sect2 id="film">
<title>Pliki FILM</title>
<para>
Format ten jest u¿ywany przez stare gry CD-ROM na Sega Saturn.
</para>
</sect2>


<sect2 id="roq">
<title>Pliki RoQ</title>
<para>
Pliki RoQ to pliki multimedialne u¿ywane w niektórych grach ID, np.
Quake III czy Return to Castle Wolfenstein.
</para>
</sect2>


<sect2 id="ogg">
<title>Pliki OGG/OGM</title>
<para>
Jest to nowy format plików z <ulink url="http://www.xiph.org">Xiphophorus</ulink>.
Mo¿e zawieraæ dowolne kodeki audio i video, CBR lub VBR. Bêdziesz potrzebowa³
zainstalowanych bibliotek <systemitem class="library">libogg</systemitem>
oraz <systemitem class="library">libvorbis</systemitem> zanim skompilujesz
<application>MPlayera</application> by móc go odtwarzaæ.
</para>
</sect2>


<sect2 id="sdp">
<title>Pliki SDP</title>
<para>
<ulink url="ftp://ftp.rfc-editor.org/in-notes/rfc2327.txt">SDP</ulink>
to format opisu strumieni RTP audio lub video bêd±cy standardem IETF.
(Wymagane jest &quot;<ulink url="http://www.live555.com/mplayer/">LIVE555 Streaming Media</ulink>&quot;.)
</para>
</sect2>


<sect2 id="pva">
<title>Pliki PVA</title>
<para>
PVA to format MPEGo-podobny u¿ywany przez oprogramowanie kart DVB (np.:
<application>MultiDec</application> lub <application>WinTV</application> pod
Windows).
</para>
</sect2>


<sect2 id="nsv">
<title>Pliki NSV</title>
<para>
NSV (NullSoft Video) jest formatem plików u¿ywanym przez odtwarzacz
<application>Winamp</application> do strumieniowania audio i video.
Video to VP3, VP5 lub VP6, audio to MP3, AAC lub VLB.
Wersja tylko-audio NSV ma rozszerzenie <filename>.nsa</filename>.
<application>MPlayer</application> potrafi odtwarzaæ zarówno strumienie, jak i pliki NSV.
Proszê zauwa¿yæ, ¿e wiêkszo¶æ plików ze
<ulink url="http://www.winamp.com">strony Winamp'a</ulink> korzysta z audio VLB, które
jeszcze nie jest dekodowane przez <application>MPlayera</application>. Oprócz tego
strumienie z tej strony potrzebuj± dodatkowej warstwy depakietowania, która nie jest
jeszcze zaimplementowana (plików tych i tak nie da siê odtworzyæ ze wzglêdu na 
audio VLB).
</para>
</sect2>


<sect2 id="matroska">
<title>Pliki matroska</title>
<para>
Matroska jest otwartym formatem przechowywania.
Wiêcej informacji na
<ulink url="http://www.matroska.org/">oficjalnej stronie</ulink>.
</para>
</sect2>


<sect2 id="nut">
<title>Pliki NUT</title>
<para>
NUT jest formatem przechowywania opracowanym przez ludzi
z <application>MPlayera</application> i <application>FFmpeg</application>. Oba
projekty go obs³uguj±.
Wiêcej informacji na
<ulink url="http://www.nut.hu/">oficjalnej stronie</ulink>.
</para>
</sect2>


<sect2 id="gif">
<title>Pliki GIF</title>
<para>
Format <emphasis role="bold">GIF</emphasis> jest powszechnym formatem zapisu
grafiki sieciowej. Istniej± dwie wersje specyfikacji GIF: GIF87a oraz GIF89a.
G³ówn± ró¿nic± jest to, ¿e GIF89a pozwala na animacjê.
<application>MPlayer</application> obs³uguje oba
formaty plików za pomoc± biblioteki <systemitem class="library">libungif</systemitem>
lub innej, kompatybilnej z libgif biblioteki. Nieanimowane GIFy s± wy¶wietlane
jako filmy o pojedynczej klatce. (U¿yj opcji <option>-loop</option> oraz
<option>-fixed-vo</option> by wy¶wietliæ je d³u¿ej.)
</para>

<para>
<application>MPlayer</application> obecnie nie pozwala na skoki w plikach GIF.
Pliki GIF bowiem niekoniecznie musz± mieæ sta³ego rozmiaru klatki, ani sta³ej
prêdko¶ci odtwarzania. Raczej ka¿da klatka jest niezale¿nego rozmiaru i ma
zostaæ umiejscowiona w odpowiednim miejscu na polu o ustalonym rozmiarze.
Prêdko¶æ odtwarzania jest kontrolowana za pomoc± opcjonalnego bloku przed
ka¿d± klatk±, która ustala opó¼nienie kolejnej klatki w setnych sekundy.
</para>

<para>
Standardowe pliki GIF zawieraj± 24-bitowe klatki RGB z co najwy¿ej 8-bitow±
indeksowan± palet±. Klatki te s± przewa¿nie kompresowane za pomoc± LZW, lecz
niektóre kodery produkuj± nieskompresowane klatki by unikn±æ problemów
patentowych w zwi±zku z kompresj± LZW.
</para>

<para>
Je¶li Twoja dystrybucja nie zawiera biblioteki <systemitem class="library">libungif</systemitem>,
pobierz j± ze
<ulink url="http://sourceforge.net/projects/libungif">strony domowej libungif</ulink>.
By uzyskaæ szczegó³owe informacje techniczne, zajrzyj do
<ulink url="http://www.w3.org/Graphics/GIF/spec-gif89a.txt">specyfikacji GIF89a</ulink>.
</para>
</sect2>
</sect1>

<!-- ********** -->

<sect1 id="audio-formats">
<title>Formaty audio</title>

<para>
<application>MPlayer</application> jest odtwarzaczem
<emphasis role="bold">filmów</emphasis>, a nie
<emphasis role="bold">mediów</emphasis>. Potrafi jednak odtwarzaæ niektóre pliki
audio (s± one wymienione w sekcjach poni¿ej).
Nie jest to jednak zalecane zastosowanie <application>MPlayera</application>.
Powiniene¶ raczej u¿yæ <ulink url="http://www.xmms.org">XMMSa</ulink>.
</para>

<sect2 id="mp3">
<title>Pliki MP3</title>
<para>
Mo¿esz mieæ pewne problemy przy odtwarzaniu niektórych plików
MP3, które <application>MPlayer</application> b³êdnie rozpozna jako
MPEG i odtworzy je nieprawid³owo lub nie odtworzy ich wcale. Nie da siê
tego naprawiæ bez porzucenia odtwarzania uszkodzonych plików
MPEG i tak prawdopodobnie zostanie w najbli¿szej przysz³o¶ci. Opcja
<option>-demuxer</option> opisana na stronie man mo¿e pomóc Ci w takich
przypadkach.
</para>
</sect2>

<sect2 id="ogg-vorbis">
<title>Pliki OGG/OGM (Vorbis)</title>
<para>
Wymaga poprawnie zainstalowanych bibliotek
<systemitem class="library">libogg</systemitem> i
<systemitem class="library">libvorbis</systemitem>.
</para>
</sect2>

<sect2 id="cdda">
<title>CD audio</title>
<para>
<application>MPlayer</application> potrafi korzystaæ z programu
<application>cdparanoia</application> do odtwarzania CDDA (Audio CD). Sekcja
ta nie zawiera spisu mo¿liwo¶ci programu <application>cdparanoia</application>.
</para>

<para>
Zajrzyj do strony man i przeczytaj opis opcji <option>-cdda</option>, która mo¿e
zostaæ wykorzystana do przekazania opcji do programu
<application>cdparanoia</application>.
</para>
</sect2>

<sect2 id="xmms">
<title>XMMS</title>
<para>
<application>MPlayer</application> potrafi korzystaæ z wtyczek wej¶cia z
programu <application>XMMS</application> do odtwarzania wielu formatów. Istniej±
wtyczki do muzyczek z gier na SNES, muzyczek SID (z Commodore 64), wielu
formatów Amigi, .xm, .it, VQF, musepack, Bonk, shorten i wielu innych. Mo¿esz
znale¼æ je na <ulink url="http://www.xmms.org/plugins.php?category=input">Stronie
wtyczek wej¶ciowych do XMMS</ulink>.
</para>

<para>
Do obs³ugi tej mo¿liwo¶ci musisz mieæ <application>XMMSa</application> i
skompilowaæ <application>MPlayera</application> za pomoc±
<filename>./configure --enable-xmms</filename>. Je¶li to nie zadzia³a, byæ mo¿e
musisz ustawiæ ¶cie¿ki do wtyczek i bibliotek <application>XMMSa</application>
rêcznie za pomoc± opcji konfiguracji <option>--with-xmmsplugindir</option> i
<option>--with-xmmslibdir</option>
</para>
</sect2>
</sect1>
</chapter>
