<?xml version="1.0" encoding="iso-8859-1"?>
<chapter id="ports" xreflabel="Ports">
<title>Portaciones</title>

<sect1 id="linux">
<title>Linux</title>
<para>
La principal plataforma de desarrollo es Linux en x86, sin embargo
<application>MPlayer</application> funciona en muchas otras portaciones de Linux.
Los paquetes binarios de MPlayer están disponibles desde muchos sitios.
Sin embargo <emphasis role="bold">ninguno de estos paquetes tiene soporte</emphasis>.
Reporte los problemas a sus autores, no a nosotros.
</para>

<sect2 id="debian">
<title>Empaquetado para Debian</title>
<para>
Para construir un paquete de Debian, ejecute la siguiente órden en el directorio
de fuentes de MPlayer:
<screen>fakeroot debian/rules binary</screen>
Y después puede instalar el paquete <filename>.deb</filename> como root de la
manera habitual:
<screen>dpkg -i ../mplayer_<replaceable>version</replaceable>.deb</screen>
</para>

<para>
Christian Marillat ha hecho los paquetes no oficiales de MPlayer para Debian,
de MEncoder y de tipografías para que en un momento, pueda (apt-)obtenerlos desde
su <ulink url="http://marillat.free.fr/">página personal</ulink>.
</para>
</sect2>

<sect2 id="rpm">
<title>Empaquetado RPM</title>
<para>
Dominik Mierzejewski ha creado y mantiene los paquetes oficiales RPM para Red Hat de
<application>MPlayer</application>. Están disponibles en su
<ulink url="http://www.piorunek.pl/~dominik/linux/pkgs/mplayer/">página personal</ulink>.
</para>

<para>
Los paquetes RPM para Mandrake están disponibles en el
<ulink url="http://plf.zarb.org/">P.L.F.</ulink>.
SuSE incluye una versión mutilada de MPlayer en su distribución. Puede obtener RPMs que
funcionan desde
<ulink url="http://packman.links2linux.de/?action=128">links2linux.de</ulink>.
</para>
</sect2>

<sect2 id="arm">
<title>ARM</title>
<para>
MPlayer funciona en PDAs con Linux en CPU ARM p.e. Sharp Zaurus, Compaq Ipaq. La
manera más facil de obtener MPlayer es bajarlo desde uno de los sitios de paquetes de
<ulink url="http://www.openzaurus.org">OpenZaurus</ulink> Si desea compilarlo usted
mismo, debe mirar en
<ulink url="http://openzaurus.bkbits.net:8080/buildroot/src/packages/mplayer?nav=index.html|src/.|src/packages">MPlayer</ulink>
y el directorio 
<ulink url="http://openzaurus.bkbits.net:8080/buildroot/src/packages/libavcodec?nav=index.html|src/.|src/packages">libavcodec</ulink>
en el raiz de la distribución de OpenZaurus. Ahí siempre tienen los Makefile y parches
más recientes usados para construir un MPlayer desde CVS con libavcodec.
Si necesita un entorno GUI, puede usar xmms-embebido.
</para>
</sect2>
</sect1>

<sect1 id="bsd">
<title>*BSD</title>
<para>
<application>MPlayer</application> funciona en FreeBSD, OpenBSD, NetBSD,
BSD/OS y Darwin. Hay versiones ports/pkgsrc/fink/etc de MPlayer disponibles
que son probablemente más faciles de usar que nuestras fuentes crudas.
</para>

<para>
Para construir MPlayer necesita GNU make (gmake - el make nativo de BSD
no funciona) y una versión reciente de binutils.
</para>

<para>
Si MPlayer se queja de que no encuentra <filename>/dev/cdrom</filename> o
<filename>/dev/dvd</filename>, cree un enlace simbólico apropiado:
<screen>ln -s /dev/(su_dispositivo_de_cdrom) /dev/cdrom</screen>
</para>

<para>
Para usar DLLs Win32 con MPlayer necesita re-compilar el kernel con la
&quot;<envar>opción USER_LDT</envar>&quot; (a no ser que ejecute FreeBSD-CURRENT,
donde es así por defecto).
</para>


<sect2 id="freebsd">
<title>FreeBSD</title>
<para>
Si su CPU tiene SSE, recompile el kernel con
&quot;<envar>la opción CPU_ENABLE_SSE</envar>&quot; (FreeBSD-STABLE o parches
del kernel son requeridos).
</para>
</sect2>

<sect2 id="openbsd">
<title>OpenBSD</title>
<para>
Debido a limitaciones en diferentes versiones de gas (relocalización frente a MMX),
puede ser necesario compilar en dos pasos: Primero asegúrate de que el no-nativo
está el primero en tu <envar>$PATH</envar> y haz <command>gmake -k</command>, después
asegúrate de que la versión nativa es la que se usa y haz <command>gmake</command>.
</para>
</sect2>
</sect1>

<sect1 id="solaris">
<title>Solaris</title>
<para>
<application>MPlayer</application> debería funcionar en Solaris 2.6 o posterior.
</para>

<para>
En <emphasis role="bold">UltraSPARCs</emphasis>, MPlayer tiene la ventaja de
las extensiones <emphasis role="bold">VIS</emphasis> (equivalentes a MMX), actualmente
solo en <emphasis>libmpeg2</emphasis>, <emphasis>libvo</emphasis> y
<emphasis>libavcodec</emphasis>, pero no en mp3lib. Puede ver un archivo VOB en una
CPU a 400MHz. Necesita
<ulink url="http://www.sun.com/sparc/vis/mediaLib.html">mLib</ulink> instalado.
</para>

<para>
Para contruir el paquete necesita GNU <application>make</application>
(<filename>gmake</filename>, <filename>/opt/sfw/gmake</filename>), el make
nativo de Solaris no funciona. Errores típicos que puede obtener construyendo
con el make de Solaris en lugar de con el make de GNU:
<screen>
   % /usr/ccs/bin/make
   make: Error fatal en lector: Makefile, línea 25: Fin de línea visto inesperado
</screen>
</para>

<para>
En Solaris SPARC, necesita el Compilador GNU C/C++; no importa si el compilador
GNU C/C++ está configurado con o sin el ensamblador GNU.
</para>

<para>
En Solaris x86, necesita el ensamblador GNU y el compilador GNU C/C++,
¡configurado para usar el ensamblador GNU! El código de MPlayer en la plataforma
x86 hace dificil el uso de las instrucciones de MMX, SSE y 3DNOW! que no puede
ser compilado usando el ensamblador de Sun <filename>/usr/ccs/bin/as</filename>.
</para>

<para>El script <filename>configure</filename> intenta encontrarlo, qué 
programa ensamblador es usado por tu órden &quot;gcc&quot; (en caso de que la
autodetección falle, use la opción <option>--as=/donde/este/instalado/gnu-as</option>
para decirle al script <filename>configure</filename> donde puede encontrar el "as"
de GNU en su sistema).
</para>

<para>
Mensaje de error de <filename>configure</filename> en un sistema Solaris x86
usando GCC sin el ensamblador GNU:
<screen>
   % configure
   ...
   Comprobando ensamblador (/usr/ccs/bin/as) ... , fallo
   Por favor, actualice(baje versión) de binutils a 2.10.1...
</screen>
(Solución: Instalar y usar un gcc configurado con <option>--with-as=gas</option>)
</para>

<para>
Error típico que se obtiene cuando se construye con un compilador GNU C que no 
usa GNU as:
<screen>
   % gmake
   ...
   gcc -c -Iloader -Ilibvo -O4 -march=i686 -mcpu=i686 -pipe -ffast-math
        -fomit-frame-pointer  -I/usr/local/include   -o mplayer.o mplayer.c
   Assembler: mplayer.c
   "(stdin)", line 3567 : Illegal mnemonic
   "(stdin)", line 3567 : Error de sintaxis 
   ... más errores "Illegal mnemonic" y "Error de sintaxis" ...
</screen>
</para>

<para>
Debido a fallos en Solaris 8, puede que no se puedan reproducir discos DVD mayores
de 4 GB:
</para>

<itemizedlist>
<listitem><para>
El controlador sd(7D) en Solaris 8 x86 tiene un error cuando accede a un bloque
de disco >4GB en un dispositivo usando un tamaño de bloque lógico != DEV_BSIZE
(p.e. CD-ROM y medios DVD). Debido a un error de desbordamiento de entero de
32Bit, un módulo de 4GB de dirección de disco es accedido.
(<ulink url="http://groups.yahoo.com/group/solarisonintel/message/22516"/>).
Este problema no existe en la versión SPARC de Solaris 8.
</para></listitem>

<listitem><para>
Un error similar está presente en el código de sistema de archivos hsfs(7FS)
(aka ISO9660), hsfs no puede soportar particiones/discos mayores de 4GB, todos
los datos se acceden módulo 4GB
(<ulink url="http://groups.yahoo.com/group/solarisonintel/message/22592"/>).
El problema hsfs puede ser corregido instalando el parche 109764-04 (sparc) /
109765-04 (x86).
</para></listitem>
</itemizedlist>

<para>
En Solaris con una CPU UltraSPARC, puede obtener alguna velocidad extra usando
las instrucciones VIS de la CPU para algunas operaciones que consumen un tiempo.
La acelación VIS puede ser usada en MPlayer llamando a funciones en la
<ulink url="http://www.sun.com/sparc/vis/mediaLib.html">mediaLib</ulink> de Sun.
</para>

<para>
Las operaciones aceleradas de mediaLib son usadas por el decodificador mpeg2 de
video y por la conversión en espacio de color en los controladoers de salida de
video.
</para>
</sect1>

<sect1 id="sgi">
<title>Silicon Graphics / Irix</title>
<para>
Puede probar a instalar el programa de instalación GNU, y (si no lo tiene
en su ruta global) apuntar a donde esté con:
<screen>./configure --install-path=RUTA</screen>
</para>

<para>
O puede usar el instalador por defecto que viene con IRIX 6.5 y en ese
caso debe editar el <filename>Makefile</filename> a mano un poquito.
Cambie las dos siguientes líneas:
<programlisting>
  $(INSTALL) -c -m 644 DOCS/mplayer.1 $(MANDIR)/man1/mplayer.1

  $(INSTALL) -c -m 644 etc/codecs.conf $(CONFDIR)/codecs.conf
</programlisting>
por:
<programlisting>
  $(INSTALL) -m 644 mplayer.1 $(MANDIR)/man1/

  $(INSTALL) -m 644 codecs.conf $(CONFDIR)/
</programlisting>
Y entonces haga (desde el directorio de fuentes de MPlayer):
<screen>cp DOCS/mplayer.1 . ; cp etc/codecs.conf .</screen>
y después continúe con la construcción e instalación.
</para>
</sect1>

<sect1 id="qnx">
<title>QNX</title>
<para>
Funciona. Necesita descargar SDL para QNX, e instalarlo. Después ejecute
<application>MPlayer</application> con las opciones <option>-vo sdl:photon</option>
y <option>-ao sdl:nto</option> y debe ir rápido.
</para>

<para>
La salida <option>-vo x11</option> puede ser más lenta que en Linux, porque QNX
solo tiene <emphasis>emulación</emphasis> de X que es MUY lenta. Use SDL.
</para>
</sect1>

<sect1 id="cygwin">
<title>Cygwin</title>
<para>
La versión Cygwin aún está en su infancia. Actualmente no tiene soporte para
OpenGL. Con SDL se sabe que distorsiona el sonido y la imagen o incluso bloquearse
en algunos sistemas. <ulink url="../../tech/patches.txt">Parches</ulink>
son siempre bienvenidos. Se obtienen mejores resultados con el controlador
de salida nativo de DirectX (<option>-vo directx</option>) y el controlador
de salida nativo de Windows (<option>-ao win32</option>). También debe comprobar
la lista de correo <ulink url="http://mplayerhq.hu/mailman/listinfo/mplayer-cygwin/">mplayer-cygwin</ulink> para ayuda y última información.
</para>

<para>
Versiones de Cygwin anteriores a la 1.3.23 no incluyen <filename>inttypes.h</filename>.
Debe copiar o enlazar <filename>etc/cygwin_inttypes.h</filename>
desde el directorio de fuentes de MPlayer a <filename>/usr/include/inttypes.h</filename>
para hacer que compile MPlayer.
</para>

<para>
Para obtener video DirectX nativo, descargue
<ulink url="http://www.videolan.org/vlc/dx7headers.tgz">los archivos de
cabecera de DirectX 7</ulink>, extráigalos a <filename>/usr/include/</filename> o a
<filename>/usr/local/include/</filename> y recompile. Entonces debe ser capaz de
usar el controlador de salida de directx. Puede hacer que la ventana se mantenga 
siempre encima con <option>-vo directx:ontop</option>. Si la imagen está distorsionada,
pruebe a desactivar la aceleración hardware con <option>-vo directx:noaccel</option>.
</para>

<para>
Instrucciones y archivos para usar SDL bajo Cygwin pueden encontrarse en el
<ulink url="http://www.libsdl.org/extras/win32/cygwin/">sitio de libsdl</ulink>.
</para>

<para>
Puede reproducir VCDs reproduciendo archivos .DAT o .MPG que Windows muestra en los
VCDs. Funciona de la siguiente manera (ajuste la letra de la unidad a su CD-ROM):
<screen>mplayer d:/mpegav/avseq01.dat</screen>
<screen>mplayer /cygdrive/d/MPEG2/AVSEQ01.MPG</screen>
</para>

<para>
Para DVDs también funciona, establezca el dispositivo de DVD corretamente a
la unidad de CD-ROM que corresponda:
<screen>mplayer dvd://&lt;title&gt; -dvd-device '\\.\d:'</screen>
</para>

<para>
Las DLLs de QuickTime y Real también funcionan. Compile con <option>--enable-qtx</option>
y <option>--enable-real</option> y ponga los codecs en
el sitio de las DLL de Windows por defecto, <filename class="directory">C:\WINNT\system32</filename>
o <filename class="directory">C:\Windows\system</filename> dependiendo de su versión
de Windows.
</para>

<para>
La consola Cygwin es extrañamente lenta. Redireccionar la salida o usar la
opción <option>-quiet</option> ha sido reportado que mejora el rendimiento.
</para>
 
</sect1>

</chapter>
