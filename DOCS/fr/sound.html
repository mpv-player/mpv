<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>

<HEAD>
  <TITLE>Son - MPlayer - Le lecteur vidéo pour Linux</TITLE>
  <LINK REL="stylesheet" TYPE="text/css" HREF="default.css">
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
</HEAD>

<BODY>


<H3><A NAME="audio">2.3.2 Périphériques de sortie audio</A></H3>

<H4><A NAME="sync">2.3.2.1 Synchronisation audio/vidéo</A></H4>

<P>L'interface audio de MPlayer se nomme <I>libao2</I>. Elle possède actuellement 
  ces drivers :</P>

<DL>
  <DT>oss</DT>
  <DD>pilote OSS (ioctl) (supporte le transfert AC3 matériel)</DD>

  <DT>sdl</DT>
  <DD>pilote SDL (supporte les démons de son comme <B>ESD</B> et <B>ARTS</B>)</DD>

  <DT>nas</DT>
  <DD>pilote NAS (Network Audio System)</DD>

  <DT>alsa5</DT>
  <DD>pilote ALSA 0.5 natif</DD>

  <DT>alsa9</DT>
  <DD>pilote ALSA 0.9 natif (supporte le transfert AC3 matériel)</DD>

  <DT>sun</DT>
  <DD>pilote audio SUN (<CODE>/dev/audio</CODE>) pour les utilisateurs BSD et Solaris8</DD>

  <DT>arts</DT>
  <DD>pilote ARTS natif (principalement pour les utilisateurs KDE)</DD>

  <DT>esd</DT>
  <DD>pilote ESD natif (principalement pour les utilisateurs GNOME)</DD>
</DL>

<P>Les pilotes Linux des cartes son ont des problèmes d'incompatibilité. C'est pourquoi 
  MPlayer utilise une fonction des pilotes écrits <EM>correctement</EM> pour maintenir une
  synchro audio/vidéo correcte. Malheureusement, certains auteurs de pilotes
  n'ont que faire de cette fonction: elle n'est pas requise pour jouer des MP3s ou
  des effets sonores.</P>

<P>D'autres lecteurs multimédia comme <A HREF="http://avifile.sourceforge.net">aviplay</A> 
  ou <A HREF="http://xine.sourceforge.net">xine</A> fonctionnent probablement
  autrement avec ces pilotes parce qu'ils utilisent des méthodes &quot;simples&quot; pour leur
  synchro interne. Le temps affiché avec leurs méthodes n'est pas aussi précis que celui 
  de MPlayer.</P>

<P>Utiliser MPlayer avec un pilote correctement écrit ne provoquera pas de désynchro
  A/V relatives à l'audio, à part avec les fichiers très mal créés (voir la page de
  man pour les solutions).</P>
  
<P>Si vous avez un mauvais pilote audio, essayez l'option <CODE>-autosync</CODE>,
  il devrait régler vos problèmes. Voir la page de man pour les informations
  détaillées.</P>

<P>Quelques notes:</P>

<UL>
  <LI>Si vous avez un pilote OSS, essayez d'abord avec l'option <CODE>-ao oss</CODE>
    (utilisé par défaut). Si vous obtenez des scratchs ou une sonorité anormale, 
    essayez l'option <CODE>-ao sdl</CODE> (NOTE: vous devez bien sûr avoir installé 
    les librairies SDL ainsi que leurs fichiers d'entête). Le pilote audio SDL est plus 
    efficace dans de nombreux cas et supporte également ESD (GNOME) et ARTS (KDE).</LI>
  <LI>Si vous avez ALSA version 0.5, vous devrez presque toujours utiliser l'option
    <CODE>-ao alsa5</CODE> , la version 0.5 émulant mal l'OSS, qui <B>plante MPlayer</B> 
      avec un message du type:<BR>
    <CODE>DEMUXER: Too many (945 in 8390980 bytes) video packets in the buffer!</CODE></LI>
  <LI>Sur <B>Solaris</B>, utilisez le pilote audio SUN avec l'option
  <CODE>-ao sun</CODE>, sinon ni la vidéo ni le son ne fonctionneront.</LI>
  <LI>Si le son émet des cliquètements lors d'une lecture depuis le CD-ROM, activez l'IRQ 
    unmasking, ex.
    <CODE>hdparm -u1 /dev/cdrom</CODE> (<CODE>man hdparm</CODE>). Ceci est généralement
    bénéfique et décrit plus en détail dans la 
    <A HREF="cd-dvd.html#drives">section CD-ROM</A>.</LI>
</UL>


<H4><A NAME="experiences">2.3.2.2 Problèmes de cartes son, recommandations</A></H4>

<P>Sous Linux, utilisez le noyau 2.4 si possible, le 2.2 n'a pas été testé.</P>

<P>Les pilotes son de Linux sont surtout fournis par la version libre d'OSS. Ces pilotes
  ont été repris par <A HREF="http://www.alsa-project.org">ALSA</A> (Advanced Linux Sound 
  Architecture) dans la série de développement 2.5. Si votre distribution n'utilise pas
  déjà ALSA vous pourriez souhaiter essayer leurs pilotes si vous avez des problèmes
  de son. Les pilotes ALSA sont généralement supérieurs à OSS en compatibilité, performances
  et fonctionnalités. Mais certaines cartes ne sont supportées que par les pilotes OSS
  commerciaux de <A HREF="http://www.opensound.com/">4Front Technologies</A>. Ils supportent
  également de nombreux systèmes non-Linux.</P>
  
<TABLE BORDER="1" WIDTH="100%">

  <TR>
    <TH ROWSPAN="2"><B>CARTE SON</B></TH>
    <TH COLSPAN="4"><B>PILOTE</B></TH>
    <TH ROWSPAN="2"><B>kHz Max</B></TH>
    <TH ROWSPAN="2"><B>Max Canaux</B></TH>
    <TH ROWSPAN="2"><B>Max Ouverts<FONT SIZE="-2"><A HREF=#note1>[1]</A></FONT></B></TH>
  </TR>

  <TR>
    <TH><B>OSS/Libre</B></TH>
    <TH><B>ALSA</B></TH>
    <TH><B>OSS/Pro</B></TH>
    <TH><B>Autres</B></TH>
  </TR>

  <TR>
    <TD><B>VIA intégré (686/A/B, 8233, 8235)</B></TD>
    <TD><A HREF="http://sourceforge.net/project/showfiles.php?group_id=3242&amp;release_id=59602">via82cxxx_audio</A></TD>
    <TD>snd-via82xx</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
    <TD>4-48 kHz ou 48 kHz uniquement, selon le chipset</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
  </TR>

  <TR>
    <TD><B>Aureal Vortex 2</B></TD>
    <TD>aucun</TD>
    <TD>aucun</TD>
    <TD>OK</TD>
    <TD><A HREF="http://aureal.sourceforge.net">Pilotes Linux Aureal</A><BR>
      <A HREF="http://makacs.poliod.hu/~pontscho/aureal/au88xx-1.1.3.tar.bz2">taille du tampon portée à 32k</A></TD>
    <TD>48</TD>
    <TD>4.1</TD>
    <TD>5+</TD>
  </TR>

  <TR>
    <TD><B>SB Live!</B></TD>
    <TD>Analogique OK, SP/DIF non fonctionnel</TD>
    <TD>Tous deux OK</TD>
    <TD>Tous deux OK</TD>
    <TD><A HREF="http://opensource.creative.com">Pilote OSS de Creative (support SP/DIF)</A></TD>
    <TD>192</TD>
    <TD>4.0/5.1</TD>
    <TD>32</TD>
  </TR>

  <TR>
    <TD><B>SB 128 PCI (es1371)</B></TD>
    <TD>OK</TD>
    <TD>?</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
    <TD>48</TD>
    <TD>stéréo</TD>
    <TD>2</TD>
  </TR>

  <TR>
    <TD><B>SB AWE 64</B></TD>
    <TD>max 44kHz</TD>
    <TD>48kHz mauvaise qualité</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
    <TD>48</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
  </TR>

  <TR>
    <TD><B>GUS PnP</B></TD>
    <TD>aucun</TD>
    <TD>OK</TD>
    <TD>OK</TD>
    <TD>&nbsp;</TD>
    <TD>48</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
  </TR>


  <TR>
    <TD><B>Gravis UltraSound ACE</B></TD>
    <TD>pas OK</TD>
    <TD>OK</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
    <TD>44</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
  </TR>
  
  <TR>
    <TD><B>Gravis UltraSound MAX</B></TD>
    <TD>OK</TD>
    <TD>OK (?)</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
    <TD>48</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
  </TR>

  <TR>
    <TD><B>ESS 688</B></TD>
    <TD>OK</TD>
    <TD>OK (?)</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
    <TD>48</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
  </TR>

  <TR>
    <TD><B>Cartes C-Media (lesquelles ?)</B></TD>
    <TD>pas OK (hissing) (?)</TD>
    <TD>OK</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
    <TD>?</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
  </TR>

  <TR>
    <TD><B>Yamaha cards (*ymf*)</B></TD>
    <TD>pas OK (?) (peut-être <CODE>-ao sdl</CODE>)</TD>
    <TD>OK uniquement avec ALSA 0.5 avec émulation OSS <B>ET</B>
      <CODE>-ao sdl</CODE> (!) (?)</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
    <TD>?</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
  </TR>

  <TR>
    <TD><B>Cartes avec chips envy24 (comme la Terratec EWS88MT)</B></TD>
    <TD>?</TD>
    <TD>?</TD>
    <TD>OK</TD>
    <TD>&nbsp;</TD>
    <TD>?</TD>
    <TD>&nbsp;</TD>
    <TD>&nbsp;</TD>
  </TR>

  <TR>
    <TD><B>PC Speaker ou DAC</B></TD>
    <TD>OK</TD>
    <TD>aucun</TD>
    <TD>&nbsp;</TD>
    <TD><A HREF="http://www.geocities.com/stssppnn/pcsp.html">Pilote PC speaker OSS Linux</a></TD>
    <TD>Ce pilote émule 44.1, peut-être plus.</TD>
    <TD>mono</TD>
    <TD>1</TD>
  </TR>

</TABLE>

<P><A NAME="note1"><B>[1]</B></A>: nombre d'applications pouvant utiliser le périphérique
  <I>en même temps</I>.</P>

<P>Les retours sur ce document sont les bienvenus. Merci de nous faire savoir comment
  MPlayer et votre(vos) carte(s) son ont fonctionné ensemble.</P>

  
<H4><A NAME="af">2.3.2.3 Filtres audio</A></H4>

<P>Les anciens plugins audio ont été remplacés par une nouvelle couche de filtres audio. 
  Les filtres audio sont utilisés pour changer les propriétés des données audio avant
  que le son n'atteigne la carte son. L'activation et la désactivation sont normalement
  automatisés mais peuvent être outrepassés. Les filtres sont activés quand les propriétés
  des données audio différent de celles requises par la carte son et désactivés si 
  nécessaire. L'option <CODE>-af filtre1,filtre2,...</CODE> est utilisée pour outrepasser
  l'activation automatique des filtres ou pour insérer des filtres qui ne le sont pas
  automatiquement. Les filtres seront exécutés dans l'ordre où ils apparaissent dans la
  liste séparée par des virgules.</P>

<P>Exemple:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af resample,pan film.avi </CODE></P>

<P>ferait passer le son au travers du filtre de resampling suivi du filtre panoramique.
  Remarquez que la liste ne doit contenir aucun espace, sinon cela échouera.</P>

<P>Les filtres ont souvent des option changeant leur comportement. Ces options sont 
  expliquées en détail dans les sections ci-dessous. Un filtre sera exécuté en utilisant
  ses paramètres par défaut si ses options sont omises. Voici un exemple de comment utiliser
  les filtres en conjonction avec des options spécifiques à un filtre:</P>

<P>&nbsp;&nbsp;<CODE>mplayer -af resample=11025,pan=1:0.5:0.5 -channels 1
  -srate 11025 media.avi</CODE></P>

<P>définirait la fréquence de sortie du filtre resample à 11025Hz et downmixerait
  l'audio dans 1 canal en utilisant le filtre pan.</P>

<P>Le fonctionnement général de la couche filtre est contrôlé en utilisant l'option
  <CODE>-af-adv</CODE>. Cette option a deux sous-options:</P>

<DL>
  <DT><CODE>force</CODE><DT>
  <DD>est un champ de bits qui contrôle comment les filtres sont insérés et quelles optimisations
    de vitesse/exactitude ils utilisent:
    <DL>
      <DT><CODE>0</CODE></DT>
      <DD>Utilise l'insertion automatique des filtres et optimise en fonction de la vitesse du CPU.</DD>
      <DT><CODE>1</CODE></DT>
      <DD>Utilise l'insertion automatique des filtres et optimise pour la plus haute vitesse.<BR>
        <EM>Attention:</EM> Certaines fonctions des filtres audio pourraient alors échouer silencieusement,
        et la qualité du son pourrait en souffrir.</DD>
      <DT><CODE>2</CODE></DT>
      <DD>Utilise l'insertion automatique des filtres et optimise pour la qualité.</DD>
      <DT><CODE>3</CODE></DT>
      <DD>N'utilise pas d'insertion automatique des filtres et n'optimise pas.<BR>
        <I>Attention:</I> Il pourrait arriver de planter MPlayer en utilisant ce réglage.</DD>
      <DT><CODE>4</CODE></DT>
      <DD>Utilise l'insertion automatique des filtres comme indiqué au champ 0, mais fait des calculs
        à virgule flottante si possible.</DD>
      <DT><CODE>5</CODE></DT>
      <DD>Utilise l'insertion automatique des filtres comme indiqué au champ 1, mais fait des calculs
        à virgule flottante si possible.</DD>
      <DT><CODE>6</CODE></DT>
      <DD>Utilise l'insertion automatique des filtres comme indiqué au champ 2, mais fait des calculs
        à virgule flottante si possible.</DD>
      <DT><CODE>7</CODE></DT>
      <DD>N'utilise pas d'insertion automatique des filtres comme indiqué au champ 3, et fait des calculs
        à virgule flottante si possible.</DD>
    </DL>
  </DD>
  
  <DT><CODE>list</CODE></DT>
  <DD>est un alias de l'option -af.</DD>
</DL>

<P>La couche filtre est également affectée par les options génériques suivantes:

<DL>
  <DT><CODE>-v</CODE></DT>
  <DD>Augmente le niveau de verbosité et fait afficher des messages d'état supplémentaires 
    à la plupart des filtres.</DD>
  <DT><CODE>-channels</CODE></DT>
  <DD>Cette option définie le nombre de canaux de sorties voulus pour votre carte son.
    Il affecte également le nombre de canaux qui sont décodés à partir des média.
    Si le médium contient moins de canaux que le nombre demandé le filtre channels
    (voir plus bas) sera automatiquement inséré. Le routage sera le routage par défaut
    pour le filtre channels.</DD>
  <DT><CODE>-srate</CODE></DT>
  <DD>Cette option sélectionne le taux d'échantillonage voulu pour votre carte son. Si la fréquence
    d'échantillonage de votre carte son est différente de celle du médium, le filtre resample 
    (voir plus bas) sera inséré dans la couche filtre audio pour compenser la différence.</DD>
  <DT><CODE>-format</CODE><DT>
  <DD>Cette option définie le format de sample de la couche audio et de la carte son. Si le format de
    sample demandé pour votre carte son est différent de celui du médium, un filtre format (voir plus bas)
    sera inséré pour rectifier la différence.</DD>
</DL>


<H4><A NAME="af_resample">2.3.2.3.1 Up/Down-sampling</A></H4>

<P>MPlayer supporte pleinement l'up/down-sampling du son par l'intermédiaire du filtre
   <CODE>resample</CODE>. Ce filtre peut être utilisé
  si vous avez une carte son à fréquence fixe ou si vous avez une vieille carte son
  qui n'est capable que de 44.1kHz. Ce filtre est automatiquement activé si cela est
  nécessaire, mais il peut être explicitement activé en ligne de commande. Il a trois
  options:</P>

<DL>
  <DT><CODE>srate &lt;8000-192000&gt;</CODE></DT>
  <DD>est un entier utilisé pour définir la fréquence d'échantillonage de sortie
    en Hz. L'intervalle valide pour ce paramètre va de 8kHz à 192kHz. Si les fréquences
    d'entrée et de sortie sont les mêmes ou si les paramètres sont
    omis, le filtre est automatiquement retiré. Un fréquence d'échantillonage haute
    augmente normalement la qualité audio, surtout utilisé en conjonction avec d'autres
    filtres.</DD>

  <DT><CODE>sloppy</CODE></DT>
  <DD>est un paramètre binaire optionnel qui permet à la fréquence de sortie de différer
    légèrement de la fréquence donnée par <CODE>srate</CODE>. Cette option est utilisé
    au démarrage si la lecture est extrêmement lente.</DD>

  <DT><CODE>type &lt;0-2&gt;</CODE><DT>
  <DD>est un entier optionnel compris entre <CODE>0</CODE> et <CODE>2</CODE> qui
    sélectionne quelle méthode de ré-échantillonnage utiliser. Ici <CODE>0</CODE> représente
    l'interpolation linéaire comme méthode de ré-échantillonnage,  <CODE>1</CODE> représente
    un ré-échantillonnage en utilisant une banque de filtres poly-phase et des calculs d'entiers
    et <CODE>2</CODE> représente un ré-échantillonnage en utilisant une banque de filtres poly-phase 
    et des calculs à virgule flottante. L'interpolation linéaire est extrêmement rapide, mais souffre d'une
    pauvre qualité sonore surtout quand elle est utilisée pour l'up-sampling. La meilleur qualité est donnée par
    <CODE>2</CODE> mais cette méthode souffre également de la plus forte charge CPU.</DD>
</DL>

<P>Exemple:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af resample=44100:0:0</CODE></P>

<P>fixerait la fréquence de sortie du filtre resample à 44100Hz en utilisant une échelle 
  de fréquence exacte et l'interpolation linéaire.</P>


<H4><A NAME="af_channels">2.3.2.3.2 Changer le nombre de canaux</A></H4>

<P>Le filtre <CODE>channels</CODE> peut être utilisé pour ajouter ou retirer 
  des canaux, il peut aussi être utilisé pour le routage ou la copie de canaux. Il est
  automatiquement activé quand la sortie du filtre audio diffère de la couche d'entrée 
  ou quand il est demandé par un autre filtre. Se filtre se retire si il n'est pas requis. 
  Le nombre d'option est dynamique:</P>

<DL>
  <DT><CODE>nch &lt;1-6&gt;</CODE></DT>
  <DD>est un entier entre <CODE>1</CODE> et <CODE>6</CODE> qui est utilisé pour définir 
    le nombre de canaux de sortie. Cette option est requise, la laisser vide provoquera une erreur à l'exécution.</DD>

  <DT><CODE>nr</CODE></DT>
  <DD>est un entier entre <CODE>1</CODE> et <CODE>6</CODE> qui est utilisé pour définir le nombre de routes.
    Ce paramètre est optionnel. Si il est omis le routage par défaut est utilisé.</DD>

  <DT><CODE>from1:to1:from2:to2:from3:to3...</CODE></DT>
  <DD>sont des paires de nombres entre <CODE>0</CODE> et <CODE>5</CODE> qui définissent où chaque canal est
    routé.</DD>
</DL>

<P>Si seul <CODE>nch</CODE> est indiqué le routage par défaut est utilisé, il fonctionne
  comme cela: Si le nombre de canaux de sortie est plus grand que le nombre de canaux
  d'entrée des canaux vides sont insérés (excepté le mixage de mono vers stéréo, dans ce
  cas le canal mono est répété sur chacun des canaux de sortie). Si le nombre de canaux de
  sortie est plus petit que le nombre de canaux d'entrée les canaux en trop seront 
  tronqués.</P>

<P>Exemple 1:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af channels=4:4:0:1:1:0:2:2:3:3 media.avi </CODE></P>

<P>changerait le nombre de canaux à 4 et définirait 4 routes qui échangent le canal
  0 et le canal 1 et laissent les canaux 2 et 3 intacts. Remarquez que si le 
  média qui contient deux canaux était joué en arrière, les canaux 2 et 3 contiendraient
  du silence mais les 0 et 1 seraient tout de même inversés.</P>

<P>Exemple 2:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af channels=6:4:0:0:0:1:0:2:0:3 media.avi </CODE></P>

<P>changerait le nombre de canaux à 6 et définirait 4 routes copiant le canal 0
  dans les canaux 0 à 3. Les canaux 4 et 5 contiendront du silence.</P>


<H4><A NAME="af_format">2.3.2.3.3 Convertisseur de format de sample</A></H4>

<P>Le filtre <CODE>format</CODE> fait la conversion entre les différents formats de sample.
  Il est automatiquement activé si requis par la carte son ou un autre filtre.</P>

<DL>
  <DT><CODE>bps &lt;number&gt;</CODE></DT>
  <DD>peut être <CODE>1</CODE>, <CODE>2</CODE> ou <CODE>4</CODE> et définie le nombre
    d'octets par sample. Cette option est requise, la laisser vide provoquera une erreur à l'exécution.</DD>

  <DT><CODE>f &lt;format&gt;</CODE></DT>
  <DD>est une chaîne texte décrivant le format de sample. Cette chaîne est un mix
    concaténé de: <CODE>alaw</CODE>, <CODE>mulaw</CODE> ou
    <CODE>imaad</CODE>, <CODE>float</CODE> ou <CODE>int</CODE>,
    <CODE>unsigned</CODE> ou <CODE>signed</CODE>, <CODE>le</CODE> ou
    <CODE>be</CODE> (little ou big endian). Cette option est requise, la laisser vide
    provoquera une erreur à l'exécution.</DD>
</DL>

<P>Exemple:<BR>
  &nbsp;&nbsp;<CODE>mplayer media.avi -af format=4:float</CODE></P>

<P>initialiserait le format de sortie en données à virgule de 4 octets par sample.</P>


<H4><A NAME="af_delay">2.3.2.3.4 Delay</A></H4>

<P>Le filtre <CODE>delay</CODE> décale le son vers les haut-parleurs de façon a faire arriver le son dans les 
  différents canaux au même moment dans la position d'écoute. Cela n'est utile que si
  vous avez plus de 2 haut-parleurs Ce filtre a une nombre variable de paramètres:</P>

<DL>
  <DT><CODE>d1:d2:d3...</CODE></DT>
  <DD>sont des nombres à virgule représentant les décalages en ms qui devraient être
    imposés aux différents canaux. Le décalage minimum est 0ms et le maximum
    est 1000ms.</DD>
</DL>

<P>Pour calculer le décalage requis pour chaque canal, faites comme ceci:</P>

<OL>
  <LI>Mesurez la distance entre les hauts parleurs et votre position d'écoute (en mètres) 
    ce qui vous donne les distances s1 à s5 (pour un système 5.1).
    Ce n'est pas la peine de le faire pour le caisson de basses (vous n'entendrez pas la 
    différence de toute façon).</LI>
  <LI>Soustrayez les distances s1 à s5 à la distance maximum c-a-d.<BR>
    s[i] = max(s) - s[i]; i = 1...5</LI>
  <LI>Les décalages requis (en ms) sont calculés avec<BR>
    d[i] = 1000*s[i]/342; i = 1...5 </LI>
</OL>

<P>Exemple:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af delay=10.5:10.5:0:0:7:0 media.avi</CODE></P>

<P>décalerait les canaux avant gauche et droite de 10.5ms, les deux canaux arrière et le
  caisson de 0ms et le canal central de 7ms.</P>


<H4><A NAME="af_volume">2.3.2.3.5 Contrôle de volume logiciel</A></H4>

<P>Le contrôle de volume logiciel est implémenté par le filtre audio <CODE>volume</CODE>. 
  Utilisez ce filtre avec précaution 
  car il peut réduire le signal au niveau de bruit du son. Dans la plupart des cas
  il vaut mieux fixer le niveau du son PCM au max, laisser ce filtre de côté et contrôler
  le niveau de sortie de vos haut-parleurs avec le contrôleur de volume principal du 
  mixeur. Au cas où votre carte son ait un mixeur numérique au lieu d'un analogique,
  et que vous entendez sa distorsion, utilisez le mixeur MASTER à la place. 
  Si il y a un amplificateur externe connecté à l'ordinateur (ce qui est presque
  toujours le cas), le niveau de bruit peut être minimisé en ajustant le niveau maître
  et le bouton du volume jusqu'à ce que le bruit résiduel soit parti. Ce filtre a
  deux options:</P>

<DL>
  <DT><CODE>v &lt;-200 - +60&gt;</CODE></DT>
  <DD>est un nombre à virgule compris entre <CODE>-200</CODE> et <CODE>+60</CODE> 
    qui représente le niveau du volume en dB. Le niveau par défaut est 0dB.</DD>

  <DT><CODE>c</CODE></DT>
  <DD>est un contrôle binaire qui active et désactive le Soft-Clipping. Le Soft-Clipping 
    peut rendre le son plus fluide si de très gros niveaux de volume de son sont utilisés. 
    Activez cette option si l'intervalle dynamique de vos haut-parleurs est très bas.
    Soyez conscient que cette fonction crée une distorsion et ne devrait être utilisé
    qu'en dernier recours.</DD>
</DL>

<P>Exemple:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af volume=10.1:0 media.avi</CODE></P>

<P>amplifierait le son de 10.1dB et bloque le volume si il est trop haut.</P>

<P>Ce filtre a une seconde fonction: Il mesure le niveau maximum du son et l'affiche 
  quand MPlayer se termine. Cette estimation de volume peut être utilisée pour définir
  le niveau de son dans MEncoder pour que l'intervalle dynamique maximum soit utilisé.</P>


<H4><A NAME="af_equalizer">2.3.2.3.6 Egaliseur</A></H4>

<P>Le filtre <CODE>equalizer</CODE> est un égaliseur graphique à 10 bandes, implémenté en utilisant 10 filtres
  IIR de bande passante. Cela signifie qu'il fonctionne quel que soit le type d'audio
  joué. Les fréquences centrales pour les 10 bandes sont:</P>

<TABLE BORDER="0" WIDTH="100%">
  <TR><TD>Bande No.</TD><TD>Fréquence centrale</TD></TR>
  <TR><TD>0</TD><TD>31.25 Hz</TD></TR>
  <TR><TD>1</TD><TD>62.50 Hz</TD></TR>
  <TR><TD>2</TD><TD>125.0 Hz</TD></TR>
  <TR><TD>3</TD><TD>250.0 Hz</TD></TR>
  <TR><TD>4</TD><TD>500.0 Hz</TD></TR>
  <TR><TD>5</TD><TD>1.000 kHz</TD></TR>
  <TR><TD>6</TD><TD>2.000 kHz</TD></TR>
  <TR><TD>7</TD><TD>4.000 kHz</TD></TR>
  <TR><TD>8</TD><TD>8.000 kHz</TD></TR>
  <TR><TD>9</TD><TD>16.00 kHz</TD></TR>
</TABLE>

<P>Si la fréquence du son joué est plus basse que la fréquence centrale pour une bande
  de fréquence, alors cette bande sera désactivée. Un bogue connu de ce filtre est que
  les caractéristiques de la plus haute bande ne sont pas complètement symétriques si
  la fréquence du sample est proche de la fréquence centrale de la bande. Ce problème
  peut être contourné en up-samplant le son en utilisant le filtre resample avant qu'il
  n'atteigne ce filtre. </P>

<P>Ce filtre a 10 paramètres:</P>

<DL>
  <DT><CODE>g1:g2:g3...g10</CODE></DT>
  <DD>sont des nombres à virgule compris entre <CODE>-12</CODE> et <CODE>+12</CODE> 
    représentant le gain en dB pour chaque bande de fréquence.</DD>
</DL>

<P>Exemple:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af equalizer=11:11:10:5:0:-12:0:5:12:12 media.avi</CODE></P>

<P>amplifierait le son sur les fréquences les plus hautes et les plus basses tout en
  les annulant presque complètement autour de 1kHz.</P>

  
<H4><A NAME="af_panning">2.3.2.3.7 Filtre panoramique</A></H4>

<P>Utilisez le filtre <CODE>pan</CODE> pour mixer les canaux arbitrairement. Fondamentalement
  c'est une combinaison des filtres volume control et channels. Il y a deux utilisations
  principales pour ce filtre: </P>

<OL>
  <LI>Down-mixage de plusieurs canaux vers seulement quelques uns, stéréo vers mono par 
  exemple.</LI>
  <LI>Faire varier la "largeur" du haut parleur central dans un système de son surround.</LI>
</OL>

<P>Ce filtre est difficile à utiliser, et nécessitera quelques réglage avant d'obtenir le 
  résultat souhaité. Le nombre d'options pour ce filtre dépends du nombre de canaux de 
  sortie:</P>

<DL>
  <DT><CODE>nch &lt;1-6&gt;</CODE></DT>
  <DD>est un entier compris entre <CODE>1</CODE> et <CODE>6</CODE> et est utilisé pour définir le 
    nombre de canaux de sortie. Cette option est requise, la laisser vide provoquera une erreur à 
    l'exécution.</DD>

  <DT><CODE>l00:l01:l02:..l10:l11:l12:...ln0:ln1:ln2:...</CODE></DT>
  <DD>sont des nombres à virgule compris entre <CODE>0</CODE> et <CODE>1</CODE>. 
    <CODE>l[i][j]</CODE> détermine le nombre j de canaux d'entrée à mixer dans le nombre i de 
    canaux de sortie.</DD>
</DL>

<P>Exemple:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af pan=1:0.5:0.5 -channels 1 media.avi</CODE></P>

<P>down-mixerait de stéréo vers mono.</P>

<P>Exemple 2:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af pan=3:1:0:1:0.5:0.5 -channels 3 media.avi</CODE></P>

<P>produirait une sortie à trois canaux en laissant les canaux 0 et 1 intacts,
  et mixerait les canaux 0 et 1 dans le canal 2 (qui pourrait être envoyé à un
  sub-woofer par exemple).</P>


<H4><A NAME="af_sub">2.3.2.3.8 Sub-woofer</A></H4>

<P>Le filtre <CODE>sub</CODE> ajoute un canal de sub woofer au flux audio. 
  Les données audio
  utilisées pour créer le canal sub-woofer sont une moyenne des canaux 0 et 1.
  Le fréquences basses sont ensuite filtrées par un filtre Butterworth de 4ème
  ordre avec une fréquence de cut-off par défaut de 60Hz et ajoutées à
  un canal séparé du flux audio. Attention: Désactivez ce filtre quand vous lisez
  des DVDs en son Dolby Digital 5.1, sinon ce filtre empêchera l'envoi du son au
  sub-woofer. Ce filtre a deux paramètres:</P>

<DL>
  <DT><CODE>fc &lt;20-300&gt;</CODE></DT>
  <DD>est un nombre à virgule optionnel utilisé pour définir la fréquence de cut-off
    du filtre en Hz. L'intervalle valide est de 20Hz à 300Hz. Pour les meilleurs
    résultats essayez de fixer la fréquence de cut-off le plus bas possible. Cela
    améliorera la stéréo ou le son surround. La fréquence de cut-off par défaut est
    60Hz.</DD>

  <DT><CODE>ch &lt;0-5&gt;</CODE></DT>
  <DD>est un entier optionnel entre <CODE>0</CODE> et <CODE>5</CODE> qui
    détermine le nombre de canaux à insérer dans le sous-canal audio.
    Par défaut c'est le canal numéro <CODE>5</CODE>. Notez que le nombre de canaux
    sera automatiquement augmenté à <CODE>ch</CODE> si nécessaire.</DD>
</DL>

<P>Exemple:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af sub=100:4 -channels 5 media.avi</CODE></P>

<P>ajouterait un canal sub-woofer avec une fréquence de cut-off de 100Hz au canal
  de sortie 4.</P>

<H4><A NAME="af_surround">2.3.2.3.9 Décodeur de son surround</A></H4>

<P>Le son surround encodé en matrice peut être décodé par le filtre <CODE>surround</CODE>.
  Dolby Surround est un exemple de format encodé en matrice. Beaucoup de fichiers
  avec deux canaux audio contiennent actuellement du son surround matricé.
  Pour utiliser cette fonction vous avez besoin d'une carte son supportant
  au moins 4 canaux. Ce filtre a un paramètre:</P>

<DL>
  <DT><CODE>d &lt;0-1000&gt;</CODE></DT>
  <DD>est un nombre à virgule optionnel entre <CODE>0</CODE> and
    <CODE>1000</CODE> utilisé pour définir le décalage en ms pour les haut-parleurs 
    arrières. Ce décalage devrait être défini comme ceci: si d1 est la distance entre
    la position d'écoute et les haut-parleurs de devant et d2 la distance entre
    la position d'écoute et les haut-parleurs de derrière, alors le décalage <CODE>d</CODE>
    peut être fixé à 15ms si d1 &lt;= d2 et à 15 + 5*(d1-d2) si d1 &gt; d2.
    La valeur par défaut pour <CODE>d</CODE> est 20ms.</DD>
</DL>

<P>Exemple:<BR>
  &nbsp;&nbsp;<CODE>mplayer -af surround=15 -channels 4 media.avi</CODE></P>

<P>ajouterait un décodage de son surround avec un décalage de 15ms pour le son des
  haut-parleurs arrière.</P>


<H4><A NAME="plugins">2.3.2.4 Plugins Audio (à ne plus utiliser)</A></H4>

<H2><STRONG>Note: Les plugins audio ont été remplacés par les filtres audio et seront
  prochainement supprimés.</STRONG></H2>

<P>Mplayer supporte les plugins audio. Les plugins audio peuvent être utilisés
  pour changer les propriétés des données audio avant que le son n'atteigne la
  carte son. Ils sont activés en utilisant l'option <CODE>-aop</CODE> qui
  accepte l'argument <CODE>list=plugin1,plugin2,...</CODE>. L'argument
  <CODE>list</CODE> est requis et détermine quels plugins devraient être utilisés
  et dans quel ordre ils devraient être exécutés. Exemple:</P>

<P>&nbsp;&nbsp;<CODE>mplayer media.avi -aop list=resample,format</CODE></P>

<P>passerait le son au travers du plugin resampling suivi du plugin format.</P>

<P>Ces plugins on également des options qui changent leur comportement. Ces options
  sont expliqués en détail dans les sections ci-dessous. Un plugin s'exécutera avec
  des paramètres par défaut si ses options sont omises. Voici un exemple de comment
  utiliser les plugins en combinaison avec des options spécifiques au plugin:</P>

<P>&nbsp;&nbsp;<CODE>mplayer media.avi -aop
  list=resample,format:fout=44100:format=0x8</CODE></P>

<P>fixerait la fréquence de sortie du plugin resample à 44100Hz et le format
  de sortie du plugin format à AFMT_U8.</P>

<P>Actuellement les plugins audio ne peuvent pas être utilisés dans MEncoder.</P>


<H4><A NAME="resample">2.3.2.4.1 Up/Downsampling</A></H4>

<P>Mplayer supporte pleinement l'up/downsampling du son. Ce plugin peut
  être utilisé si vous avez une carte son à fréquence fixe ou que vous
  vous battez avec une vieille carte son qui n'est capable que de sampler
  à 44.1kHz maxi. MPlayer <B>autodétecte</B> si il est nécessaire ou pas d'utiliser
  ce plugin. Ce plugin à une option: <CODE>fout</CODE> qui peut être utilisé pour fixer 
  la fréquence de sortie désirée. Elle est donnée en Hz, et est par défaut de 48kHz.</P>

<P>Utilisation:<BR>
  &nbsp;&nbsp;<CODE>mplayer media.avi -aop list=resample:fout=&lt;fréquence requise
  en Hz, comme 44100&gt;</CODE></P>

<P>Notez que la fréquence de sortie ne devrait pas être augmentée au dessus de sa
  valeur par défaut. Le dépassement provoquera la lecture des flux audio et vidéo
  en slow motion assortie d'une distorsion audio.</P>


<H4><A NAME="surround_decoding">2.3.2.4.2 Décodage son surround</A></H4>

<P>MPlayer a un plugin audio qui peut décoder le son surround encodé en matrice.
  Dolby Surround est un exemple de format encodé en matrice. Beaucoup de fichiers
  avec deux canaux audio contiennent actuellement du son surround matricié.
  Pour utiliser cette fonction vous avez besoin d'une carte son supportant
  au moins 4 canaux.</P>

<P>Utilisation:<BR>
  &nbsp;&nbsp;<CODE>mplayer media.avi -aop list=surround</CODE></P>


<H4><A NAME="format">2.3.2.3.3 Convertisseur de format de sample</A></H4>

<P>Si votre carte son ne supporte pas le format de données <CODE>int</CODE> 16bit signé,
  ce plugin peut être utilisé pour le changer dans un format que votre carte son
  comprends. Il a une option, <CODE>format</CODE>, qui peut être initialisée avec les
  nombres trouvés dans <CODE>libao2/afmt.h</CODE>. Ce plugin est très rarement utilisé
  et est réservée aux utilisateurs avancés. Gardez à l'esprit que ce plugin ne change
  que le format de sample et pas sa fréquence ou le nombre de canaux.</P>

<P>Utilisation:<BR>
  &nbsp;&nbsp;<CODE>mplayer media.avi -aop
  list=format:format=&lt;format de sortie requis&gt;</CODE></P>


<H4><A NAME="delay">2.3.2.4.4 Décalage</A></H4>

<P>Ce plugin décale le son est n'est là que comme exemple pour démontrer comment
  développer de nouveaux plugins. Il ne peut être utilisé pour rien d'utile d'un
  point de vue utilisateur et n'est mentionné ici que pour l'amour de l'exhaustivité.
  N'utilisez pas ce plugin à moins que vous soyez un développeur.</P>

<P>Si vous avez un fichier avec des pertes de synchro A/V ponctuelles, utilisez à la place
  les touches <CODE>+/-</CODE> pour ajuster la synchro à la volée. L'utilisation de l'OSD
  est recommandé pour simplifier cette tâche.</P>


<H4><A NAME="volume">2.3.2.4.5 Contrôle de volume logiciel</A></H4>

<P>Ce plugin est un remplacement logiciel pour le contrôleur de volume,
  et peut être utilisé sur des machines avec un périphérique mixeur endommagé.
  Il peut également être utilisé si on veut changer le volume de sortie de
  MPlayer sans changer le volume PCM du mixeur. Il a une option <CODE>volume</CODE>
  qui est utilisée en fixant une valeur entre 0 et 255, 101 étant la valeur par
  défaut qui équivaut à une amplification de 0dB. Utilisez ce plugin avec précaution
  car il peut réduire le signal jusqu'au bruit. Dans la plupart des cas il vaut mieux
  régler le volume MASTER au maximum, laisser ce plugin, et contrôler le niveau de sortie
  sur vos haut-parleurs avec le bouton principal du mixeur. Au cas où votre carte son
  ait un mixeur numérique au lieu d'un analogique, utilisez le contrôle mixeur MASTER
  à la place. Si il y a un ampli externe connecté à votre ordinateur (c'est la plupart
  du temps le cas), le niveau de bruit peut être minimisé en ajustant le niveau
  principal et la molette du volume de l'ampli jusqu'à ce que le bruit résiduel soit
  parti.</P>

<P>Utilisation:<BR>
  &nbsp;&nbsp;<CODE>mplayer media.avi -aop
  list=volume:volume=&lt;0-255&gt;</CODE></P>

<P>Ce plugin a également des capacités de compression ou "Soft-Clipping".
  La compression peut être utilisé si si la dynamique du son est très élevée
  ou si la dynamique de vos haut-parleurs est très basse. Soyez contient que cette
  fonction crée des distorsion et ne devrait être envisagée qu'en dernier ressort.</P>

<P>Utilisation:<BR>
  &nbsp;&nbsp;<CODE>mplayer media.avi -aop
  list=volume:softclip</CODE></P>


<H4><A NAME="extrastereo">2.3.2.4.6 Extrastereo</A></H4>

<P>Ce plugin augmente (linéairement) la différence entre les canaux gauche et
  droit (comme le plugin extrastereo de XMMS) qui donne une sorte d'effet "live"
  à la lecture.</P>

<P>Utilisation:<BR>
  &nbsp;&nbsp;<CODE>mplayer media.avi -aop list=extrastereo</CODE><BR>
  &nbsp;&nbsp;<CODE>mplayer media.avi -aop list=extrastereo:mul=3.45</CODE></P>

<P>Le coefficient par défaut (<CODE>mul</CODE>) est un nombre à virgule initialisé
  à 2.5. Si vous l'initialisez à 0.0, vous aurez un son mono (moyenne des deux
  canaux). Si vous l'initialisez à 1.0, le son sera inchangé, si vous l'initialisez à
  -1.0, les canaux gauche et droit seront inversés.</P>


<H4><A NAME="normalizer">2.3.2.4.7 Volume normalizer</A></H4>

<P>Ce plugin maximise le volume sans distordre le son.</P>

<P>Utilisation:<BR>
  &nbsp;&nbsp;<CODE>mplayer media.avi -aop list=volnorm</CODE><BR>


</BODY>
</HTML>
