DVD támogatás az MPlayer-ben!
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Olvasd el a 'DVD-FAQ' file-t is (és kerüld el az ott lévõ átirányítást:).

FONTOS: _NE_ kérj semmi funkciót a DVD visszajátszáshoz. Ez egy roppantul
kíserleti gány dolog. Talán nem is fog mûködni nálad. Ha tudsz segíteni, most
tedd meg! Elõször a létezõ problémákat szeretnénk fixálni, és csak utána
gondolkozni a további DVD funkciók beépítésén.

Ez egyben azt is jelenti, hogy a jelenleg létezõ DVD funkciók a fejlesztõknek,
és nem a felhasználóknak vannak szánva!

MPlayer fordítása libcss támogatással
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Elõször fordítsd le és installáld a libcss-t.
Utána fordítsd újra az MPlayer-t, hogy beleforduljon a libcss tamogatas is.
Ha nem teszi ezt automatikusan, akkor probald igy :

./configure --enable-css --withcsslibdir=/usr/local/lib --withcssincdir=/usr/local/include

(természetesen beírhatod a saját opcióidat is)

--with-csslibdir=/usr/local/lib
	Ez a könyvtár tartalmazza a libcss.so-t. Jó, ha benne van az
	/etc/ld.so.conf-ban is.
	
--with-cssincdir=/usr/local/include
	Ez tartalmazza a 'css.h' header file-t.

MEGJ.: Jelenleg nincs automatikus detektálás a libcss-hez! Ezeket az opciókat
  MUSZÁJ megadnod.

VOB file-ok lejátszása közvetlenül DVD-rõl
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mplayer -dvd /dev/dvd /mnt/cdrom/video_ts/vts_01_1.vob

ahol,

	'-dvd /dev/dvd' megmondja MPlayer-nek, hogy hol keresse a DVD meghajtót.
	A lemez autentikációjánál használatos.

	A filenév egyszerûen a VOB file neve a lemezen.

Úgy vettem észre, hogy az autentikálás root jogosultságot kíván meg,
úgyhogy muszáj lesz root-ként futtatni az MPlayer-t! (lásd 'Problémák' rész).

MEGJEGYZÉS a hangról:
	Úgy tûnik, hogy az MPlayer néha nem találja meg az elsõ audio streamet.
	Megadhatod például az '-aid 128' opcióval. Kísérletezz 128,129 és
	hasonló értékekkel is. Lásd 'Problémák' rész.


Új file-ok a forrásban
~~~~~~~~~~~~~~~~~~~~~
dvdauth.c
	Ez végzi a DVD autentikációt, és kitölti a key_disc és key_title-t.

dvdauth.h
	header file

Ezek a file-ok '#ifdef ... #endif' blokkon belül vannak, így, ha a libcss
támogatás ki van kapcsolva, semmi hatásuk nincs, és az MPlayer se lesz
libcss-hez linkelve.


Módosítások a forrásban
~~~~~~~~~~~~~~~~~~~~~~~
* (stream.c) STREAM_BUFFER_SIZE átállítva 2048-ra
* (demux_mpg.c) az eddigi 'encrypted VOB file is not supported' üzenet
  most egy flag-et állít 1-re. A fejléc elemzése után, ha ez a flag be van
  állítva, meghívjuk a libcss descramble funkcióját.
* (stream.c) néhány helyen, ahol az eddigi 4096 hosszúságú STREAM_BUFFER_SIZE
  hardcoded volt a forrásba, most 'STREAM_BUFFER_SIZE' van
* (mplayer.c) dvd autentikáció, seekelés meghívása


Teljesítmény
~~~~~~~~~~~~
Az én AMD K6/2-mön, a G400-am hardveres skálázásával és colorspace
konverziójával 70%-osan terheli a lejátszás a CPU-t, ha '-nosound'.
Sajnos hanggal együtt már nem elég a gépem :( Talán még lehet ezen
javítani ...
Azt hiszem, nem olyan rossz a helyzet... Néhány barátom szerint a xine
80-90% CPU-t használ DVD lejátszásnál sokkal erõsebb gépeken, mint
példaul 1Ghz-es Athlon-on (úgy tudom Windows alatt a minimális konfiguráció
DVD-hez 300Mhz-es Celeron környékén van).

Tipp: kikapcsoltam a libac3 downmix funkcióit (persze így nincs hang) és
az audio dekódoláshoz szükséges CPU használat rögtön visszaesett 24-rõl
11%-ra. Jól látszik, hogy optimalizálni kell a downmix-et (KNI kód nem számít
K6/2-n).


Problémák (TODO)
~~~~~~~~~~~~~~~~
* az autentikációnak root jogok kellenek. Ez azért furcsa, mert az OMS
  képes erre user-ként is.
* hang. Egyetlen DVD lemezem van (Matrix), ennyivel tesztelem az MPlayer-t.
  Néhány VOB file-nak angol hangja van, néhánynak spanyol, és van aminek
  egyáltalán nincs is.
  Úgy _tûnik_, hogy ha megadom a '-aid 128' opciót, mindnek angol nyelve
  lesz ...
* furcsa effektek, de csak NÉHÁNY VOB file-lal (úgy néz ki, mint valami
  interlace effekt, azaz minden 2. vonal az elõzõ képkockából van).


Beépítendõ funkciók
~~~~~~~~~~~~~~~~~~~
* chapter scanner
* audio stream scanner, és futás közbeni váltás lehetõsége
  (elõször is induláskor kellene választási lehetõség, lásd 'Problémák')
* DVD menü
  Megtaláltam (legalábbis a 'Matrix'-en) a menü VOB-ot, de nem tudom
  hogyan kell használni.
  (egy kis szemnyúzó OMS nézegetés után úgy tûnik, hogy az .ifo file-okat
  kellene beolvasni)
* subtitle támogatás
* OSD/GUI (?) támogatás chapter, subtitle és audio stream váltásokhoz
* némi dokis a DVD formátumról, pl.: melyik a 'root' VOB
  file a lemezen a video_ts könytárban, melyik a menü és így tovább...
* teljesítmény javítása (lásd 'Teljesítmény'-t felntebb)


Nincs hang probléma (Matrix DVD, VOB menü)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
End of packet while searching for PCM header

DEMUXER: Too many (2048 in 4131540 bytes) video packets in the buffer!
(maybe you play a non-interleaved stream/file or video codec failed)
MPEG: No Audio stream found...  ->nosound

Persze ez nem fordul elõ, ha megadod a '-aid 128' opciót.
